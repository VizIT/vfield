/*
 Copyright 2013-2014 Vizit Solutions

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
'use strict';class IllegalArgumentException extends Error{constructor(r){super(r);this.name="IllegalArgumentException"}};window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};(function(r){r.ensureNumber=function(p){return"number"===typeof p?p:parseFloat(p)}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};(function(r){r.toBoolean=function(p){var m=typeof p;if("boolean"===m)var b=p;else if("number"===m)b=0!==p;else if("string"===m)switch(p.trim().toLowerCase()){case "f":case "false":case "n":case "no":case "0":case "":b=!1;break;default:b=!0}return b}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};
(function(r){r.MotionEventHandler=function(p,m,b,c){var a;var e=[];var h=!1;var k=a=null;this.findTouchByIdentifier=function(d){var f;for(f=0;f<e.length;f++){var l=e[f].identifier;if(l===d)return f}return-1};this.handleTouchStart=function(d){var f;var l=d.targetTouches;for(f=0;f<l.length;f++){var g=l[f];-1===this.findTouchByIdentifier(g.identifier)&&e.push(g)}if(d.preventDefault)d.preventDefault();else return!1};this.handleTouchEnd=function(d){var f;var l=d.changedTouches;for(f=0;f<l.length;f++){var g=
this.findTouchByIdentifier(l[f].identifier);-1!==g&&e.splice(g,1)}if(d.preventDefault)d.preventDefault();else return!1};this.handleOneActiveMove=function(d){var f=d.changedTouches[0];var l=e[0];if(null!==l){var g=f.pageX-l.pageX;l=f.pageY-l.pageY;var t=p.getModelViewMatrix();m.rotateBy(t,l/150,g/150);p.setModelViewMatrix(t);p.requestRender();e.splice(0,1,f)}else e.push(f);if(d.preventDefault)d.preventDefault();else return!1};this.handleTwoActiveMove=function(d){var f=e[0];var l=e[1];var g=l.pageX-
f.pageX;var t=l.pageY-f.pageY;var n=Math.sqrt(g*g+t*t);var q=d.changedTouches;for(g=0;g<q.length;g++){var v=q[g];t=v.identifier;f.identifier===t?(f=v,e.splice(0,1,v)):l.identifier===t&&(l=v,e.splice(1,1,v))}g=l.pageX-f.pageX;t=l.pageY-f.pageY;p.zoomBy(-(Math.sqrt(g*g+t*t)-n)/c);if(d.preventDefault)d.preventDefault();else return!1};this.handleTouchMove=function(d){return 1===e.length?this.handleOneActiveMove(d):2===e.length?this.handleTwoActiveMove(d):!0};this.handleMouseDown=function(d){h=!0;a=d.clientX;
k=d.clientY};this.handleMouseUp=function(d){h=!1};this.handleMouseMove=function(d){if(h){var f=d.clientX,l=d.clientY,g=f-a,t=l-k;d=p.getModelViewMatrix();m.rotateBy(d,t/30,g/30);p.setModelViewMatrix(d);p.requestRender();a=f;k=l}};this.handleMouseWheel=function(d){d=window.event||d;p.zoomBy((20*d.detail|d.deltaY|-d.wheelDeltaY)/b);if(d.preventDefault)d.preventDefault();else return!1}}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};
(r=>{r.GLUtility=function(p){let m,b;this.getGLContext=()=>{!b&&(b=m.getContext("webgl",{antialias:!0}))&&(b.enable(b.DEPTH_TEST),b.depthFunc(b.LESS));return b};this.clearColor=(c,a,e,h)=>{b.clearColor(c,a,e,h)};this.clear=()=>{b.clear(b.COLOR_BUFFER_BIT)};this.compileShader=(c,a)=>{a=b.createShader(a);b.shaderSource(a,c);b.compileShader(a);if(!b.getShaderParameter(a,b.COMPILE_STATUS))throw`Shader compile failed with:${b.getShaderInfoLog(a)}`;return a};this.createProgram=function(c,a,e){const h=b.createProgram();
c=this.compileShader(c,b.VERTEX_SHADER);a=this.compileShader(a,b.FRAGMENT_SHADER);b.attachShader(h,c);b.attachShader(h,a);e&&b.transformFeedbackVaryings(h,e,b.SEPARATE_ATTRIBS);b.linkProgram(h);return h};this.loadData=(c,a)=>{b.bindBuffer(b.ARRAY_BUFFER,c);b.bufferData(b.ARRAY_BUFFER,a,b.STATIC_DRAW)};this.createBuffer=function(c){const a=b.createBuffer();this.loadData(a,c);return a};this.loadIndices=(c,a)=>{b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c);b.bufferData(b.ELEMENT_ARRAY_BUFFER,a,b.STATIC_DRAW)};
this.createIndexBuffer=function(c){const a=b.createBuffer();this.loadIndices(a,c);return a};this.getAttribLocation=(c,a)=>{c=b.getAttribLocation(c,a);-1===c&&alert(`Can not find attribute ${a}.`);return c};this.bindBuffer=(c,a,e,h,k,d)=>{b.bindBuffer(b.ARRAY_BUFFER,c);b.enableVertexAttribArray(a);b.vertexAttribPointer(a,e,h,!1,k,d)};this.loadTexture=function(c,a,e){const h=b.createTexture(),k=new Image;k.onload=()=>{this.onTextureLoaded(k,h,a,e)};k.src=c;return h};this.onTextureLoaded=(c,a,e,h)=>
{b.activeTexture(b.TEXTURE0+e);b.bindTexture(b.TEXTURE_2D,a);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,c);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR_MIPMAP_NEAREST);b.generateMipmap(b.TEXTURE_2D);h()};this.bindTexture=(c,a,e,h)=>{b.activeTexture(b.TEXTURE0+e);b.bindTexture(b.TEXTURE_2D,a);b.uniform1i(h,e)};this.generateModelViewMatrix=c=>new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,c,0,0,1]);this.generatePerspectiveMatrix=
(c,a,e,h)=>new Float32Array([e/c,0,0,0,0,e/a,0,0,0,0,-(h+e)/(h-e),-1,0,0,-2*h*e/(h-e),0]);this.generateOrthographicMatrix=(c,a,e,h)=>new Float32Array([1/c,0,0,0,0,1/a,0,0,0,0,-2/(h-e),0,0,0,-(h+e)/(h-e),1]);this.getUniformLocation=(c,a)=>{c=b.getUniformLocation(c,a);-1===c&&alert(`Can not find uniform${a}.`);return c};this.loadUniform3f=(c,a,e,h,k,d)=>{a=c.getUniformLocation(a,e);-1===a?alert(`Can not find uniform${e}.`):c.uniform3f(a,h,k,d)};this.loadUniform4f=(c,a,e,h,k,d)=>{c=b.getUniformLocation(c,
a);-1===c?alert(`Can not find uniform${a}.`):b.uniform4f(c,e,h,k,d)};this.loadUniformMatrix3fv=(c,a,e)=>{c=b.getUniformLocation(c,a);-1===c?alert(`Can not find uniform${a}.`):b.uniformMatrix3fv(c,!1,e)};this.loadUniformMatrix4fv=(c,a,e)=>{c=b.getUniformLocation(c,a);-1===c?alert(`Can not find uniform${a}.`):b.uniformMatrix4fv(c,!1,e)};this.getXYRotationMatrix=(c,a)=>{const e=Math.cos(c),h=Math.cos(a);c=Math.sin(c);a=Math.sin(a);return[h,c*a-e*a,0,0,e,c,0,a,-h*c,e*h,0,0,0,0,1]};this.rotateBy=(c,a,
e)=>{let h,k;const d=Math.cos(a),f=Math.cos(e);a=Math.sin(a);const l=Math.sin(e),g=a*l,t=f*a,n=d*l,q=d*f;e=c[0];h=c[1];k=c[2];c[0]=e*f+k*l;c[1]=e*g+h*d-k*t;c[2]=-e*n+h*a+k*q;e=c[4];h=c[5];k=c[6];c[4]=e*f+k*l;c[5]=e*g+h*d-k*t;c[6]=-e*n+h*a+k*q;e=c[8];h=c[9];k=c[10];c[8]=e*f+k*l;c[9]=e*g+h*d-k*t;c[10]=-e*n+h*a+k*q;e=c[12];h=c[13];k=c[14];c[12]=e*f+k*l;c[13]=e*g+h*d-k*t;c[14]=-e*n+h*a+k*q};this.extractRotationPart=(c,a)=>{a.set(c.subarray(0,3));a.set(c.subarray(4,7),3);a.set(c.subarray(8,11),6);return a};
m=p;b=this.getGLContext()}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};(function(r){r.Color=function(p,m,b,c){var a,e,h,k;this.setRed=function(d){a=d;return this};this.getRed=function(){return a};this.setGreen=function(d){e=d;return this};this.getGreen=function(){return e};this.setBlue=function(d){h=d;return this};this.getBlue=function(){return h};this.setAlpha=function(d){k=d;return this};this.getAlpha=function(){return k};this.setRed(p).setGreen(m).setBlue(b).setAlpha(c)}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.geometry=window.vizit.geometry||{};
(function(r){r.Surface=function(p,m){var b=m;var c=p;var a=new Float32Array(3*p);var e=new Uint16Array(m);var h=new Float32Array(3*p);this.setNindices=function(k){b=k};this.getNindices=function(){return b};this.setNvertices=function(k){c=k};this.getNvertices=function(){return c};this.setVerticies=function(k){a=k};this.getVertices=function(){return a};this.setIndices=function(k){e=k};this.getIndices=function(){return e};this.setNormals=function(k){h=k};this.getNormals=function(){return h}};r.Shapes=
{SPHERE:{value:"sphere"},SQUARE:{value:"square"},CYLINDER:{value:"cylinder"},LINE_SEGMENT:{value:"line segment"}};r.VertexRegistry=function(){var p={};this.registerVertices=function(m,b){if(p.hasOwnProperty(m))throw"Vertex buffers already registered for "+m+".";p[m]=b};this.hasVertices=function(m){return p.hasOwnProperty(m)};this.retrieveVertices=function(m){return p[m]}};r.vertexRegistry=new r.VertexRegistry;r.Square=function(){var p=r.Shapes.SQUARE;var m=[-.5,.5,0,.5,.5,0,.5,-.5,0,-.5,-.5,0];var b=
[0,0,1];this.getNindices=function(){return 6};this.computeGeometry=function(c,a){var e=c.getVertices();var h=c.getNormals();var k=c.getIndices();for(var d=0;12>d;d++)e[d]=a[d],h[d]=b[d%3];k[0]=0;k[1]=3;k[2]=1;k[3]=3;k[4]=2;k[5]=1;c.setNvertices(12);c.setNindices(6)};this.getVertexBuffers=function(c){if(this.hasVertices(p.value))var a=this.retrieveVertices(p.value);else{var e=new r.Surface(4,6);a={};this.computeGeometry(e,m);a.vertices=c.createBuffer(e.getVertices());a.normals=c.createBuffer(e.getNormals());
a.indices=c.createIndexBuffer(e.getIndices());this.registerVertices(p.value,a)}return a}};r.Square.prototype=r.vertexRegistry;r.LineSegment=function(){const p=r.Shapes.LINE_SEGMENT;this.getBaseHeight=function(){return 1};this.getBaseHalfWidth=function(){return.5};this.getShape=function(){return p}};r.Cylinder=function(){var p=r.Shapes.CYLINDER;this.getBaseHeight=function(){return 1};this.getBaseRadius=function(){return 1};this.getShape=function(){return p};this.getNindices=function(){return 126};
this.computeGeometry=function(m){var b;var c=m.getVertices();var a=m.getNormals();var e=m.getIndices();c[0]=0;a[0]=0;c[1]=0;a[1]=0;c[2]=.5;a[2]=1;e[0]=0;var h=94;e[h]=h;h*=3;c[h]=0;a[h++]=0;c[h]=0;a[h++]=0;c[h]=-.5;a[h]=-1;for(b=1;31>=b;b++){h=2*(b-1)*Math.PI/30;e[b]=b;var k=3*b;c[k]=1*Math.cos(h);a[k++]=0;c[k]=1*Math.sin(h);a[k++]=0;c[k]=.5;a[k]=1}for(b=1;31>=b;b++)k=3*b,h=b+90+4,e[h]=h,h*=3,c[h]=c[k++],a[h++]=0,c[h]=c[k],a[h++]=0,c[h]=-.5,a[h]=-1;k=3;h=285;var d=96;for(b=0;30>=b;b++)e[d/3]=d/3,
c[d]=c[k],a[d++]=c[k++]/1,c[d]=c[k],a[d++]=c[k++]/1,c[d]=c[k],a[d++]=c[k++]/1,e[d/3]=d/3,c[d]=c[h],a[d++]=c[h++]/1,c[d]=c[h],a[d++]=c[h++]/1,c[d]=c[h],a[d++]=c[h++]/1;m.setNvertices(378);m.setNindices(126)};this.getVertexBuffers=function(m){if(this.hasVertices(p.value))var b=this.retrieveVertices(p.value);else{var c=new r.Surface(126,126);b={};this.computeGeometry(c);b.vertices=m.createBuffer(c.getVertices());b.normals=m.createBuffer(c.getNormals());b.indices=m.createIndexBuffer(c.getIndices());this.registerVertices(p.value,
b)}return b}};r.Cylinder.prototype=r.vertexRegistry;r.Sphere=function(){var p=r.Shapes.SPHERE;this.getIntrinsicRadius=function(){return 30};this.getShape=function(){return p};this.getNindices=function(){return 5400};this.computeGeometry=function(m,b,c,a){var e,h;var k=m.getVertices();var d=h=0;var f=m.getNormals();for(e=0;e<=c;e++){var l=e*Math.PI/c;var g=Math.sin(l);var t=Math.cos(l);for(l=0;l<=a;l++){var n=2*l*Math.PI/a;var q=Math.sin(n);n=Math.cos(n);q*=g;var v=t;n*=g;f[d]=q;k[d++]=b*q;f[d]=v;
k[d++]=b*v;f[d]=n;k[d++]=b*n}}m.setNvertices(--d);f=m.getIndices();for(e=0;e<c;e++)for(l=0;l<a;l++)b=e*(a+1)+l,d=b+a+1,f[h++]=b,f[h++]=d,f[h++]=b+1,f[h++]=d,f[h++]=d+1,f[h++]=b+1;m.setNindices(--h)};this.getVertexBuffers=function(m){if(this.hasVertices(p.value))var b=this.retrieveVertices(p.value);else{var c=new r.Surface(961,5400);b={};this.computeGeometry(c,30,30,30);b.vertices=m.createBuffer(c.getVertices());b.normals=m.createBuffer(c.getNormals());b.indices=m.createIndexBuffer(c.getIndices());
this.registerVertices(p.value,b)}return b}};r.Sphere.prototype=r.vertexRegistry})(window.vizit.geometry);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(r){r.SurfaceRenderer=function(p){var m,b,c,a,e,h,k,d,f,l;this.createProgram=function(q){q=g.createProgram("attribute vec3 normal;attribute vec3 position;uniform   vec3 ambientLighting;uniform   vec3 directionalLighting;uniform   vec3 directionalColor;uniform   mat4 modelViewMatrix;uniform   mat4 globalModelViewMatrix;uniform   mat3 normalMatrix;uniform   mat4 projectionMatrix;varying   vec3 lighting;void main(void){  gl_Position = projectionMatrix * globalModelViewMatrix * modelViewMatrix * vec4(position, 1.0);  vec3  transformedNormal         = normalMatrix * normal;  float directionalLightWeighting = max(dot(transformedNormal, directionalLighting), 0.0);  lighting                        = ambientLighting + directionalColor * directionalLightWeighting;}","precision mediump float;uniform vec4 surfaceColor;varying vec3 lighting;void main(void){  gl_FragColor = vec4(surfaceColor.rgb * lighting, surfaceColor.a);}");
m=g.getUniformLocation(q,"ambientLighting");b=g.getUniformLocation(q,"directionalLighting");c=g.getUniformLocation(q,"directionalColor");e=g.getUniformLocation(q,"modelViewMatrix");a=g.getUniformLocation(q,"globalModelViewMatrix");h=g.getAttribLocation(q,"normal");k=g.getUniformLocation(q,"normalMatrix");d=g.getAttribLocation(q,"position");f=g.getUniformLocation(q,"projectionMatrix");l=g.getUniformLocation(q,"surfaceColor");return q};this.getAmbientLightingHandle=function(){return m};this.getDirectionalLightingHandle=
function(){return b};this.getDirectionalColorHandle=function(){return c};this.getModelViewMatrixHandle=function(){return e};this.getGlobalModelViewMatrixHandle=function(){return a};this.getNormalHandle=function(){return h};this.getNormalMatrixHandle=function(){return k};this.getPositionHandle=function(){return d};this.getProjectionMatrixHandle=function(){return f};this.getSurfaceColorHandle=function(){return l};this.render=function(q,v,A,x){var w=x.length;if(0<w)for(t.useProgram(n),t.uniformMatrix4fv(a,
!1,v),t.uniformMatrix3fv(k,!1,A),t.uniformMatrix4fv(f,!1,q),t.uniform3f(m,.3,.3,.3),t.uniform3f(b,1,1,1),t.uniform3f(c,.4,.4,.4),q=0;q<w;q++)x[q].render(g,this)};var g=p;var t=g.getGLContext();var n=this.createProgram()}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};(function(r){r.IndexedVertices=function(p,m){let b,c;this.getNindices=function(){return b};this.getNvertices=function(){return c};this.getVertices=function(){return a};this.push=function(h){a[c++]=h};this.getIndices=function(){return e};this.pushIndex=function(h){e[b++]=h};this.reset=function(){c=b=0};const a=new Float32Array(p),e=new Uint16Array(m);this.reset()}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};(function(r){r.VectorFunction=function(p,m){var b;this.setModified=function(a){c=a};this.isModified=function(){return c};this.setName=function(a){b=a};this.getName=function(){return b};this.shouldStop=function(a,e,h,k){return 0>a*Q&&4>r2};this.getField=new Function(p,m);var c=!0}})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};
(function(r){r.CombinedVectorFunctions=function(){var p;this.addFunction=function(a){b=c.push(a);return this};for(var m=0;m<arguments.length;m++)this.addFunction(arguments[m]);this.getNfunctions=function(){return b};this.getFunctions=function(){return c};this.isModified=function(){var a=!1;for(m=0;m<b&&!a;m++)a=a||c[m].isModified();return a};this.setModified=function(a){for(m=0;m<b;m++)c[m].setModified(a)};this.setStartPoints=function(a){p=a};this.getStartPoints=function(){return p};this.getField=
function(a,e,h){for(var k,d=[0,0,0],f=0;f<b;f++)k=c[f].getField(a,e,h),d[0]+=k[0],d[1]+=k[1],d[2]+=k[2];return d};this.shouldStop=function(a,e,h,k){for(a=0;a<b;a++);return!1};var b=0;var c=[]}})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};
(function(r){r.LineRenderer=function(p){this.createProgram=function(){const a=m.createProgram("attribute vec3  current;attribute vec3  other;attribute float normalDisplacement;attribute float parallelDisplacement;uniform   vec2  resolution;uniform   mat4  modelViewMatrix;uniform   mat4  projectionMatrix;void main(){  mat4 projModelView    = projectionMatrix * modelViewMatrix;  vec4 currentProjected = projModelView * vec4(current, 1.0);  vec4 otherProjected   = projModelView * vec4(other, 1.0);  vec2 currentScreen    = currentProjected.xy / currentProjected.w;  vec2 otherScreen      = otherProjected.xy / otherProjected.w;  vec2 dir              = otherScreen - currentScreen;  dir                   = (dir == vec2(0.0, 0.0) ? dir : normalize(dir));  vec2 normal           = vec2(-dir.y, dir.x);  vec4 offset = vec4(normal*normalDisplacement, 0.0, 0.0);  offset     +=  vec4(dir * parallelDisplacement, 0.0, 0.0);  offset.xy  /= resolution * currentProjected.w;  gl_Position = currentProjected + offset;}","precision mediump float;uniform   vec4 color;void main(){    gl_FragColor = color;}"),
e=m.getAttribLocation(a,"current"),h=m.getAttribLocation(a,"other"),k=m.getAttribLocation(a,"normalDisplacement"),d=m.getAttribLocation(a,"parallelDisplacement"),f=m.getUniformLocation(a,"resolution"),l=m.getUniformLocation(a,"color"),g=m.getUniformLocation(a,"modelViewMatrix"),t=m.getUniformLocation(a,"projectionMatrix");return{program:a,currentHandle:e,otherHandle:h,normalDisplacementHandle:k,parallelDisplacementHandle:d,resolutionHandle:f,colorHandle:l,modelViewMatrixHandle:g,projectionMatrixHandle:t}};
this.drawIndexedLines=function(a,e,h,k){const d=new Float32Array(2);d[0]=b.drawingBufferWidth;d[1]=b.drawingBufferHeight;const f=r.LineRenderer.FLOATS_PER_LOCATION,l=r.LineRenderer.FLOATS_PER_OFFSET,g=r.LineRenderer.FLOATS_PER_VERTEX*Float32Array.BYTES_PER_ELEMENT;b.useProgram(c.program);b.uniform4fv(c.colorHandle,h);b.uniformMatrix4fv(c.modelViewMatrixHandle,!1,e);b.uniformMatrix4fv(c.projectionMatrixHandle,!1,a);b.uniform2fv(c.resolutionHandle,d);e=k.length;for(h=0;h<e;h++)a=k[h],m.bindBuffer(a.vertices,
c.currentHandle,f,b.FLOAT,g,0),m.bindBuffer(a.vertices,c.otherHandle,f,b.FLOAT,g,f*Float32Array.BYTES_PER_ELEMENT),m.bindBuffer(a.vertices,c.normalDisplacementHandle,l,b.FLOAT,g,2*f*Float32Array.BYTES_PER_ELEMENT),m.bindBuffer(a.vertices,c.parallelDisplacementHandle,l,b.FLOAT,g,2*f*Float32Array.BYTES_PER_ELEMENT+l*Float32Array.BYTES_PER_ELEMENT),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a.indices),b.drawElements(b.TRIANGLES,a.nindices,b.UNSIGNED_SHORT,0)};const m=p,b=m.getGLContext(),c=this.createProgram()};
r.LineRenderer.FLOATS_PER_LOCATION=3;r.LineRenderer.LOCATIONS_PER_VERTEX=2;r.LineRenderer.FLOATS_PER_OFFSET=1;r.LineRenderer.OFFSETS_PER_VERTEX=2;r.LineRenderer.FLOATS_PER_VERTEX=r.LineRenderer.LOCATIONS_PER_VERTEX*r.LineRenderer.FLOATS_PER_LOCATION+r.LineRenderer.OFFSETS_PER_VERTEX*r.LineRenderer.FLOATS_PER_OFFSET;r.LineRenderer.VERTICES_PER_SEGMENT=4;r.LineRenderer.FLOATS_PER_SEGMENT=r.LineRenderer.VERTICES_PER_SEGMENT*r.LineRenderer.FLOATS_PER_VERTEX;r.LineRenderer.VERTICES_PER_ARROW=8})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};
(function(r){r.SimpleVectorField=function(p,m){this.setLineWidth=function(g){k.setLineWidth(g);return this};this.getLineWidth=function(){k.getLineWidth()};this.setArrowHeadWidth=function(g){k.setArrowHeadWidth(g);return this};this.getArrowHeadWidth=function(){return k.getArrowHeadWidth()};this.setArrowHeadSize=function(g){k.setArrowHeadSize(g);return this};this.getArrowHeadSize=function(){return k.getArrowHeadSize()};this.setArrowSize=function(g){k.setArrowSize(g);return this};this.getArrowSize=function(){return k.getArrowSize()};
this.setColor=function(g){b=g;return this};this.getColor=function(){return b};this.getGlUtility=function(){return h};this.setMaxVectors=function(g){k.setMaxVectors(g);return this};this.getMaxVectors=function(){return k.getMaxVectors()};this.setModelViewMatrix=function(g){f=g;return this};this.getModelViewMatrix=function(){return f};this.setProjectionMatrix=function(g){l=g;return this};this.setStartPoints=function(g){k.setStartPoints(g);return this};this.addStartPoints=function(g){k.addStartPoints(g);
return this};this.getStartPoints=function(){return k.getStartPoints()};this.setupVectorField=function(){let g,t=[];g={};if("function"===typeof a.getStartPoints){var n=a.getStartPoints(0,2);"undefined"!==typeof n&&0<n.length&&k.addStartPoints(n)}n=k.generateField();g.vertices=h.createBuffer(n.getVertices());g.indices=h.createIndexBuffer(n.getIndices());g.nindices=n.getNindices();t[0]=g;return t};this.render=function(){c&&(a.isModified()&&(e=this.setupVectorField()),h.clear(),d.drawIndexedLines(l,f,
b,e),a.setModified(!1))};this.start=function(){c=!0;this.render()};let b=new Float32Array([.8,.3,.3,1]),c=!1;const a=m;let e;const h=p.getGlUtility(),k=new vizit.vectorfield.VectorFieldGenerator(a),d=new vizit.vectorfield.LineRenderer(h);h.clearColor(0,0,0,0);let f=p.getModelViewMatrix(),l=p.getProjectionMartix();p.registerRenderer(this)}})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};(function(r){r.CountdownLatch=function(p,m){var b=p;this.countDown=function(){b--;0>=b&&m()}}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(r){r.ChargeGenerator=function(p){var m,b,c;this.setCharges=function(f){m=f;if(!b||a*m.getCharges().length>b.byteLength)b=new ArrayBuffer(a*m.getCharges().length)};this.getCharges=function(){return m};this.getChargesArray=function(){return b};this.getNcharges=function(){return c};this.generate=function(){var f=m.getCharges();c=f.length;var l=new Float32Array(b);var g=new Uint8Array(b);for(var t=0;t<c;t++){var n=f[t];var q=n.getPosition();var v=5*t;l[v++]=q[0];l[v++]=q[1];l[v++]=q[2];l[v++]=
e;v=16+20*t;n=0<n.getCharge()?k:0>n.getCharge()?h:d;g[v++]=n[0];g[v++]=n[1];g[v++]=n[2];g[v++]=n[3]}return b};var a=3*Float32Array.BYTES_PER_ELEMENT+Float32Array.BYTES_PER_ELEMENT+4*Uint8Array.BYTES_PER_ELEMENT;var e=16;var h=[204,13,13,255];var k=[13,13,204,255];var d=[13,13,13,51]}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(r){r.ChargeRenderer=function(p){this.createProgram=function(){const a=m.createProgram("precision highp float;attribute vec3  position;attribute vec4  color;attribute float size;uniform   mat4  modelViewMatrix;uniform   mat4  projectionMatrix;varying vec4 vColor;void main(){    gl_Position  = projectionMatrix * modelViewMatrix * vec4(position, 1);    gl_PointSize = size;    vColor       = color;}","precision mediump float;varying vec4 vColor;uniform   vec3 ambientLighting;uniform   vec3 directionalLighting; void main() {   vec2  position  = gl_PointCoord - vec2(0.5,0.5);   if ( length(position) > 0.5 )     discard;   float z         = sqrt(0.5*0.5 - position.x*position.x - position.y*position.y);   vec3  normal    = normalize(vec3(position, z));   float specular  = dot(normal, directionalLighting);   specular        = specular  <= 0.0 ? 0.0 : pow(specular , 15.0);   gl_FragColor    = vec4(vColor.rgb * ambientLighting + vColor.rgb*specular, vColor.a); }"),e=
m.getAttribLocation(a,"color"),h=m.getAttribLocation(a,"position"),k=m.getAttribLocation(a,"size"),d=m.getUniformLocation(a,"ambientLighting"),f=m.getUniformLocation(a,"directionalLighting"),l=m.getUniformLocation(a,"modelViewMatrix"),g=m.getUniformLocation(a,"projectionMatrix");return{program:a,colorHandle:e,positionHandle:h,sizeHandle:k,ambientLightingHandle:d,directionalLightingHandle:f,modelViewMatrixHandle:l,projectionMatrixHandle:g}};this.render=function(a,e,h,k){k=k.getNcharges();0<k&&(b.useProgram(c.program),
b.uniformMatrix4fv(c.modelViewMatrixHandle,!1,e),b.uniformMatrix4fv(c.projectionMatrixHandle,!1,a),b.uniform3f(c.ambientLightingHandle,.8,.8,.8),b.uniform3f(c.directionalLightingHandle,.65,.55,.8),b.bindBuffer(b.ARRAY_BUFFER,h),b.enableVertexAttribArray(c.colorHandle),b.enableVertexAttribArray(c.positionHandle),b.enableVertexAttribArray(c.sizeHandle),b.vertexAttribPointer(c.positionHandle,3,b.FLOAT,!1,20,0),b.vertexAttribPointer(c.sizeHandle,1,b.FLOAT,!1,20,12),b.vertexAttribPointer(c.colorHandle,
4,b.UNSIGNED_BYTE,!0,20,16),b.drawArrays(b.POINTS,0,k))};var m=p;var b=m.getGLContext();var c=this.createProgram()}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(r){r.FieldLineVBO=function(p,m){this.disable=function(){this.enabled=!1};this.isEnabled=function(){return this.enabled};this.reload=function(b,c){b.loadData(this.fieldLineBufferHandle,c.getPoints());this.npoints=c.getNpoints();c=c.getArrows();b.loadData(this.fieldDirectionBufferHandle,c.vertices);b.loadIndices(this.fieldDirectionIndices,c.indices);this.narrows=c.narrows;this.enabled=!0};this.fieldLineBufferHandle=p.createBuffer(m.getPoints());this.npoints=m.getNpoints();m=m.getArrows();
this.fieldDirectionBufferHandle=p.createBuffer(m.vertices);this.narrows=m.narrows;this.fieldDirectionIndices=p.createIndexBuffer(m.indices);this.enabled=!0}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(r){r.FieldLine=function(p){function m(n,q,v,A,x,w,y){l[g++]=n;l[g++]=q;l[g++]=v;l[g++]=A;l[g++]=x;l[g++]=w;l[g++]=y}function b(n,q,v){h[e++]=n.x;h[e++]=n.y;h[e++]=n.z;h[e++]=q.x;h[e++]=q.y;h[e++]=q.z;h[e++]=v}let c,a,e,h,k,d,f,l,g,t;this.setMaxPoints=function(n){n!==k&&(k=n,l=new Float32Array(r.FieldLine.FLOATS_PER_SEGMENT*(k-1)),h=new Float32Array(k),c=new Uint16Array(k),this.reset());return this};this.getMaxPoints=function(){return k};this.pushPoint=function(n,q,v){0<f&&(m(t.x,t.y,t.z,
n,q,v,1),m(t.x,t.y,t.z,n,q,v,-1),m(n,q,v,t.x,t.y,t.z,-1),m(n,q,v,t.x,t.y,t.z,1));t={x:n,y:q,z:v};f++};this.getPoints=function(){return l};this.getNpoints=function(){return f};this.pushArrow=function(n,q){b(n,q,1);b(n,q,0);b(q,q,0);b(n,q,-1);n=d*r.FieldLine.VERTICES_PER_ARROW;c[a++]=n;c[a++]=n+1;c[a++]=n+2;c[a++]=n+2;c[a++]=n+1;c[a++]=n+3;d++};this.getArrows=function(){return{vertices:h.slice(0,vizit.electricfield.FieldLine.VERTICES_PER_ARROW*vizit.electricfield.FieldLine.FLOATS_PER_VERTEX*d),indices:c.slice(0,
vizit.electricfield.FieldLine.INDICES_PER_ARROW*d),narrows:d}};this.getNarrows=function(){return d};this.reset=function(){g=f=d=e=a=0};this.setMaxPoints(p)};r.FieldLine.FLOATS_PER_LOCATION=3;r.FieldLine.LOCATIONS_PER_VERTEX=2;r.FieldLine.FLOATS_PER_DIRECTION=1;r.FieldLine.FLOATS_PER_VERTEX=r.FieldLine.LOCATIONS_PER_VERTEX*r.FieldLine.FLOATS_PER_LOCATION+r.FieldLine.FLOATS_PER_DIRECTION;r.FieldLine.VERTICES_PER_SEGMENT=4;r.FieldLine.FLOATS_PER_SEGMENT=r.FieldLine.VERTICES_PER_SEGMENT*r.FieldLine.FLOATS_PER_VERTEX;
r.FieldLine.VERTICES_PER_ARROW=4;r.FieldLine.INDICES_PER_ARROW=6})(window.vizit.electricfield);/*
 Apache-2.0
 Copyright 2013-2021 Vizit Solutions

    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
*/
window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(r){r.FieldLineGenerator=function(p,m){let b,c,a,e,h,k,d;this.setCharges=function(f){h=f;return this};this.getCharges=function(){return h};this.getArrows=function(){return arrows};this.setMaxPoints=function(f){f>maxpoints&&(k=new vizit.electricfield.FieldLine(d));d=f;return this};this.getMaxPoints=function(){return d};this.setArrowLength=function(f){b=f;return this};this.getArrowLength=function(){return b};this.setArrowWidth=function(f){c=f;return this};this.getArrowWidth=function(){return c};
this.setArrowSpacing=function(f){a=f;return this};this.getArrowSpacing=function(){return a};this.setDs=function(f){e=f;return this};this.getDs=function(){return e};this.drawArrow=function(f,l,g,t,n,q,v){v.pushArrow({x:f-q*t[0]/n,y:l-q*t[1]/n,z:g-q*t[2]/n},{x:f,y:l,z:g})};this.generate=function(f,l,g,t){var n=0;var q=!1;var v=g;k.reset();for(g=0;g<d&&!q;g++){k.pushPoint(f,l,v);var A=h.getField(f,l,v);q=Math.sqrt(A[0]*A[0]+A[1]*A[1]+A[2]*A[2]);if(0===q)break;f+=t*A[0]/q*e;l+=t*A[1]/q*e;v+=t*A[2]/q*
e;n+=e;n>a&&(n=0,this.drawArrow(f,l,v,A,q,b,k));q=h.shouldStop(t,f,l,v)}return k};b=r.FieldLineGenerator.DEFAULT_ARROW_LENGTH;a=r.FieldLineGenerator.DEFAULT_ARROW_SPACING;e=m;d=p;k=new vizit.electricfield.FieldLine(d)};r.FieldLineGenerator.DEFAULT_ARROW_LENGTH=4;r.FieldLineGenerator.DEFAULT_ARROW_SPACING=24})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(r){r.FieldLineRenderer=function(p){let m=r.FieldLineRenderer.DEFAULT_LINE_WIDTH,b=r.FieldLineRenderer.DEFAULT_ARROW_WIDTH;this.setLineWidth=function(k){m=k;return this};this.getLineWidth=function(){return m};this.setArrowWidth=function(k){b=k;return this};this.getArrowWidth=function(){return b};this.createProgram=function(k){const d=k.createProgram("attribute vec3  current;attribute vec3  other;attribute float direction;uniform   float aspect;uniform   float halfWidth;uniform   mat4  modelViewMatrix;uniform   mat4  projectionMatrix;void main(){  mat4 projModelView    = projectionMatrix * modelViewMatrix;  vec4 currentProjected = projModelView * vec4(current, 1.0);  vec4 otherProjected   = projModelView * vec4(other, 1.0);  vec2 currentScreen    = currentProjected.xy / currentProjected.w;  currentScreen.x      *= aspect;  vec2 otherScreen      = otherProjected.xy / otherProjected.w;  otherScreen.x        *= aspect;  vec2 dir              = normalize(currentScreen - otherScreen);  vec2 normal           = vec2(-dir.y, dir.x);  normal               *= halfWidth;  normal.x             /= aspect;  vec4 offset = vec4(normal * direction, 0.0, 0.0);  gl_Position = currentProjected + offset;}","precision mediump float;void main(){  gl_FragColor = vec4(0.8,0.3,0.3,1.0);}"),
f=k.getAttribLocation(d,"current"),l=k.getAttribLocation(d,"direction"),g=k.getAttribLocation(d,"other"),t=k.getUniformLocation(d,"aspect"),n=k.getUniformLocation(d,"halfWidth"),q=k.getUniformLocation(d,"modelViewMatrix");k=k.getUniformLocation(d,"projectionMatrix");return{program:d,currentHandle:f,directionHandle:l,otherHandle:g,aspectHandle:t,halfWidthHandle:n,modelViewMatrixHandle:q,projectionMatrixHandle:k}};this.createArrowProgram=function(k){const d=k.createProgram("attribute vec3  current;attribute vec3  tip;attribute float direction;uniform   float aspect;uniform   float halfWidth;uniform   mat4  modelViewMatrix;uniform   mat4  projectionMatrix;void main(){  mat4 projModelView    = projectionMatrix * modelViewMatrix;  vec4 currentProjected = projModelView * vec4(current, 1.0);  vec4 tipProjected   =   projModelView * vec4(tip, 1.0);  vec2 currentScreen    = currentProjected.xy / currentProjected.w;  currentScreen.x      *= aspect;  vec2 tipScreen        = tipProjected.xy / tipProjected.w;  tipScreen.x          *= aspect;  vec2 dir              = currentScreen - tipScreen;  vec2 normal           = (dir == vec2(0.0, 0.0) ? vec2(0.0, 0.0) : normalize(vec2(-dir.y, dir.x)));  normal               *= halfWidth;  normal.x             /= aspect;  vec4 offset = (direction == 0.0 ?                             vec4(0.0, 0.0, 0.0, 0.0) :                              vec4((normal * direction / currentProjected.w) + dir/3.0, 0.0, 0.0));  gl_Position = currentProjected + offset;}",
"precision mediump float;void main(){  gl_FragColor = vec4(0.8,0.3,0.3,1.0);}"),f=k.getAttribLocation(d,"current"),l=k.getAttribLocation(d,"direction"),g=k.getAttribLocation(d,"tip"),t=k.getUniformLocation(d,"aspect"),n=k.getUniformLocation(d,"halfWidth"),q=k.getUniformLocation(d,"modelViewMatrix");k=k.getUniformLocation(d,"projectionMatrix");return{program:d,currentHandle:f,directionHandle:l,tipHandle:g,aspectHandle:t,halfWidthHandle:n,modelViewMatrixHandle:q,projectionMatrixHandle:k}};this.render=
function(k,d,f,l){const g=a.drawingBufferWidth/a.drawingBufferHeight,t=vizit.electricfield.FieldLine.FLOATS_PER_LOCATION,n=l.length,q=vizit.electricfield.FieldLine.FLOATS_PER_VERTEX*Float32Array.BYTES_PER_ELEMENT;if(0<n){a.useProgram(e.program);a.uniformMatrix4fv(e.modelViewMatrixHandle,!1,d);a.uniformMatrix4fv(e.projectionMatrixHandle,!1,k);a.uniform1f(e.aspectHandle,g);a.uniform1f(e.halfWidthHandle,m/a.drawingBufferHeight);for(var v=0;v<n;v++){f=l[v];if(!f.isEnabled())break;c.bindBuffer(f.fieldLineBufferHandle,
e.currentHandle,t,a.FLOAT,q,0);c.bindBuffer(f.fieldLineBufferHandle,e.otherHandle,t,a.FLOAT,q,t*Float32Array.BYTES_PER_ELEMENT);c.bindBuffer(f.fieldLineBufferHandle,e.directionHandle,1,a.FLOAT,q,2*t*Float32Array.BYTES_PER_ELEMENT);a.drawArrays(a.TRIANGLE_STRIP,0,4*(f.npoints-1))}a.useProgram(h.program);a.enableVertexAttribArray(h.tipHandle);a.enableVertexAttribArray(h.directionHandle);a.uniformMatrix4fv(h.modelViewMatrixHandle,!1,d);a.uniformMatrix4fv(h.projectionMatrixHandle,!1,k);a.uniform1f(h.aspectHandle,
g);a.uniform1f(h.halfWidthHandle,b/2/a.drawingBufferHeight);for(k=0;k<n;k++){f=l[k];if(!f.isEnabled())break;c.bindBuffer(f.fieldDirectionBufferHandle,h.currentHandle,t,a.FLOAT,q,0);c.bindBuffer(f.fieldDirectionBufferHandle,h.tipHandle,t,a.FLOAT,q,t*Float32Array.BYTES_PER_ELEMENT);c.bindBuffer(f.fieldDirectionBufferHandle,h.directionHandle,1,a.FLOAT,q,2*t*Float32Array.BYTES_PER_ELEMENT);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,f.fieldDirectionIndices);a.drawElements(a.TRIANGLES,6*f.narrows,a.UNSIGNED_SHORT,
0)}}};const c=p,a=c.getGLContext(),e=this.createProgram(c),h=this.createArrowProgram(c)};r.FieldLineRenderer.DEFAULT_LINE_WIDTH=3;r.FieldLineRenderer.DEFAULT_ARROW_WIDTH=5*r.FieldLineRenderer.DEFAULT_LINE_WIDTH})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};
(r=>{r.Cylinder=function(){let p,m;this.setColor=b=>{m=b};this.getColor=()=>m;this.getCylinderModelView=(b,c,a,e,h,k,d)=>{const f=Math.sin(d);d=Math.cos(d);const l=Math.sin(k);k=Math.cos(k);const g=new Float32Array(16);g[0]=h*k*d;g[1]=h*d*l;g[2]=-h*f;g[3]=0;g[4]=-h*l;g[5]=h*k;g[6]=0;g[7]=0;g[8]=e*k*f;g[9]=e*l*f;g[10]=e*d;g[11]=0;g[12]=b;g[13]=c;g[14]=a;g[15]=1;return g};this.transformPoints=(b,c,a,e)=>{let h,k,d;p[0]=b[0]*a;p[1]=b[1]*a;p[2]=b[2]*a;p[3]=b[3];p[4]=b[4]*a;p[5]=b[5]*a;p[6]=b[6]*a;p[7]=
b[7];p[8]=b[8]*c;p[9]=b[9]*c;p[10]=b[10]*c;p[11]=b[11];p[12]=b[12];p[13]=b[13];p[14]=b[14];p[15]=b[15];c=0;for(b=e.length;c<b;c++)a=e[c],h=a[0],k=a[1],d=a[2],a[0]=p[0]*h+p[4]*k+p[8]*d+p[12],a[1]=p[1]*h+p[5]*k+p[9]*d+p[13],a[2]=p[2]*h+p[6]*k+p[10]*d+p[14];return e};this.setupBuffers=(b,c,a,e,h)=>{const k=b.getGLContext();b.bindBuffer(a,c.getPositionHandle(),3,k.FLOAT,0,0);b.bindBuffer(e,c.getNormalHandle(),3,k.FLOAT,0,0);k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,h)};this.drawCap=(b,c,a)=>{b.drawElements(b.TRIANGLE_FAN,
c,b.UNSIGNED_SHORT,2*a)};this.drawSide=(b,c,a)=>{b.drawElements(b.TRIANGLE_STRIP,c,b.UNSIGNED_SHORT,2*a)};this.drawCylinder=function(b,c,a,e,h){b=b.getGLContext();b.uniformMatrix4fv(c.getModelViewMatrixHandle(),!1,a);h&&this.drawCap(b,e+2,0);this.drawSide(b,2*e+2,e+2);h&&this.drawCap(b,e+2,3*e+4)};this.fullRender=function(b,c,a,e,h,k,d){const f=b.getGLContext(),l=this.getBaseRadius();var g=this.getVertexBuffers(b);const t=(this.getNindices()-6)/4;f.uniform4f(c.getSurfaceColorHandle(),m.getRed(),m.getGreen(),
m.getBlue(),m.getAlpha());this.setupBuffers(b,c,g.vertices,g.normals,g.indices);p[3]=a[3];p[7]=a[7];p[8]=a[8]*e;p[9]=a[9]*e;p[10]=a[10]*e;p[11]=a[11];p[12]=a[12];p[13]=a[13];p[14]=a[14];p[15]=a[15];f.cullFace(f.FRONT);for(e=k;e>=h;e--)g=e/l,p[0]=a[0]*g,p[1]=a[1]*g,p[2]=a[2]*g,p[4]=a[4]*g,p[5]=a[5]*g,p[6]=a[6]*g,this.drawCylinder(b,c,p,t,d);f.cullFace(f.BACK);for(e=h;e<=k;e++)g=e/l,p[0]=a[0]*g,p[1]=a[1]*g,p[2]=a[2]*g,p[4]=a[4]*g,p[5]=a[5]*g,p[6]=a[6]*g,this.drawCylinder(b,c,p,t,d)};this.translateBounds=
(b,c,a,e,h,k,d)=>{let f,l,g;f=(c+h)/2;l=(a+k)/2;g=(e+d)/2;c-=f;a-=l;e-=g;h-=f;k-=l;d-=g;b.setTx(f).setTy(l).setTz(g).setX0(c).setY0(a).setZ0(e).setX1(h).setY1(k).setZ1(d)};this.sign=b=>0>b?-1:1;this.zAxisRotation=function(b,c,a,e,h){let k;k=Math.atan2(h-a,e-c);c=-this.sign(e)*Math.sqrt(c*c+a*a);a=0;e=-c;h=0;b.setX0(c).setY0(a).setX1(e).setY1(h).setPhi(k)};this.yAxisRotation=function(b,c,a,e,h,k,d){a=Math.sqrt(c*c+a*a+e*e);k=Math.acos(d/a);e=this.sign(d);d=e*a;h=c=0;b.setZ0(-e*a).setZ1(d).setX0(c).setX1(h).setTheta(k)};
this.scale=function(b,c,a){let e;e=this.sign(a);c=a-c;b.setZ0(.5*-e).setZ1(.5*e).setHeight(c)};p=new Float32Array(16)};r.Cylinder.prototype=new vizit.geometry.Cylinder})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(r){r.GaussianCylinder=function(p,m,b,c,a,e,h,k){this.setEnabled=function(y){f=vizit.utility.toBoolean(y)};this.isEnabled=function(){return f};this.setX=function(y){v=y;w[12]=v;return this};this.getX=function(){return v};this.setY=function(y){A=y;w[13]=A;return this};this.getY=function(){return A};this.setZ=function(y){x=y;w[14]=x;return this};this.getZ=function(){return x};this.setOrigin=function(y){this.setX(y[0]);this.setY(y[1]);return this.setZ(y[2])};this.getOrigin=function(){return[v,
A,x]};this.setR=function(y){n=y;return this};this.getR=function(){return n};this.setHeight=function(y){l=y;return this};this.getHeight=function(){return l};this.setTheta=function(y){q=y;return this};this.getTheta=function(){return q};this.setPhi=function(y){t=y;return this};this.getPhi=function(){return t};this.setName=function(y){g=y};this.getName=function(){return g};this.render=function(y,J){f&&this.fullRender(y,J,w,l,n,n,!0)};var d=new vizit.utility.Color(.5,.5,.5,.5);var f=!0;var l=c;var g=k;
var t=e;var n=a;var q=h;var v=p;var A=m;var x=b;this.setColor(d);var w=this.getCylinderModelView(v,A,x,this.getBaseHeight(),this.getBaseRadius(),t,q)};r.GaussianCylinder.prototype=new vizit.utility.Cylinder})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(r){r.GaussianSphere=function(p,m,b,c,a){var e;this.setColor=function(n){h=n};this.getColor=function(){return h};this.setEnabled=function(n){k=vizit.utility.toBoolean(n)};this.isEnabled=function(){return k};this.setX=function(n){l=n;return this};this.getX=function(){return l};this.setY=function(n){g=n;return this};this.getY=function(){return g};this.setZ=function(n){t=n;return this};this.getZ=function(){return t};this.setR=function(n){f=n;return this};this.getR=function(){return f};this.setName=
function(n){d=n};this.getName=function(){return d};this.getModelView=function(n){"undefined"===typeof n&&(n=1);"undefined"===typeof e?(e=new Float32Array(16),e[0]=n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=n,e[11]=0,e[12]=l,e[13]=g,e[14]=t,e[15]=1):(e[0]=n,e[5]=n,e[10]=n);return e};this.drawFullSurface=function(n,q,v,A,x,w){var y=n.getGLContext();n.bindBuffer(v,q.getPositionHandle(),3,y.FLOAT,0,0);n.bindBuffer(A,q.getNormalHandle(),3,y.FLOAT,0,0);y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,
x);y.drawElements(y.TRIANGLES,w,y.UNSIGNED_SHORT,0)};this.render=function(n,q){if(k){var v=n.getGLContext();var A=this.getIntrinsicRadius();var x=this.getVertexBuffers(n);v.uniformMatrix4fv(q.getModelViewMatrixHandle(),!1,this.getModelView(f/A));v.uniform4f(q.getSurfaceColorHandle(),h.getRed(),h.getGreen(),h.getBlue(),h.getAlpha());v.cullFace(v.FRONT);this.drawFullSurface(n,q,x.vertices,x.normals,x.indices,this.getNindices());v.cullFace(v.BACK);this.drawFullSurface(n,q,x.vertices,x.normals,x.indices,
this.getNindices())}};var h=new vizit.utility.Color(.5,.5,.5,.5);var k=!0;var d=a;var f=c;var l=p;var g=m;var t=b};r.GaussianSphere.prototype=new vizit.geometry.Sphere})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(r){r.ChargedCylinder=function(p,m,b,c,a,e,h,k,d,f,l,g){var t,n,q,v,A,x;this.setHeight=function(C){t=C;w=!0};this.getHeight=function(){return t};this.setTx=function(C){v=C;w=!0;return this};this.getTx=function(){return v};this.setTy=function(C){A=C;w=!0;return this};this.getTy=function(){return A};this.setTz=function(C){x=C;w=!0;return this};this.getTz=function(){return x};this.setX0=function(C){K=C;w=!0;return this};this.getX0=function(){return K};this.setY0=function(C){M=C;w=!0;return this};
this.getY0=function(){return M};this.setZ0=function(C){O=C;w=!0;return this};this.getZ0=function(){return O};this.setX1=function(C){S=C;w=!0;return this};this.getX1=function(){return S};this.setY1=function(C){W=C;w=!0;return this};this.getY1=function(){return W};this.setZ1=function(C){X=C;w=!0;return this};this.getZ1=function(){return X};this.setR0=function(C){E=C;w=!0;return this};this.getR0=function(){return E};this.setR1=function(C){F=C;w=!0;return this};this.getR1=function(){return F};this.setPhi=
function(C){n=C;w=!0;return this};this.getPhi=function(){return n};this.setTheta=function(C){q=C;w=!0;return this};this.getTheta=function(){return q};this.setNfieldLines=function(C){G=C;w=!0;return this};this.getNfieldLines=function(){return G};this.setModified=function(C){w=C;return this};this.isModified=function(){return w};this.setName=function(C){y=C;return this};this.getName=function(){return y};this.getStartPoints=function(){var C=[];if(0!==z+G){var I=this.sign(J);var N=Math.max(2,Math.round(Math.abs(J*
Math.PI*(F*F-E*E)*z*t)))+G;var R=(E+1)/F;var u=.707106781*(E+1)/F;var B=-.5;var L=1/(N-1);for(var H=0;H<N;H++)C.push([R,0,B,I]),C.push([-R,0,B,I]),C.push([0,R,B,I]),C.push([0,-R,B,I]),C.push([u,u,B,I]),C.push([u,-u,B,I]),C.push([-u,-u,B,I]),C.push([-u,u,B,I]),B+=L}return this.transformPoints(Y,t/this.getBaseHeight(),F/this.getBaseRadius(),C)};this.getNormal=function(C,I,N){var R={};var u=-((K-C)*U+(M-I)*T+(O-N)*D)/(P*P);var B=K+u*U;var L=M+u*T;u=O+u*D;R.x=C-B;R.y=I-L;R.z=N-u;return R};this.getField=
function(C,I,N){var R=Array(3);I=this.getNormal(C,I,N);N=Math.sqrt(I.x*I.x+I.y*I.y+I.z*I.z);C=2*(N<E?0:N<F?Math.PI*(N*N-E*E)*J:Math.PI*(F*F-E*E)*J)/N;R[0]=C*I.x/N;R[1]=C*I.y/N;R[2]=C*I.z/N;return R};this.render=function(C,I){this.fullRender(C,I,Y,t/this.getBaseHeight(),E/this.getBaseRadius(),F/this.getBaseRadius(),!1)};var w=!0;var y=g;var J="undefined"===typeof d?0:d;var z="undefined"===typeof f?0:f;var G="undefined"===typeof l?0:l;var E=h;var F=k;var K=p;var M=m;var O=b;var S=c;var W=a;var X=e;
h=0<J?new vizit.utility.Color(.05,.05,.8,.3):0>J?new vizit.utility.Color(.8,.05,.05,.3):new vizit.utility.Color(.5,.5,.5,.2);this.setColor(h);this.translateBounds(this,K,M,O,S,W,X);this.zAxisRotation(this,K,M,S,W);this.yAxisRotation(this,K,M,O,S,W,X);this.scale(this,O,X);K=p;M=m;O=b;S=c;W=a;X=e;var Y=this.getCylinderModelView(v,A,x,this.getBaseHeight(),this.getBaseRadius(),n,q);var U=S-K;var T=W-M;var D=X-O;var P=Math.sqrt(U*U+T*T+D*D)};r.ChargedCylinder.prototype=new vizit.utility.Cylinder})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(r){r.ChargedLine=function(p,m,b,c,a,e,h,k,d,f){var l,g,t,n,q,v;this.computeColor=function(D){return 0<D?new vizit.utility.Color(.05,.05,.8,.8):0>D?new vizit.utility.Color(.8,.05,.05,.8):new vizit.utility.Color(.5,.5,.5,.8)};this.setChargeDensity=function(D){A=D;x=!0;this.setColor(this.computeColor(A))};this.getChargeDensity=function(){return A};this.setHeight=function(D){l=D;x=!0};this.getHeight=function(){return l};this.setTx=function(D){n=D;x=!0;return this};this.getTx=function(){return n};
this.setTy=function(D){q=D;return this};this.getTy=function(){return q};this.setTz=function(D){v=D;x=!0;return this};this.getTz=function(){return v};this.setX0=function(D){E=D;x=!0;return this};this.getX0=function(){return E};this.setY0=function(D){F=D;x=!0;return this};this.getY0=function(){return F};this.setZ0=function(D){K=D;x=!0;return this};this.getZ0=function(){return K};this.setX1=function(D){M=D;x=!0;return this};this.getX1=function(){return M};this.setY1=function(D){O=D;x=!0;return this};
this.getY1=function(){return O};this.setZ1=function(D){S=D;x=!0;return this};this.getZ1=function(){return S};this.setR0=function(D){z=D;x=!0;return this};this.getR0=function(){return z};this.setR1=function(D){G=D;x=!0;return this};this.getR1=function(){return G};this.setPhi=function(D){g=D;x=!0;return this};this.getPhi=function(){return g};this.setTheta=function(D){t=D;x=!0;return this};this.getTheta=function(){return t};this.setNfieldLines=function(D){J=D;x=!0;return this};this.getNfieldLines=function(){return J};
this.setModified=function(D){x=D;return this};this.isModified=function(){return x};this.setName=function(D){w=D;return this};this.getName=function(){return w};this.getStartPoints=function(){var D=[];if(0!==y+J){var P=this.sign(A);var C=Math.max(2,Math.round(Math.abs(A*y*l)))+J;var I=-.5;var N=1/(C-1);for(var R=0;R<C;R++)D.push([1,0,I,P]),D.push([-1,0,I,P]),D.push([0,1,I,P]),D.push([0,-1,I,P]),D.push([.707106781,.707106781,I,P]),D.push([.707106781,-.707106781,I,P]),D.push([-.707106781,-.707106781,
I,P]),D.push([-.707106781,.707106781,I,P]),I+=N}return this.transformPoints(W,l/this.getBaseHeight(),(z+1)/this.getBaseRadius(),D)};this.getNormal=function(D,P,C){var I={};var N=-((E-D)*X+(F-P)*Y+(K-C)*U)/(T*T);var R=E+N*X;var u=F+N*Y;N=K+N*U;I.x=D-R;I.y=P-u;I.z=C-N;return I};this.getField=function(D,P,C){C=this.getNormal(D,P,C);var I=Math.sqrt(C.x*C.x+C.y*C.y+C.z*C.z);D=Array(3);P=2*A/I;D[0]=P*C.x/I;D[1]=P*C.y/I;D[2]=P*C.z/I;return D};this.render=function(D,P){this.fullRender(D,P,W,l,z,G,!1)};var A=
"undefined"===typeof h?0:h;this.setColor(this.computeColor(A));var x=!0;var w=f;var y="undefined"===typeof k?0:k;var J="undefined"===typeof d?0:d;var z=0;var G=3;var E=p;var F=m;var K=b;var M=c;var O=a;var S=e;this.translateBounds(this,E,F,K,M,O,S);this.zAxisRotation(this,E,F,M,O);this.yAxisRotation(this,E,F,K,M,O,S);this.scale(this,K,S);E=p;F=m;K=b;M=c;O=a;S=e;var W=this.getCylinderModelView(n,q,v,this.getBaseHeight(),this.getBaseRadius(),g,t);var X=M-E;var Y=O-F;var U=S-K;var T=Math.sqrt(X*X+Y*
Y+U*U)};r.ChargedLine.prototype=new vizit.utility.Cylinder})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(r){r.ChargedPlane=function(p,m,b,c,a,e,h,k,d,f,l,g,t,n,q,v){var A,x,w,y,J,z,G,E,F;this.setNfieldLines=function(u){X=u;K=!0;return this};this.getNfieldLines=function(){return X};this.setModified=function(u){K=u;return this};this.isModified=function(){return K};this.setName=function(u){M=u;return this};this.getName=function(){return M};this.calculateNormal=function(u){var B=Array(3);B[0]=(u[4]-u[1])*(u[11]-u[2])-(u[5]-u[2])*(u[10]-u[1]);B[1]=(u[5]-u[2])*(u[9]-u[0])-(u[3]-u[0])*(u[11]-u[2]);
B[2]=(u[3]-u[0])*(u[10]-u[1])-(u[4]-u[1])*(u[9]-u[0]);u=Math.sqrt(B[0]*B[0]+B[1]*B[1]+B[2]*B[2]);B[0]/=u;B[1]/=u;B[2]/=u;return B};this.adjustStartPoints=function(u){var B=u.length;for(var L=0;L<B;L++){var H=u[L];var Z=H[0];var aa=H[1];var V=H[2];H[0]=z+C*(y*Z*D+V*I)+R*(-J*aa*P+N*(-y*Z*I+V*D));H[1]=G+C*(J*aa*P+N*(y*Z*I-V*D))+R*(y*Z*D+V*I);H[2]=E+J*aa*N+P*(-y*Z*I+V*D)}return u};this.getStartPoints=function(){var u;var B=Math.abs(S*W)+X/Math.abs(y*J);var L=[];if(0<B){var H=Math.sqrt(1/B);B=H/Math.abs(y);
H/=Math.abs(J);var Z=!1;var aa=0<S?1:-1;var V=Math.min(-.5+B/2,.5);for(u=Math.min(-.5+H/2,.5);!Z;)L.push([V,u,.4,aa]),L.push([V,u,-.4,aa]),u+=H,.5<u?(u=.5-(u-.5),V+=B,H=-H):-.5>u&&(u=-.5-(u- -.5),V+=B,H=-H),Z=.5<V}return this.adjustStartPoints(L)};this.getField=function(u,B,L){var H=Array(3);u=(u-Y[0])*U[0]+(B-Y[1])*U[1]+(L-Y[2])*U[2];B=O*S;0===u&&(H[0]=0,H[1]=0,H[2]=0);0<u?(H[0]=B*U[0],H[1]=B*U[1],H[2]=B*U[2]):(H[0]=-B*U[0],H[1]=-B*U[1],H[2]=-B*U[2]);return H};this.translateBoundingBox=function(u){z=
(p+h)/2;G=(m+k)/2;E=(b+d)/2;u[0]-=z;u[1]-=G;u[2]-=E;u[3]-=z;u[4]-=G;u[5]-=E;u[6]-=z;u[7]-=G;u[8]-=E;u[9]-=z;u[10]-=G;u[11]-=E;return u};this.zAxisRotation=function(u){var B=u[3]-u[0];var L=u[0]-u[9];0===B||0===L?(w=0,F=0===B&&0===L?0===u[4]-u[1]?1:2:0===B?1:2):(B=(a-m)/B,L=(k-a)/L,Math.abs(B)<Math.abs(L)?(w=Math.atan(B),F=1):(w=Math.atan(L),F=2));C=Math.cos(w);R=Math.sin(w);for(var H=0;4>H;H++)L=C*u[3*H]-R*u[3*H+1],B=R*u[3*H]+C*u[3*H+1],u[3*H]=L,u[3*H+1]=B;return u};this.xAxisRotation=function(u,
B){if(1===B){B=u[1]-u[10];var L=u[2]-u[11]}else B=u[4]-u[1],L=u[5]-u[2];N=x=0;P=1;if(0!==L&&0!==B){x=Math.atan(L/B);N=Math.sin(x);P=Math.cos(x);for(var H=0;4>H;H++)B=P*u[3*H+1]-N*u[3*H+2],L=N*u[3*H+1]+P*u[3*H+2],u[3*H+1]=B,u[3*H+2]=L}return u};this.yAxisRotation=function(u,B){if(1===B){B=u[0]-u[9];var L=u[2]-u[11]}else B=u[3]-u[0],L=u[5]-u[2];I=A=0;D=1;if(0!==L){0!==B?(A=Math.atan(L/B),I=Math.sin(A),D=Math.cos(A)):(A=1.5707963267948966,I=1,D=0);for(var H=0;4>H;H++)B=D*u[3*H]+I*u[3*H+2],L=-I*u[3*H]+
D*u[3*H+2],u[3*H]=B,u[3*H+2]=L}return u};this.scaleBoundingbox=function(u,B){1===B?(y=u[0]-u[9],J=u[4]-u[1]):(y=u[3]-u[0],J=u[1]-u[10]);for(B=0;4>B;B++)0!==y&&(u[3*B]/=y),0!==J&&(u[3*B+1]/=J);return u};this.getModelView=function(){return T};this.drawFullSurface=function(u,B,L,H,Z,aa){var V=u.getGLContext();u.bindBuffer(L,B.getPositionHandle(),3,V.FLOAT,0,0);u.bindBuffer(H,B.getNormalHandle(),3,V.FLOAT,0,0);V.bindBuffer(V.ELEMENT_ARRAY_BUFFER,Z);V.drawElements(V.TRIANGLES,aa,V.UNSIGNED_SHORT,0)};this.render=
function(u,B){var L=u.getGLContext();var H=this.getVertexBuffers(u);0<S?L.uniform4f(B.getSurfaceColorHandle(),.05,.05,.8,.4):0>S?L.uniform4f(B.getSurfaceColorHandle(),.8,.05,.05,.4):L.uniform4f(B.getSurfaceColorHandle(),.5,.5,.5,.2);var Z=this.getNindices();L.uniformMatrix4fv(B.getModelViewMatrixHandle(),!1,this.getModelView());L.disable(L.CULL_FACE);this.drawFullSurface(u,B,H.vertices,H.normals,H.indices,Z);L.enable(L.CULL_FACE)};var K=!0;var M=v;var O=6.283185307179586;var S="undefined"===typeof t?
0:t;var W="undefined"===typeof n?0:n;var X="undefined"===typeof q?0:q;var Y=[p,m,b,c,a,e,h,k,d,f,l,g];c=Y.slice(0);var U=this.calculateNormal(Y);c=this.translateBoundingBox(c);c=this.zAxisRotation(c);c=this.xAxisRotation(c,F);c=this.yAxisRotation(c,F);c=this.scaleBoundingbox(c,F);var T=new Float32Array(16);var D=Math.cos(-A);var P=Math.cos(-x);var C=Math.cos(-w);var I=Math.sin(-A);var N=Math.sin(-x);var R=Math.sin(-w);T[0]=y*(D*C-I*N*R);T[1]=y*(D*R+C*I*N);T[2]=-y*P*I;T[3]=0;T[4]=-J*P*R;T[5]=J*P*C;
T[6]=J*N;T[7]=0;T[8]=N*R*D+I*C;T[9]=-(N*D*C-I*R);T[10]=D*P;T[11]=0;T[12]=z;T[13]=G;T[14]=E;T[15]=1};r.ChargedPlane.prototype=new vizit.geometry.Square})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(r){r.ChargedSphere=function(p,m,b,c,a,e,h,k,d){var f;let l;var g=!0;var t=d;var n=0;var q=c;var v=q*q;var A=v*q;var x=a;var w=x*x*x;var y="undefined"===typeof e?0:e;var J="undefined"===typeof h?0:h;l="undefined"===typeof k?0:k;this.setA=function(z){q=z;v=q*q;A=v*q;g=!0;return this};this.getA=function(){return q};this.setB=function(z){x=z;w=x*x*x;g=!0;return this};this.getB=function(){return x};this.setNindices=function(z){n=z;return this};this.setModified=function(z){g=z;return this};this.isModified=
function(){return g};this.setNfieldLines=function(z){l=z;g=!0;return this};this.getNfieldLines=function(){return l};this.setName=function(z){t=z;return this};this.getName=function(){return t};this.getStartPoints=function(){const z=0<y?1:0>y?-1:0,G=Math.round(J*y*z)+l,E=3.6/Math.sqrt(G);let F=0;const K=q+.2*(x-q),M=[];let O,S;for(var W=1;W<G;W++)S=-1+2*W/G,O=Math.sqrt(1-S*S),F+=E/O,M.push([Math.cos(F)*O*K+p,S*K+m,Math.sin(F)*O*K+b,z]);return M};this.getField=function(z,G,E){var F=[0,0,0];z-=p;G-=m;
E-=b;var K=z*z+G*G+E*E;if(K<=v)return F;var M=Math.sqrt(K);K=M>=q&&M<x?y*(M-A/K)/(w-A):y/K;F[0]=K*z/M;F[1]=K*G/M;F[2]=K*E/M;return F};this.getModelView=function(z){z||(z=1);f?(f[0]=z,f[5]=z,f[10]=z):(f=new Float32Array(16),f[0]=z,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=z,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=z,f[11]=0,f[12]=p,f[13]=m,f[14]=b,f[15]=1);return f};this.drawFullSurface=function(z,G,E,F,K,M){var O=z.getGLContext();z.bindBuffer(E,G.getPositionHandle(),3,O.FLOAT,0,0);z.bindBuffer(F,G.getNormalHandle(),
3,O.FLOAT,0,0);O.bindBuffer(O.ELEMENT_ARRAY_BUFFER,K);O.drawElements(O.TRIANGLES,M,O.UNSIGNED_SHORT,0)};this.render=function(z,G){var E;var F=z.getGLContext();var K=this.getIntrinsicRadius();var M=this.getVertexBuffers(z);0<y?F.uniform4f(G.getSurfaceColorHandle(),.05,.05,.8,.2):0>y?F.uniform4f(G.getSurfaceColorHandle(),.8,.05,.05,.2):F.uniform4f(G.getSurfaceColorHandle(),.5,.5,.5,.2);n=this.getNindices();F.cullFace(F.FRONT);for(E=x;E>=q;E--){var O=E/K;F.uniformMatrix4fv(G.getModelViewMatrixHandle(),
!1,this.getModelView(O));this.drawFullSurface(z,G,M.vertices,M.normals,M.indices,n)}F.cullFace(F.BACK);for(E=q;E<=x;E++)O=E/K,this.drawFullSurface(z,G,M.vertices,M.normals,M.indices,n),F.uniformMatrix4fv(G.getModelViewMatrixHandle(),!1,this.getModelView(O))}};r.ChargedSphere.prototype=new vizit.geometry.Sphere})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(r){r.Charge=function(p,m,b,c,a,e,h){var k;this.setCharge=function(q){d=vizit.utility.ensureNumber(q);f=!0};this.getCharge=function(){return d};this.setX=function(q){g[0]=vizit.utility.ensureNumber(q);f=!0};this.getX=function(){return g[0]};this.setY=function(q){g[1]=vizit.utility.ensureNumber(q);f=!0};this.getY=function(){return g[1]};this.setZ=function(q){g[2]=vizit.utility.ensureNumber(q);f=!0};this.getZ=function(){return g[2]};this.setPosition=function(q){g=q;f=!0};this.getPosition=function(){return g};
this.setNfieldLines=function(q){n=q;f=!0};this.getNfieldLines=function(){return n};this.setModified=function(q){f=q};this.isModified=function(){return f};this.setName=function(q){l=q};this.getName=function(){return l};this.getField=function(q,v,A){var x=[0,0,0];q-=g[0];v-=g[1];A-=g[2];k=q*q+v*v+A*A;if(0>=k)return x;var w=Math.sqrt(k);var y=d/k;x[0]=y*q/w;x[1]=y*v/w;x[2]=y*A/w;return x};this.getFieldSeedPointsI=function(q){var v=[];var A=0<d?1:0>d?-1:0;q=Math.round(q*d*A);var x=2/q;for(var w=0;w<q;w++){var y=
w*x-1+x/2;var J=Math.sqrt(1-y*y);var z=2.39996323*w;v.push([Math.cos(z)*J+g[0],y+g[1],Math.sin(z)*J+g[2],A])}return v};this.getStartPoints=function(q,v){var A=0<d?1:0>d?-1:0;var x=Math.round(t*d*A)+1+n;var w=3.6/Math.sqrt(x);q="undefined"===typeof q?Math.PI/2:q;v="undefined"===typeof v?1:v;var y=[];if(0<x)for(var J=1;J<x;J++){var z=-1+2*J/x;var G=Math.sqrt(1-z*z);q+=w/G;y.push([Math.cos(q)*G*v+g[0],z*v+g[1],Math.sin(q)*G*v+g[2],A])}return y};this.shouldStop=function(q,v,A,x){return 0>q*d&&4>k};var d=
c;var f=!0;var l=h;var g=[vizit.utility.ensureNumber(p),vizit.utility.ensureNumber(m),vizit.utility.ensureNumber(b)];var t="undefined"===typeof a?0:a;var n="undefined"===typeof e?0:e};r.Charges=function(){var p;this.addCharge=function(e){b=c.push(e);return this};for(var m=0;m<arguments.length;m++)this.addCharge(arguments[m]);this.getNcharges=function(){return b};this.getCharges=function(){return c};this.addDistribution=function(e){p=a.push(e);return this};this.getNdistributions=function(){return p};
this.getDistributions=function(){return a};this.chargesModified=function(){var e=!1;for(m=0;m<b&&!e;m++)e=e||c[m].isModified();return e};this.distributionsModified=function(){var e=!1;for(m=0;m<p&&!e;m++)e=e||a[m].isModified();return e};this.isModified=function(){return this.chargesModified()||this.distributionsModified()};this.setModified=function(e){for(m=0;m<b;m++)c[m].setModified(e);for(m=0;m<p;m++)a[m].setModified(e)};this.getStartPoints=function(e,h){var k=e,d=1.57079632679/(b+1),f=[];for(e=
0;e<b;e++){var l=c[e];f=f.concat(l.getStartPoints(k,h));k+=d}for(e=0;e<p;e++)f=f.concat(a[e].getStartPoints());return f};this.getField=function(e,h,k){for(var d,f=[0,0,0],l=0;l<b;l++)d=c[l],d=d.getField(e,h,k),f[0]+=d[0],f[1]+=d[1],f[2]+=d[2];for(l=0;l<p;l++)d=a[l].getField(e,h,k),f[0]+=d[0],f[1]+=d[1],f[2]+=d[2];return f};this.shouldStop=function(e,h,k,d){var f=!1;for(var l=0;l<b&&!f;l++)f=c[l],f=f.shouldStop(e,h,k,d);return f};var b=0;var c=[];var a=[]}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(r){r.ElectricField=function(p){var m,b;this.setLineWidth=function(w){v.setLineWidth(w);return this};this.getLineWidth=function(){return v.getLineWidth()};this.setArrowSpacing=function(w){q.setArrowSpacing(w);return this};this.getArrowSpacing=function(){return q.getArrowSpacing()};this.setArrowHeadSize=function(w){q.setArrowLength(w);return this};this.getArrowHeadSize=function(){return q.getArrowLength()};this.setArrowWidth=function(w){v.setArrowWidth(w);return this};this.getArrowWidth=function(){return v.getArrowWidth()};
this.setColor=function(w){c=w;return this};this.getColor=function(){return c};this.setCharges=function(w){b=w;n.setCharges(b);q.setCharges(b);return this};this.getCharges=function(){return b};this.addGaussianSurface=function(w){e.push(w);return this};this.getGaussianSurfaces=function(){return e};this.getGlUtility=function(){return l};this.setMaxVectors=function(w){h=w;return this};this.getMaxVectors=function(){return h};this.setModelViewMatrix=function(w){g=w;k=l.extractRotationPart(g,k);return this};
this.getModelViewMatrix=function(){return g};this.setProjectionMatrix=function(w){t=w;return this};this.addStartPoint=function(w,y,J,z){d.push([w,y,J,z]);return this};this.addStartPoints=function(w){d=d.concat(w)};this.getStartPoints=function(){return d};this.render=function(){if(f){var w=l.getGLContext();b.chargesModified()?(this.setupCharges(),this.setupFieldLines()):b.distributionsModified()&&this.setupFieldLines();l.clear();A.render(t,g,m,b);v.render(t,g,c,a);w.enable(w.BLEND);w.enable(w.CULL_FACE);
w.blendFunc(w.SRC_ALPHA,w.ONE_MINUS_SRC_ALPHA);x.render(t,g,k,b.getDistributions());w.disable(w.DEPTH_TEST);x.render(t,g,k,e);w.enable(w.DEPTH_TEST);w.disable(w.BLEND);w.disable(w.CULL_FACE);b.setModified(!1)}};this.setupCharges=function(w){m||(w=l.getGLContext(),m=w.createBuffer());w=n.generate();l.loadData(m,w)};this.setupFieldLines=function(){var w;var y=[];y=y.concat(b.getStartPoints(0,5));y=y.concat(d);var J=y.length;var z=a.length;var G=Math.min(J,z);for(w=0;w<G;++w){var E=y[w];E=q.generate(E[0],
E[1],E[2],E[3]);a[w].reload(l,E)}for(;w<z;++w)a[w].disable();for(;w<J;++w)E=y[w],E=q.generate(E[0],E[1],E[2],E[3]),a.push(new vizit.electricfield.FieldLineVBO(l,E))};this.start=function(){f=!0;this.render()};var c=new Float32Array([.8,.3,.3,1]);var a=[];var e=[];var h=5;var k=new Float32Array([1,0,0,0,1,0,0,0,1]);var d=[];var f=!1;const l=p.getGlUtility();l.clearColor(0,0,0,0);let g=p.getModelViewMatrix(),t=p.getProjectionMartix();p.registerRenderer(this);const n=new vizit.electricfield.ChargeGenerator,
q=new vizit.electricfield.FieldLineGenerator(3E3,.6),v=new vizit.electricfield.FieldLineRenderer(l),A=new vizit.electricfield.ChargeRenderer(l),x=new vizit.electricfield.SurfaceRenderer(l)}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};
(function(r){r.VectorFieldGenerator=function(p){let m;this.setVectorFunction=function(g){d=g;d.setModified(!0);return this};this.getVectorFunction=function(){return d};this.setStartPoints=function(g){h=g;return this};this.addStartPoints=function(g){h.push(...g);return this};this.getStartPoints=function(){return h};this.setMaxVectors=function(g){f=g;return this};this.getMaxVectors=function(){return f};this.setLineWidth=function(g){a=g;return this};this.getLineWidth=function(){return a};this.setArrowSize=
function(g){e=g;return this};this.getArrowSize=function(){return e};this.setArrowHeadSize=function(g){c=g;return this};this.getArrowHeadSize=function(){return c};this.setArrowHeadWidth=function(g){b=g;return this};this.getArrowHeadWidth=function(){return b};this.setVectorSpacing=function(g){l=g;return this};this.getVectorSpacing=function(){return l};this.setDs=function(g){k=g;return this};this.getDs=function(){return k};this.pushVertex=function(g,t,n,q,v){g.push(t.x);g.push(t.y);g.push(t.z);g.push(n.x);
g.push(n.y);g.push(n.z);g.push(q);g.push(v)};this.generateVector=function(g,t,n,q,v,A,x,w,y,J,z){v={};v.x=g;v.y=t;v.z=n;const G={};G.x=g+q[0]*y;G.y=t+q[1]*y;G.z=n+q[2]*y;this.pushVertex(z,v,G,A,0);this.pushVertex(z,v,G,-A,0);this.pushVertex(z,G,v,-A,x);this.pushVertex(z,G,v,A,x);this.pushVertex(z,G,v,w,1.33*x);this.pushVertex(z,G,v,0,x);this.pushVertex(z,G,v,0,0);this.pushVertex(z,G,v,-w,1.33*x);g=8*J;z.pushIndex(g);z.pushIndex(g+1);z.pushIndex(g+2);z.pushIndex(g+2);z.pushIndex(g+1);z.pushIndex(g+
3);z.pushIndex(g+4);z.pushIndex(g+5);z.pushIndex(g+6);z.pushIndex(g+6);z.pushIndex(g+5);z.pushIndex(g+7)};this.trace=function(g,t,n,q,v,A,x,w,y){var J,z,G;var E=G=J=0;for(z=!1;E<A&&!z;){var F=g.getField(t,n,q);z=Math.sqrt(F[0]*F[0]+F[1]*F[1]+F[2]*F[2]);if(0===z)break;J>=G&&(this.generateVector(t,n,q,F,z,a,c,b,w,x+E,y),G=J+Math.max(z*l*w,1),E++);t+=v*F[0]/z*k;n+=v*F[1]/z*k;q+=v*F[2]/z*k;J+=k;z=g.shouldStop(v,t,n,q)}return E};this.generateField=function(){var g;var t=h.length;m=0;var n=new vizit.utility.IndexedVertices(vizit.vectorfield.LineRenderer.VERTICES_PER_ARROW*
vizit.vectorfield.LineRenderer.FLOATS_PER_VERTEX*f*t,12*f*t);for(g=0;g<t;g++){var q=h[g];q[4]=m;m+=this.trace(d,q[0],q[1],q[2],q[3],f,m,e,n)}return n};let b=r.VectorFieldGenerator.DEFAULT_ARROW_HEAD_WIDTH,c=r.VectorFieldGenerator.DEFAULT_ARROW_HEAD_SIZE,a=r.VectorFieldGenerator.DEFAULT_LINE_WIDTH,e=r.VectorFieldGenerator.DEFAULT_ARROW_SIZE,h=[],k=r.VectorFieldGenerator.DEFAULT_DS,d=p,f=r.VectorFieldGenerator.DEFAULT_MAX_VECTORS,l=r.VectorFieldGenerator.DEFAULT_VECTOR_SPACING};r.VectorFieldGenerator.DEFAULT_ARROW_HEAD_WIDTH=
10;r.VectorFieldGenerator.DEFAULT_ARROW_HEAD_SIZE=10;r.VectorFieldGenerator.DEFAULT_ARROW_SIZE=4;r.VectorFieldGenerator.DEFAULT_LINE_WIDTH=2;r.VectorFieldGenerator.DEFAULT_DS=.33;r.VectorFieldGenerator.DEFAULT_MAX_VECTORS=5;r.VectorFieldGenerator.DEFAULT_VECTOR_SPACING=1.2})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.field=window.vizit.field||{};
(function(r){r.Stage=function(p){var m,b;this.getContext=function(){return a.getGLContext()};this.registerRenderer=function(f){m=f;return this};this.getRenderer=function(){return m};this.setModelViewMatrix=function(f){h=f;m.setModelViewMatrix(h);return this};this.getModelViewMatrix=function(){return h};this.requestRender=function(){b||(b=!0,requestAnimationFrame(this.render))};this.render=function(){m.render();b=!1};this.start=function(){m.start()};this.setScale=function(f){e=f;1>e&&(e=1);k=a.generateOrthographicMatrix(e,
e,-e,e);m&&(m.setProjectionMatrix(k),this.render());return this};this.getProjectionMartix=function(){return k};this.zoomBy=function(f){this.setScale(e+f);return this};this.setElementName=function(f,l){c[l]=f;return this};this.getElementByName=function(f){var l;c.hasOwnProperty(f)&&(l=c[f]);return l};this.getGlUtility=function(){return a};var c={};var a=new vizit.utility.GLUtility(p);var e=5;var h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);new Float32Array([1,0,0,0,1,0,0,0,1]);var k=a.generateOrthographicMatrix(e,
e,-e,e);var d=new vizit.utility.MotionEventHandler(this,a,75,4);p.addEventListener("mousewheel",d.handleMouseWheel.bind(d),!1);p.addEventListener("DOMMouseScroll",d.handleMouseWheel.bind(d),!1);p.addEventListener("mousedown",d.handleMouseDown.bind(d),!1);document.addEventListener("mouseup",d.handleMouseUp.bind(d),!1);document.addEventListener("mousemove",d.handleMouseMove.bind(d),!1);p.addEventListener("touchstart",d.handleTouchStart.bind(d),!1);p.addEventListener("touchmove",d.handleTouchMove.bind(d),
!1);p.addEventListener("touchend",d.handleTouchEnd.bind(d),!1)}})(window.vizit.field);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(r){r.BindingBuilder=function(){this.bindingBuilder=function(p,m,b){var c,a,e,h;for(e in m)"set"===e.toLowerCase()?h=m[e]:"from"===e.toLowerCase()?c=m[e]:"mapping"===e.toLowerCase()&&(a=m[e]);c||(c=h);m="set"+h.charAt(0).toUpperCase();1<h.length&&(m+=h.slice(1));(e=p[m])?(e=e.bind(p),p=a?new window.vizit.lesson.MappingEventHandler(e,c,a,b):new window.vizit.lesson.DirectEventHandler(e,b),document.addEventListener(c+"Changed",p.handleUpdate.bind(p),!1)):console.warn(`No method ${m} found to bind ${h}.`)};
this.bind=function(p,m,b){if(m)if(Array.isArray(m)){var c=m.length;for(var a=0;a<c;++a)this.bindingBuilder(p,m[a],b)}else this.bindingBuilder(p,m,b)}};r.bindingBuilder=new r.BindingBuilder})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(r){r.CombinedVectorValuedFunctionBuilder=function(p){this.buildFunction=function(b){var c,a,e;for(e in b)"args"===e.toLowerCase()?c=b[e]:"body"===e.toLowerCase()?a=b[e]:"name"===e.toLowerCase()?name=b[e]:"properties"!==e.toLowerCase()&&"stop"!==e.toLowerCase()&&e.toLowerCase();return new vizit.vectorfield.VectorFunction(c,a)};this.build=function(b){var c,a;if(b){var e=new vizit.vectorfield.CombinedVectorFunctions;if(Array.isArray(b)){var h=b.length;for(var k=0;k<h;++k)if(c=this.buildFunction(b[k]))e.addFunction(c),
(a=c.getName())&&m.setElementName(c,a)}else if(c=this.buildFunction(b))e.addFunction(c),(a=c.getName())&&m.setElementName(c,a)}return e};var m=p}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(r){r.SurfaceBuilder=function(){var p,m,b,c,a,e;this.getXMin=function(){return p};this.getXMax=function(){return m};this.getYMin=function(){return b};this.getYMax=function(){return c};this.getZMin=function(){return a};this.getZMax=function(){return e};this.gaussianCylinderBuilder=function(h){var k,d,f,l,g,t,n,q,v;var A=!0;for(l in h)"x"===l.toLowerCase()?n=h[l]:"y"===l.toLowerCase()?q=h[l]:"z"===l.toLowerCase()?v=h[l]:"h"===l.toLowerCase()?k=h[l]:"r"===l.toLowerCase()?g=h[l]:"phi"===l.toLowerCase()?
f=h[l]:"theta"===l.toLowerCase()?t=h[l]:"name"===l.toLowerCase()?d=h[l]:"enabled"===l.toLowerCase()&&(A=h[l]);p=Math.min(p,n-g,n+g);m=Math.max(m,n-g,n+g);b=Math.min(b,q-g,q-g);c=Math.max(c,q-g,q+g);a=Math.min(a,v-k,v+k);e=Math.max(e,v-k,v+k);h=new vizit.electricfield.GaussianCylinder(n,q,v,k,g,f,t,d);A||h.setEnabled(A);return h};this.gaussianSphereBuilder=function(h){var k,d,f,l,g,t;var n=!0;for(d in h)"x"===d.toLowerCase()?l=h[d]:"y"===d.toLowerCase()?g=h[d]:"z"===d.toLowerCase()?t=h[d]:"r"===d.toLowerCase()?
f=h[d]:"name"===d.toLowerCase()?k=h[d]:"enabled"===d.toLowerCase()&&(n=h[d]);p=Math.min(p,l-f,l+f);m=Math.max(m,l-f,l+f);b=Math.min(b,g-f,g-f);c=Math.max(c,g-f,g+f);a=Math.min(a,t-f,t+f);e=Math.max(e,t-f,t+f);h=new vizit.electricfield.GaussianSphere(l,g,t,f,k);n||h.setEnabled(n);return h};this.surfaceBuilder=function(h,k){var d,f,l,g;var t=/\s*gaussian\s*sphere\s*/i;for(f in h)"type"===f.toLowerCase()?g=h[f]:"bind"===f.toLowerCase()&&(d=h[f]);g.match(/\s*gaussian\s*cylinder\s*/i)?l=this.gaussianCylinderBuilder(h):
g.match(t)&&(l=this.gaussianSphereBuilder(h));"undefined"!==typeof d&&"undefined"!==l&&this.bind(l,d,k);return l};this.build=function(h,k,d){var f;if(h)if(Array.isArray(h)){var l=h.length;for(var g=0;g<l;++g)if(f=this.surfaceBuilder(h[g],d))k.addGaussianSurface(f),(name=f.getName())&&d.setElementName(f,name)}else if(f=this.surfaceBuilder(h,d))k.addGaussianSurface(f),(name=f.getName())&&d.setElementName(f,name);return k}};r.SurfaceBuilder.prototype=r.bindingBuilder})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};(function(r){r.VectorValuedFunctionBuilder=function(p){this.build=function(b,c){var a;if(b){var e=Array.isArray(b)?b[0]:b;"undefined"!==typeof e&&(a="function"===e.type.toLowerCase()?new vizit.builder.CombinedVectorValuedFunctionBuilder(m):new vizit.builder.ElectricFieldElementBuilder(m,c))}return a.build(b)};var m=p}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(r){r.DistributionBuilder=function(){var p,m,b,c,a,e;this.getXMin=function(){return p};this.getXMax=function(){return m};this.getYMin=function(){return b};this.getYMax=function(){return c};this.getZMin=function(){return a};this.getZMax=function(){return e};this.chargedPlaneBuilder=function(d){var f,l,g,t,n,q,v,A,x,w,y,J,z,G,E,F,K;for(f in d)f.match(h)?l=d[f]:f.match(k)?g=d[f]:"nfieldLines"===f.toLowerCase()?n=d[f]:"x0"===f.toLowerCase()?q=d[f]:"y0"===f.toLowerCase()?v=d[f]:"z0"===f.toLowerCase()?
A=d[f]:"x1"===f.toLowerCase()?x=d[f]:"y1"===f.toLowerCase()?w=d[f]:"z1"===f.toLowerCase()?y=d[f]:"x2"===f.toLowerCase()?J=d[f]:"y2"===f.toLowerCase()?z=d[f]:"z2"===f.toLowerCase()?G=d[f]:"x3"===f.toLowerCase()?E=d[f]:"y3"===f.toLowerCase()?F=d[f]:"z3"===f.toLowerCase()?K=d[f]:"name"===f.toLowerCase()&&(t=d[f]);p=Math.min(p,q,x,J,E);m=Math.max(m,q,x,J,E);b=Math.min(b,v,w,z,K);c=Math.max(c,v,w,z,K);a=Math.min(a,A,y,G,K);e=Math.max(e,A,y,G,K);return new vizit.electricfield.ChargedPlane(q,v,A,x,w,y,J,
z,G,E,F,K,l,g,n,t)};this.chargedCylinderBuilder=function(d){var f,l,g,t,n,q,v,A,x,w,y,J,z;for(n in d)n.match(h)?f=d[n]:n.match(k)?l=d[n]:"nfieldLines"===n.toLowerCase()?t=d[n]:"x0"===n.toLowerCase()?q=d[n]:"y0"===n.toLowerCase()?v=d[n]:"z0"===n.toLowerCase()?A=d[n]:"x1"===n.toLowerCase()?x=d[n]:"y1"===n.toLowerCase()?w=d[n]:"z1"===n.toLowerCase()?y=d[n]:"r0"===n.toLowerCase()?J=d[n]:"r1"===n.toLowerCase()?z=d[n]:"name"===n.toLowerCase()&&(g=d[n]);p=Math.min(p,q,x);m=Math.max(m,q,x);b=Math.min(b,v,
w);c=Math.max(c,v,w);a=Math.min(a,A,y);e=Math.max(e,A,y);return new vizit.electricfield.ChargedCylinder(q,v,A,x,w,y,J,z,f,l,t,g)};this.chargedLineBuilder=function(d){var f,l,g,t,n,q,v,A,x,w,y;for(n in d)n.match(h)?f=d[n]:n.match(k)?l=d[n]:"nfieldLines"===n.toLowerCase()?t=d[n]:"x0"===n.toLowerCase()?q=d[n]:"y0"===n.toLowerCase()?v=d[n]:"z0"===n.toLowerCase()?A=d[n]:"x1"===n.toLowerCase()?x=d[n]:"y1"===n.toLowerCase()?w=d[n]:"z1"===n.toLowerCase()?y=d[n]:"name"===n.toLowerCase()&&(g=d[n]);p=Math.min(p,
q,x);m=Math.max(m,q,x);b=Math.min(b,v,w);c=Math.max(c,v,w);a=Math.min(a,A,y);e=Math.max(e,A,y);return new vizit.electricfield.ChargedLine(q,v,A,x,w,y,f,l,t,g)};this.chargedSphereBuilder=function(d){var f,l,g,t,n,q,v,A,x;for(let w in d)"charge"===w.toLowerCase()?f=d[w]:w.match(k)?l=d[w]:"nfieldLines"===w.toLowerCase()?t=d[w]:"x"===w.toLowerCase()?n=d[w]:"y"===w.toLowerCase()?q=d[w]:"z"===w.toLowerCase()?v=d[w]:"a"===w.toLowerCase()?A=d[w]:"b"===w.toLowerCase()?x=d[w]:"name"===w.toLowerCase()&&(g=d[w]);
p=Math.min(p,n-x);m=Math.max(m,n+x);b=Math.min(b,q-x);c=Math.max(c,q+x);a=Math.min(a,v-x);e=Math.max(e,v+x);return new vizit.electricfield.ChargedSphere(n,q,v,A,x,f,l,t,g)};this.chargeDistributionBuilder=function(d,f){var l,g,t,n;var q=/\s*charged\s*cylinder\s*/i;var v=/\s*charged\s*line\s*/i;var A=/\s*charged\s*sphere\s*/i;for(t in d)"type"===t.toLowerCase()?n=d[t]:"bind"===t.toLowerCase()&&(l=d[t]);n.match(/\s*charged\s*plane\s*/i)?g=this.chargedPlaneBuilder(d):n.match(q)?g=this.chargedCylinderBuilder(d):
n.match(v)?g=this.chargedLineBuilder(d):n.match(A)&&(g=this.chargedSphereBuilder(d));"undefined"!==typeof l&&"undefined"!==g&&this.bind(g,l,f);return g};this.build=function(d,f,l){var g,t;if(d)if(Array.isArray(d)){var n=d.length;for(var q=0;q<n;++q)if(g=this.chargeDistributionBuilder(d[q],l))f.addDistribution(g),(t=g.getName())&&l.setElementName(g,t)}else if(g=this.chargeDistributionBuilder(d,l))f.addDistribution(g),(t=g.getName())&&l.setElementName(g,t);return f};var h=/\s*charge\s*density\s*/i;
var k=/\s*field\s*line\s*density\s*/i};r.DistributionBuilder.prototype=r.bindingBuilder})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(r){r.ChargesBuilder=function(){this.getXMin=function(){return p};this.getXMax=function(){return m};this.getYMin=function(){return b};this.getYMax=function(){return c};this.getZMin=function(){return a};this.getZMax=function(){return e};this.chargeBuilder=function(h,k){var d,f,l,g,t,n,q,v,A;var x="";const w=/\s*field\s*line\s*density\s*/i;for(v in h)"charge"===v.toLowerCase()?A=h[v]:"x"===v.toLowerCase()?l=h[v]:"y"===v.toLowerCase()?g=h[v]:"z"===v.toLowerCase()?t=h[v]:v.match(w)?n=h[v]:"nfieldlines"===
v.toLowerCase()?q=h[v]:"bind"===v.toLowerCase()?d=h[v]:"name"===v.toLowerCase()&&(f=h[v]);"undefined"===typeof A&&(x+="No charge specified for point charge.\n");"undefined"===typeof l&&(0<x.length&&(x+="\n"),x+="x coordinate is not defined in charge configuration.\n");"undefined"===typeof g&&(0<x.length&&(x+="\n"),x+="y coordinate is not defined in charge configuration.\n");"undefined"===typeof t&&(0<x.length&&(x+="\n"),x+="z coordinate is not defined in charge configuration.\n");if(0===x.length){l<
p&&(p=l);l>m&&(m=l);g<b&&(b=g);g>c&&(c=g);t<a&&(a=t);t>e&&(e=t);var y=new vizit.electricfield.Charge(l,g,t,A,n,q,f);"undefined"!==typeof d&&this.bind(y,d,k)}return{charge:y,message:x}};this.build=function(h,k,d){if(h)if(Array.isArray(h)){var f=h.length;for(var l=0;l<f;++l){var g=this.chargeBuilder(h[l],d);const t=g.charge;g.message&&console.log(g.message);t&&(k.addCharge(t),(g=t.getName())&&d.setElementName(t,g))}}else g=this.chargeBuilder(h,d),h=g.charge,g.message&&console.log(g.message),h&&(k.addCharge(h),
(g=h.getName())&&d.setElementName(h,g));return k};var p=Number.POSITIVE_INFINITY;var m=Number.NEGATIVE_INFINITY;var b=Number.POSITIVE_INFINITY;var c=Number.NEGATIVE_INFINITY;var a=Number.POSITIVE_INFINITY;var e=Number.NEGATIVE_INFINITY};r.ChargesBuilder.prototype=r.bindingBuilder})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(r){r.ElectricFieldElementBuilder=function(p,m){this.buildELement=function(a,e){const h=/\s*charged\s*cylinder\s*/i,k=/\s*charged\s*line\s*/i,d=/\s*charged\s*plane\s*/i,f=/\s*charged\s*sphere\s*/i,l=/\s*gaussian\s*cylinder\s*/i,g=/\s*gaussian\s*sphere\s*/i;for(var t in a)if("type"===t.toLowerCase()){var n=a[t];break}if(n.match(/\s*charges?\s*$/i))n=new vizit.builder.ChargesBuilder,e=n.build(a,e,b);else if(n.match(h)||n.match(k)||n.match(d)||n.match(f))n=new vizit.builder.DistributionBuilder,
e=n.build(a,e,b);else if(n.match(l)||n.match(g))n=new vizit.builder.SurfaceBuilder,c=n.build(a,c,b);return e};this.build=function(a){var e=new vizit.electricfield.Charges;if(a)if(Array.isArray(a)){var h=a.length;for(var k=0;k<h;++k)this.buildELement(a[k],e)}else this.buildELement(a,e);return e};var b=p;var c=m}})(window.vizit.builder);window.vizit=window.vizit||{};(function(r){r.Visualizations=function(){this.register=function(p,m){};this.lookup=function(p){var m;(void 0).hasOwnProperty(p)&&(m=(void 0)[p]);return m}}})(window.vizit);vizit.visualizations=new vizit.Visualizations;window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(r){r.ElectricFieldBuilder=function(p){this.build=function(b){var c,a,e,h,k,d,f,l;for(l in b)"arrowheadsize"===l.toLowerCase()?c=b[l]:"arrowwidth"===l.toLowerCase()?a=b[l]:"arrowspacing"===l.toLowerCase()?e=b[l]:"maxvectors"===l.toLowerCase()?f=b[l]:"linewidth"===l.toLowerCase()?d=b[l]:"elements"===l.toLowerCase()&&(k=b[l]);b=new vizit.electricfield.ElectricField(m);"undefined"!==typeof f&&b.setMaxVectors(f);"undefined"!==typeof c&&b.setArrowHeadSize(c);"undefined"!==typeof a&&b.setArrowWidth(a);
"undefined"!==typeof e&&b.setArrowSpacing(e);"undefined"!==typeof d&&b.setLineWidth(d);(h=(new vizit.builder.ElectricFieldElementBuilder(m,b)).build(k,h))&&b.setCharges(h);return b};var m=p}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(r){r.SimpleVectorFieldBuilder=function(p){this.build=function(b){var c,a,e,h,k,d,f;for(f in b)"arrowheadsize"===f.toLowerCase()&&(c=b[f]),"arrowheadwidth"===f.toLowerCase()?a=b[f]:"arrowsize"===f.toLowerCase()?e=b[f]:"linewidth"===f.toLowerCase()?h=b[f]:"maxvectors"===f.toLowerCase()&&(k=b[f]),"f"===f.toLowerCase()&&(d=b[f]);if(d){b=new vizit.builder.VectorValuedFunctionBuilder(m);var l=b.build(d)}d=new vizit.vectorfield.SimpleVectorField(m,l);"undefined"!==typeof k&&d.setMaxVectors(k);
"undefined"!==typeof e&&d.setArrowSize(e);"undefined"!==typeof c&&d.setArrowHeadSize(c);"undefined"!==typeof a&&d.setArrowHeadWidth(a);"undefined"!==typeof h&&d.setLineWidth(h);return d};var m=p}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(r){r.VizBuilder=function(){this.processConfig=function(p){var m,b,c,a,e;const h=/\s*electric\s*field\s*/i,k=/\s*simple\s*vector\s*field\s*/i;var d=/\s*start\s*points\s*/i;for(var f in p)"canvas"===f.toLowerCase()?m=p[f]:"scale"===f.toLowerCase()?c=p[f]:"type"===f.toLowerCase()?e=p[f]:"name"===f.toLowerCase()?b=p[f]:f.match(d)&&(a=p[f]);if("undefined"===typeof e)alert("Missing type for visualization configuration.");else if("undefined"===typeof m)alert("No canvas specified, please provide the id of a canvas.");
else if(d=document.getElementById(m)){m=new vizit.field.Stage(d);if(e.match(h)){var l=new vizit.builder.ElectricFieldBuilder(m);l=l.build(p)}else e.match(k)?(l=new vizit.builder.SimpleVectorFieldBuilder(m),l=l.build(p)):alert("Unrecognized visualization type: "+e+".");l&&("undefined"!==typeof c&&m.setScale(c),"undefined"!==typeof b&&vizit.visualizations.register(b,m),"undefined"!==typeof a&&l.addStartPoints(a),m.start())}else alert('Can not find canvas with id="'+m+'".')};this.process=function(p){if(p)if(Array.isArray(p)){var m=
p.length;for(var b=0;b<m;++b)this.processConfig(p[b])}else this.processConfig(p)}}})(window.vizit.builder);function VIZ_CONFIG_IF_EXISTS(r){"undefined"!==typeof VISUALIZATION_CONFIG&&(r=new vizit.builder.VizBuilder,r.process(VISUALIZATION_CONFIG))}"interactive"===document.readyState||"complete"===document.readyState?VIZ_CONFIG_IF_EXISTS():document.addEventListener("DOMContentLoaded",VIZ_CONFIG_IF_EXISTS);
//# sourceMappingURL=VField.min.js.map 
