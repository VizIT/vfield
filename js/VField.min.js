/*
 Copyright 2013-2014 Vizit Solutions

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
'use strict';class IllegalArgumentException extends Error{constructor(t){super(t);this.name="IllegalArgumentException"}};window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};(function(t){t.ensureNumber=function(q){return"number"===typeof q?q:parseFloat(q)}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};(function(t){t.toBoolean=function(q){var k=typeof q;if("boolean"===k)var b=q;else if("number"===k)b=0!==q;else if("string"===k)switch(q.trim().toLowerCase()){case "f":case "false":case "n":case "no":case "0":case "":b=!1;break;default:b=!0}return b}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};
(function(t){t.MotionEventHandler=function(q,k,b,c){var a;var e=[];var h=!1;var l=a=null;this.findTouchByIdentifier=function(d){var f;for(f=0;f<e.length;f++){var m=e[f].identifier;if(m===d)return f}return-1};this.handleTouchStart=function(d){var f;var m=d.targetTouches;for(f=0;f<m.length;f++){var g=m[f];-1===this.findTouchByIdentifier(g.identifier)&&e.push(g)}if(d.preventDefault)d.preventDefault();else return!1};this.handleTouchEnd=function(d){var f;var m=d.changedTouches;for(f=0;f<m.length;f++){var g=
this.findTouchByIdentifier(m[f].identifier);-1!==g&&e.splice(g,1)}if(d.preventDefault)d.preventDefault();else return!1};this.handleOneActiveMove=function(d){var f=d.changedTouches[0];var m=e[0];if(null!==m){var g=f.pageX-m.pageX;m=f.pageY-m.pageY;var r=q.getModelViewMatrix();k.rotateBy(r,m/150,g/150);q.setModelViewMatrix(r);q.requestRender();e.splice(0,1,f)}else e.push(f);if(d.preventDefault)d.preventDefault();else return!1};this.handleTwoActiveMove=function(d){var f=e[0];var m=e[1];var g=m.pageX-
f.pageX;var r=m.pageY-f.pageY;var n=Math.sqrt(g*g+r*r);var p=d.changedTouches;for(g=0;g<p.length;g++){var v=p[g];r=v.identifier;f.identifier===r?(f=v,e.splice(0,1,v)):m.identifier===r&&(m=v,e.splice(1,1,v))}g=m.pageX-f.pageX;r=m.pageY-f.pageY;q.zoomBy(-(Math.sqrt(g*g+r*r)-n)/c);if(d.preventDefault)d.preventDefault();else return!1};this.handleTouchMove=function(d){return 1===e.length?this.handleOneActiveMove(d):2===e.length?this.handleTwoActiveMove(d):!0};this.handleMouseDown=function(d){h=!0;a=d.clientX;
l=d.clientY};this.handleMouseUp=function(d){h=!1};this.handleMouseMove=function(d){if(h){var f=d.clientX,m=d.clientY,g=f-a,r=m-l;d=q.getModelViewMatrix();k.rotateBy(d,r/30,g/30);q.setModelViewMatrix(d);q.requestRender();a=f;l=m}};this.handleMouseWheel=function(d){d=window.event||d;q.zoomBy((20*d.detail|d.deltaY|-d.wheelDeltaY)/b);if(d.preventDefault)d.preventDefault();else return!1}}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};
(function(t){t.GLUtility=function(q){this.getGLContext=function(){!b&&(b=k.getContext("webgl",{antialias:!0}))&&(b.enable(b.DEPTH_TEST),b.depthFunc(b.LESS));return b};this.clearColor=function(c,a,e,h){b.clearColor(c,a,e,h)};this.clear=function(){b.clear(b.COLOR_BUFFER_BIT)};this.compileShader=function(c,a){a=b.createShader(a);b.shaderSource(a,c);b.compileShader(a);if(!b.getShaderParameter(a,b.COMPILE_STATUS))throw"Shader compile failed with:"+b.getShaderInfoLog(a);return a};this.createProgram=function(c,
a,e){const h=b.createProgram();c=this.compileShader(c,b.VERTEX_SHADER);a=this.compileShader(a,b.FRAGMENT_SHADER);b.attachShader(h,c);b.attachShader(h,a);e&&b.transformFeedbackVaryings(h,e,b.SEPARATE_ATTRIBS);b.linkProgram(h);return h};this.loadData=function(c,a){b.bindBuffer(b.ARRAY_BUFFER,c);b.bufferData(b.ARRAY_BUFFER,a,b.STATIC_DRAW)};this.createBuffer=function(c){var a=b.createBuffer();this.loadData(a,c);return a};this.loadIndices=function(c,a){b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c);b.bufferData(b.ELEMENT_ARRAY_BUFFER,
a,b.STATIC_DRAW)};this.createIndexBuffer=function(c){var a=b.createBuffer();this.loadIndices(a,c);return a};this.getAttribLocation=function(c,a){c=b.getAttribLocation(c,a);-1===c&&alert("Can not find attribute "+a+".");return c};this.bindBuffer=function(c,a,e,h,l,d){b.bindBuffer(b.ARRAY_BUFFER,c);b.enableVertexAttribArray(a);b.vertexAttribPointer(a,e,h,!1,l,d)};this.loadTexture=function(c,a,e){var h=b.createTexture(),l=new Image;l.onload=function(){this.onTextureLoaded(l,h,a,e)}.bind(this);l.src=
c;return h};this.onTextureLoaded=function(c,a,e,h){b.activeTexture(b.TEXTURE0+e);b.bindTexture(b.TEXTURE_2D,a);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,c);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR_MIPMAP_NEAREST);b.generateMipmap(b.TEXTURE_2D);h()};this.bindTexture=function(c,a,e,h){b.activeTexture(b.TEXTURE0+e);b.bindTexture(b.TEXTURE_2D,a);b.uniform1i(h,e)};this.generateModelViewMatrix=function(c){return new Float32Array([1,
0,0,0,0,1,0,0,0,0,1,0,c,0,0,1])};this.generatePerspectiveMatrix=function(c,a,e,h){return new Float32Array([e/c,0,0,0,0,e/a,0,0,0,0,-(h+e)/(h-e),-1,0,0,-2*h*e/(h-e),0])};this.generateOrthographicMatrix=function(c,a,e,h){return new Float32Array([1/c,0,0,0,0,1/a,0,0,0,0,-2/(h-e),0,0,0,-(h+e)/(h-e),1])};this.getUniformLocation=function(c,a){c=b.getUniformLocation(c,a);-1===c&&alert("Can not find uniform"+a+".");return c};this.loadUniform3f=function(c,a,e,h,l,d){a=c.getUniformLocation(a,e);-1===a?alert("Can not find uniform"+
e+"."):c.uniform3f(a,h,l,d)};this.loadUniform4f=function(c,a,e,h,l,d){c=b.getUniformLocation(c,a);-1===c?alert("Can not find uniform"+a+"."):b.uniform4f(c,e,h,l,d)};this.loadUniformMatrix3fv=function(c,a,e){c=b.getUniformLocation(c,a);-1===c?alert("Can not find uniform"+a+"."):b.uniformMatrix3fv(c,!1,e)};this.loadUniformMatrix4fv=function(c,a,e){c=b.getUniformLocation(c,a);-1===c?alert("Can not find uniform"+a+"."):b.uniformMatrix4fv(c,!1,e)};this.getXYRotationMatrix=function(c,a){const e=Math.cos(c),
h=Math.cos(a);c=Math.sin(c);a=Math.sin(a);return[h,c*a-e*a,0,0,e,c,0,a,-h*c,e*h,0,0,0,0,1]};this.rotateBy=function(c,a,e){var h=Math.cos(a),l=Math.cos(e);a=Math.sin(a);var d=Math.sin(e),f=a*d,m=l*a,g=h*d,r=h*l;e=c[0];var n=c[1];var p=c[2];c[0]=e*l+p*d;c[1]=e*f+n*h-p*m;c[2]=-e*g+n*a+p*r;e=c[4];n=c[5];p=c[6];c[4]=e*l+p*d;c[5]=e*f+n*h-p*m;c[6]=-e*g+n*a+p*r;e=c[8];n=c[9];p=c[10];c[8]=e*l+p*d;c[9]=e*f+n*h-p*m;c[10]=-e*g+n*a+p*r;e=c[12];n=c[13];p=c[14];c[12]=e*l+p*d;c[13]=e*f+n*h-p*m;c[14]=-e*g+n*a+p*r};
this.extractRotationPart=function(c,a){a.set(c.subarray(0,3));a.set(c.subarray(4,7),3);a.set(c.subarray(8,11),6);return a};var k=q;var b=this.getGLContext()}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};(function(t){t.Color=function(q,k,b,c){var a,e,h,l;this.setRed=function(d){a=d;return this};this.getRed=function(){return a};this.setGreen=function(d){e=d;return this};this.getGreen=function(){return e};this.setBlue=function(d){h=d;return this};this.getBlue=function(){return h};this.setAlpha=function(d){l=d;return this};this.getAlpha=function(){return l};this.setRed(q).setGreen(k).setBlue(b).setAlpha(c)}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.geometry=window.vizit.geometry||{};
(function(t){t.Surface=function(q,k){var b=k;var c=q;var a=new Float32Array(3*q);var e=new Uint16Array(k);var h=new Float32Array(3*q);this.setNindices=function(l){b=l};this.getNindices=function(){return b};this.setNvertices=function(l){c=l};this.getNvertices=function(){return c};this.setVerticies=function(l){a=l};this.getVertices=function(){return a};this.setIndices=function(l){e=l};this.getIndices=function(){return e};this.setNormals=function(l){h=l};this.getNormals=function(){return h}};t.Shapes=
{SPHERE:{value:"sphere"},SQUARE:{value:"square"},CYLINDER:{value:"cylinder"},LINE_SEGMENT:{value:"line segment"}};t.VertexRegistry=function(){var q={};this.registerVertices=function(k,b){if(q.hasOwnProperty(k))throw"Vertex buffers already registered for "+k+".";q[k]=b};this.hasVertices=function(k){return q.hasOwnProperty(k)};this.retrieveVertices=function(k){return q[k]}};t.vertexRegistry=new t.VertexRegistry;t.Square=function(){var q=t.Shapes.SQUARE;var k=[-.5,.5,0,.5,.5,0,.5,-.5,0,-.5,-.5,0];var b=
[0,0,1];this.getNindices=function(){return 6};this.computeGeometry=function(c,a){var e=c.getVertices();var h=c.getNormals();var l=c.getIndices();for(var d=0;12>d;d++)e[d]=a[d],h[d]=b[d%3];l[0]=0;l[1]=3;l[2]=1;l[3]=3;l[4]=2;l[5]=1;c.setNvertices(12);c.setNindices(6)};this.getVertexBuffers=function(c){if(this.hasVertices(q.value))var a=this.retrieveVertices(q.value);else{var e=new t.Surface(4,6);a={};this.computeGeometry(e,k);a.vertices=c.createBuffer(e.getVertices());a.normals=c.createBuffer(e.getNormals());
a.indices=c.createIndexBuffer(e.getIndices());this.registerVertices(q.value,a)}return a}};t.Square.prototype=t.vertexRegistry;t.LineSegment=function(){const q=t.Shapes.LINE_SEGMENT;this.getBaseHeight=function(){return 1};this.getBaseHalfWidth=function(){return.5};this.getShape=function(){return q}};t.Cylinder=function(){var q=t.Shapes.CYLINDER;this.getBaseHeight=function(){return 1};this.getBaseRadius=function(){return 1};this.getShape=function(){return q};this.getNindices=function(){return 126};
this.computeGeometry=function(k){var b;var c=k.getVertices();var a=k.getNormals();var e=k.getIndices();c[0]=0;a[0]=0;c[1]=0;a[1]=0;c[2]=.5;a[2]=1;e[0]=0;var h=94;e[h]=h;h*=3;c[h]=0;a[h++]=0;c[h]=0;a[h++]=0;c[h]=-.5;a[h]=-1;for(b=1;31>=b;b++){h=2*(b-1)*Math.PI/30;e[b]=b;var l=3*b;c[l]=1*Math.cos(h);a[l++]=0;c[l]=1*Math.sin(h);a[l++]=0;c[l]=.5;a[l]=1}for(b=1;31>=b;b++)l=3*b,h=b+90+4,e[h]=h,h*=3,c[h]=c[l++],a[h++]=0,c[h]=c[l],a[h++]=0,c[h]=-.5,a[h]=-1;l=3;h=285;var d=96;for(b=0;30>=b;b++)e[d/3]=d/3,
c[d]=c[l],a[d++]=c[l++]/1,c[d]=c[l],a[d++]=c[l++]/1,c[d]=c[l],a[d++]=c[l++]/1,e[d/3]=d/3,c[d]=c[h],a[d++]=c[h++]/1,c[d]=c[h],a[d++]=c[h++]/1,c[d]=c[h],a[d++]=c[h++]/1;k.setNvertices(378);k.setNindices(126)};this.getVertexBuffers=function(k){if(this.hasVertices(q.value))var b=this.retrieveVertices(q.value);else{var c=new t.Surface(126,126);b={};this.computeGeometry(c);b.vertices=k.createBuffer(c.getVertices());b.normals=k.createBuffer(c.getNormals());b.indices=k.createIndexBuffer(c.getIndices());this.registerVertices(q.value,
b)}return b}};t.Cylinder.prototype=t.vertexRegistry;t.Sphere=function(){var q=t.Shapes.SPHERE;this.getIntrinsicRadius=function(){return 30};this.getShape=function(){return q};this.getNindices=function(){return 5400};this.computeGeometry=function(k,b,c,a){var e,h;var l=k.getVertices();var d=h=0;var f=k.getNormals();for(e=0;e<=c;e++){var m=e*Math.PI/c;var g=Math.sin(m);var r=Math.cos(m);for(m=0;m<=a;m++){var n=2*m*Math.PI/a;var p=Math.sin(n);n=Math.cos(n);p*=g;var v=r;n*=g;f[d]=p;l[d++]=b*p;f[d]=v;
l[d++]=b*v;f[d]=n;l[d++]=b*n}}k.setNvertices(--d);f=k.getIndices();for(e=0;e<c;e++)for(m=0;m<a;m++)b=e*(a+1)+m,d=b+a+1,f[h++]=b,f[h++]=d,f[h++]=b+1,f[h++]=d,f[h++]=d+1,f[h++]=b+1;k.setNindices(--h)};this.getVertexBuffers=function(k){if(this.hasVertices(q.value))var b=this.retrieveVertices(q.value);else{var c=new t.Surface(961,5400);b={};this.computeGeometry(c,30,30,30);b.vertices=k.createBuffer(c.getVertices());b.normals=k.createBuffer(c.getNormals());b.indices=k.createIndexBuffer(c.getIndices());
this.registerVertices(q.value,b)}return b}};t.Sphere.prototype=t.vertexRegistry})(window.vizit.geometry);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.SurfaceRenderer=function(q){var k,b,c,a,e,h,l,d,f,m;this.createProgram=function(p){p=g.createProgram("attribute vec3 normal;attribute vec3 position;uniform   vec3 ambientLighting;uniform   vec3 directionalLighting;uniform   vec3 directionalColor;uniform   mat4 modelViewMatrix;uniform   mat4 globalModelViewMatrix;uniform   mat3 normalMatrix;uniform   mat4 projectionMatrix;varying   vec3 lighting;void main(void){  gl_Position = projectionMatrix * globalModelViewMatrix * modelViewMatrix * vec4(position, 1.0);  vec3  transformedNormal         = normalMatrix * normal;  float directionalLightWeighting = max(dot(transformedNormal, directionalLighting), 0.0);  lighting                        = ambientLighting + directionalColor * directionalLightWeighting;}","precision mediump float;uniform vec4 surfaceColor;varying vec3 lighting;void main(void){  gl_FragColor = vec4(surfaceColor.rgb * lighting, surfaceColor.a);}");
k=g.getUniformLocation(p,"ambientLighting");b=g.getUniformLocation(p,"directionalLighting");c=g.getUniformLocation(p,"directionalColor");e=g.getUniformLocation(p,"modelViewMatrix");a=g.getUniformLocation(p,"globalModelViewMatrix");h=g.getAttribLocation(p,"normal");l=g.getUniformLocation(p,"normalMatrix");d=g.getAttribLocation(p,"position");f=g.getUniformLocation(p,"projectionMatrix");m=g.getUniformLocation(p,"surfaceColor");return p};this.getAmbientLightingHandle=function(){return k};this.getDirectionalLightingHandle=
function(){return b};this.getDirectionalColorHandle=function(){return c};this.getModelViewMatrixHandle=function(){return e};this.getGlobalModelViewMatrixHandle=function(){return a};this.getNormalHandle=function(){return h};this.getNormalMatrixHandle=function(){return l};this.getPositionHandle=function(){return d};this.getProjectionMatrixHandle=function(){return f};this.getSurfaceColorHandle=function(){return m};this.render=function(p,v,A,x){var w=x.length;if(0<w)for(r.useProgram(n),r.uniformMatrix4fv(a,
!1,v),r.uniformMatrix3fv(l,!1,A),r.uniformMatrix4fv(f,!1,p),r.uniform3f(k,.3,.3,.3),r.uniform3f(b,1,1,1),r.uniform3f(c,.4,.4,.4),p=0;p<w;p++)x[p].render(g,this)};var g=q;var r=g.getGLContext();var n=this.createProgram()}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};(function(t){t.IndexedVertices=function(q,k){let b,c;this.getNindices=function(){return b};this.getNvertices=function(){return c};this.getVertices=function(){return a};this.push=function(h){a[c++]=h};this.getIndices=function(){return e};this.pushIndex=function(h){e[b++]=h};this.reset=function(){c=b=0};const a=new Float32Array(q),e=new Uint16Array(k);this.reset()}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};(function(t){t.VectorFunction=function(q,k){var b;this.setModified=function(a){c=a};this.isModified=function(){return c};this.setName=function(a){b=a};this.getName=function(){return b};this.shouldStop=function(a,e,h,l){return 0>a*Q&&4>r2};this.getField=new Function(q,k);var c=!0}})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};
(function(t){t.CombinedVectorFunctions=function(){var q;this.addFunction=function(a){b=c.push(a);return this};for(var k=0;k<arguments.length;k++)this.addFunction(arguments[k]);this.getNfunctions=function(){return b};this.getFunctions=function(){return c};this.isModified=function(){var a=!1;for(k=0;k<b&&!a;k++)a=a||c[k].isModified();return a};this.setModified=function(a){for(k=0;k<b;k++)c[k].setModified(a)};this.setStartPoints=function(a){q=a};this.getStartPoints=function(){return q};this.getField=
function(a,e,h){for(var l,d=[0,0,0],f=0;f<b;f++)l=c[f].getField(a,e,h),d[0]+=l[0],d[1]+=l[1],d[2]+=l[2];return d};this.shouldStop=function(a,e,h,l){for(a=0;a<b;a++);return!1};var b=0;var c=[]}})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};
(function(t){t.LineRenderer=function(q){this.createProgram=function(){const a=k.createProgram("attribute vec3  current;attribute vec3  other;attribute float normalOffset;attribute float parallelOffset;uniform   vec2  resolution;uniform   mat4  modelViewMatrix;uniform   mat4  projectionMatrix;void main(){  mat4 projModelView    = projectionMatrix * modelViewMatrix;  vec4 currentProjected = projModelView * vec4(current, 1.0);  vec4 otherProjected   = projModelView * vec4(other, 1.0);  vec2 currentScreen       = currentProjected.xy / currentProjected.w;  vec2 otherScreen        = otherProjected.xy / otherProjected.w;  vec2 dir              = otherScreen - currentScreen;  vec2 normal           = (dir == vec2(0.0, 0.0) ? vec2(0.0, 0.0) : normalize(vec2(-dir.y, dir.x)));  float originalLength  = distance(current, other);  float screenLength    = length(dir);  vec4 offset = vec4(normal*normalOffset, 0.0, 0.0);  offset     += screenLength == 0.0 ? vec4(0.0, 0.0, 0.0, 0.0)                                    : vec4(dir * parallelOffset / screenLength, 0.0, 0.0);  offset.xy            /= resolution * currentProjected.w;  gl_Position = currentProjected + offset;}","precision mediump float;uniform   vec4 color;void main(){    gl_FragColor = color;}"),
e=k.getAttribLocation(a,"current"),h=k.getAttribLocation(a,"other"),l=k.getAttribLocation(a,"normalOffset"),d=k.getAttribLocation(a,"parallelOffset"),f=k.getUniformLocation(a,"resolution"),m=k.getUniformLocation(a,"color"),g=k.getUniformLocation(a,"modelViewMatrix"),r=k.getUniformLocation(a,"projectionMatrix");return{program:a,currentHandle:e,otherHandle:h,normalOffsetHandle:l,parallelOffsetHandle:d,resolutionHandle:f,colorHandle:m,modelViewMatrixHandle:g,projectionMatrixHandle:r}};this.drawIndexedLines=
function(a,e,h,l){const d=new Float32Array(2);d[0]=b.drawingBufferWidth;d[1]=b.drawingBufferHeight;const f=t.LineRenderer.FLOATS_PER_LOCATION,m=t.LineRenderer.FLOATS_PER_OFFSET,g=t.LineRenderer.FLOATS_PER_VERTEX*Float32Array.BYTES_PER_ELEMENT;b.useProgram(c.program);b.uniform4fv(c.colorHandle,h);b.uniformMatrix4fv(c.modelViewMatrixHandle,!1,e);b.uniformMatrix4fv(c.projectionMatrixHandle,!1,a);b.uniform2fv(c.resolutionHandle,d);e=l.length;for(h=0;h<e;h++)a=l[h],k.bindBuffer(a.vertices,c.currentHandle,
f,b.FLOAT,g,0),k.bindBuffer(a.vertices,c.otherHandle,f,b.FLOAT,g,f*Float32Array.BYTES_PER_ELEMENT),k.bindBuffer(a.vertices,c.normalOffsetHandle,m,b.FLOAT,g,2*f*Float32Array.BYTES_PER_ELEMENT),k.bindBuffer(a.vertices,c.parallelOffsetHandle,m,b.FLOAT,g,2*f*Float32Array.BYTES_PER_ELEMENT+m*Float32Array.BYTES_PER_ELEMENT),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a.indices),b.drawElements(b.TRIANGLES,a.nindices,b.UNSIGNED_SHORT,0)};const k=q,b=k.getGLContext(),c=this.createProgram()};t.LineRenderer.FLOATS_PER_LOCATION=
3;t.LineRenderer.LOCATIONS_PER_VERTEX=2;t.LineRenderer.FLOATS_PER_OFFSET=1;t.LineRenderer.OFFSETS_PER_VERTEX=2;t.LineRenderer.FLOATS_PER_VERTEX=t.LineRenderer.LOCATIONS_PER_VERTEX*t.LineRenderer.FLOATS_PER_LOCATION+t.LineRenderer.OFFSETS_PER_VERTEX*t.LineRenderer.FLOATS_PER_OFFSET;t.LineRenderer.VERTICES_PER_SEGMENT=4;t.LineRenderer.FLOATS_PER_SEGMENT=t.LineRenderer.VERTICES_PER_SEGMENT*t.LineRenderer.FLOATS_PER_VERTEX;t.LineRenderer.VERTICES_PER_ARROW=8})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};
(function(t){t.SimpleVectorField=function(q,k){this.setLineWidth=function(g){l.setLineWidth(g);return this};this.getLineWidth=function(){l.getLineWidth()};this.setArrowHeadWidth=function(g){l.setArrowHeadWidth(g);return this};this.getArrowHeadWidth=function(){return l.getArrowHeadWidth()};this.setArrowHeadSize=function(g){l.setArrowHeadSize(g);return this};this.getArrowHeadSize=function(){return l.getArrowHeadSize()};this.setArrowSize=function(g){l.setArrowSize(g);return this};this.getArrowSize=function(){return l.getArrowSize()};
this.setColor=function(g){b=g;return this};this.getColor=function(){return b};this.getGlUtility=function(){return h};this.setMaxVectors=function(g){l.setMaxVectors(g);return this};this.getMaxVectors=function(){return l.getMaxVectors()};this.setModelViewMatrix=function(g){f=g;return this};this.getModelViewMatrix=function(){return f};this.setProjectionMatrix=function(g){m=g;return this};this.setStartPoints=function(g){l.setStartPoints(g);return this};this.addStartPoints=function(g){l.addStartPoints(g);
return this};this.getStartPoints=function(){return l.getStartPoints()};this.setupVectorField=function(){let g,r=[];g={};if("function"===typeof a.getStartPoints){var n=a.getStartPoints(0,2);"undefined"!==typeof n&&0<n.length&&l.addStartPoints(n)}n=l.generateField();g.vertices=h.createBuffer(n.getVertices());g.indices=h.createIndexBuffer(n.getIndices());g.nindices=n.getNindices();r[0]=g;return r};this.render=function(){c&&(a.isModified()&&(e=this.setupVectorField()),h.clear(),d.drawIndexedLines(m,f,
b,e),a.setModified(!1))};this.start=function(){c=!0;this.render()};let b=new Float32Array([.8,.3,.3,1]),c=!1;const a=k;let e;const h=q.getGlUtility(),l=new vizit.vectorfield.VectorFieldGenerator(a),d=new vizit.vectorfield.LineRenderer(h);h.clearColor(0,0,0,0);let f=q.getModelViewMatrix(),m=q.getProjectionMartix();q.registerRenderer(this)}})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};(function(t){t.CountdownLatch=function(q,k){var b=q;this.countDown=function(){b--;0>=b&&k()}}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.ChargeGenerator=function(q){var k,b,c;this.setCharges=function(f){k=f;if(!b||a*k.getCharges().length>b.byteLength)b=new ArrayBuffer(a*k.getCharges().length)};this.getCharges=function(){return k};this.getChargesArray=function(){return b};this.getNcharges=function(){return c};this.generate=function(){var f=k.getCharges();c=f.length;var m=new Float32Array(b);var g=new Uint8Array(b);for(var r=0;r<c;r++){var n=f[r];var p=n.getPosition();var v=5*r;m[v++]=p[0];m[v++]=p[1];m[v++]=p[2];m[v++]=
e;v=16+20*r;n=0<n.getCharge()?l:0>n.getCharge()?h:d;g[v++]=n[0];g[v++]=n[1];g[v++]=n[2];g[v++]=n[3]}return b};var a=3*Float32Array.BYTES_PER_ELEMENT+Float32Array.BYTES_PER_ELEMENT+4*Uint8Array.BYTES_PER_ELEMENT;var e=16;var h=[204,13,13,255];var l=[13,13,204,255];var d=[13,13,13,51]}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.ChargeRenderer=function(q){var k,b,c,a,e;this.createProgram=function(){var f=h.createProgram("precision highp float;attribute vec3  position;attribute vec4  color;attribute float size;uniform   mat4  modelViewMatrix;uniform   mat4  projectionMatrix;varying vec4 vColor;void main(){    gl_Position  = projectionMatrix * modelViewMatrix * vec4(position, 1);    gl_PointSize = size;    vColor       = color;}","precision lowp float;varying vec4 vColor; void main() {   float dist = distance( vec2(0.5,0.5), gl_PointCoord );   if ( dist > 0.5 )     discard;   gl_FragColor = vColor; }");
k=h.getAttribLocation(f,"color");b=h.getUniformLocation(f,"modelViewMatrix");c=h.getAttribLocation(f,"position");a=h.getUniformLocation(f,"projectionMatrix");e=h.getAttribLocation(f,"size");return f};this.render=function(f,m,g,r){r=r.getNcharges();0<r&&(l.useProgram(d),l.uniformMatrix4fv(b,!1,m),l.uniformMatrix4fv(a,!1,f),l.bindBuffer(l.ARRAY_BUFFER,g),l.enableVertexAttribArray(k),l.enableVertexAttribArray(c),l.enableVertexAttribArray(e),l.vertexAttribPointer(c,3,l.FLOAT,!1,20,0),l.vertexAttribPointer(e,
1,l.FLOAT,!1,20,12),l.vertexAttribPointer(k,4,l.UNSIGNED_BYTE,!0,20,16),l.drawArrays(l.POINTS,0,r))};var h=q;var l=h.getGLContext();var d=this.createProgram()}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.FieldLineVBO=function(q,k){this.disable=function(){this.enabled=!1};this.isEnabled=function(){return this.enabled};this.reload=function(b,c){b.loadData(this.fieldLineBufferHandle,c.getPoints());this.npoints=c.getNpoints();c=c.getArrows();b.loadData(this.fieldDirectionBufferHandle,c.vertices);b.loadIndices(this.fieldDirectionIndices,c.indices);this.narrows=c.narrows;this.enabled=!0};this.fieldLineBufferHandle=q.createBuffer(k.getPoints());this.npoints=k.getNpoints();k=k.getArrows();
this.fieldDirectionBufferHandle=q.createBuffer(k.vertices);this.narrows=k.narrows;this.fieldDirectionIndices=q.createIndexBuffer(k.indices);this.enabled=!0}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.FieldLine=function(q){function k(n,p,v,A,x,w,y){m[g++]=n;m[g++]=p;m[g++]=v;m[g++]=A;m[g++]=x;m[g++]=w;m[g++]=y}function b(n,p,v){h[e++]=n.x;h[e++]=n.y;h[e++]=n.z;h[e++]=p.x;h[e++]=p.y;h[e++]=p.z;h[e++]=v}let c,a,e,h,l,d,f,m,g,r;this.setMaxPoints=function(n){n!==l&&(l=n,m=new Float32Array(t.FieldLine.FLOATS_PER_SEGMENT*(l-1)),h=new Float32Array(l),c=new Uint16Array(l),this.reset());return this};this.getMaxPoints=function(){return l};this.pushPoint=function(n,p,v){0<f&&(k(r.x,r.y,r.z,
n,p,v,1),k(r.x,r.y,r.z,n,p,v,-1),k(n,p,v,r.x,r.y,r.z,-1),k(n,p,v,r.x,r.y,r.z,1));r={x:n,y:p,z:v};f++};this.getPoints=function(){return m};this.getNpoints=function(){return f};this.pushArrow=function(n,p){b(n,p,1);b(n,p,0);b(p,p,0);b(n,p,-1);n=d*t.FieldLine.VERTICES_PER_ARROW;c[a++]=n;c[a++]=n+1;c[a++]=n+2;c[a++]=n+2;c[a++]=n+1;c[a++]=n+3;d++};this.getArrows=function(){return{vertices:h.slice(0,vizit.electricfield.FieldLine.VERTICES_PER_ARROW*vizit.electricfield.FieldLine.FLOATS_PER_VERTEX*d),indices:c.slice(0,
vizit.electricfield.FieldLine.LOCATIONS_PER_VERTEX*vizit.electricfield.FieldLine.FLOATS_PER_LOCATION*d),narrows:d}};this.getNarrows=function(){return d};this.reset=function(){g=f=d=e=a=0};this.setMaxPoints(q)};t.FieldLine.FLOATS_PER_LOCATION=3;t.FieldLine.LOCATIONS_PER_VERTEX=2;t.FieldLine.FLOATS_PER_DIRECTION=1;t.FieldLine.FLOATS_PER_VERTEX=t.FieldLine.LOCATIONS_PER_VERTEX*t.FieldLine.FLOATS_PER_LOCATION+t.FieldLine.FLOATS_PER_DIRECTION;t.FieldLine.VERTICES_PER_SEGMENT=4;t.FieldLine.FLOATS_PER_SEGMENT=
t.FieldLine.VERTICES_PER_SEGMENT*t.FieldLine.FLOATS_PER_VERTEX;t.FieldLine.VERTICES_PER_ARROW=4})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.FieldLineGenerator=function(q,k){let b,c,a,e,h,l,d;this.setCharges=function(f){h=f;return this};this.getCharges=function(){return h};this.getArrows=function(){return arrows};this.setMaxPoints=function(f){f>maxpoints&&(l=new vizit.electricfield.FieldLine(d));d=f;return this};this.getMaxPoints=function(){return d};this.setArrowLength=function(f){b=f;return this};this.getArrowLength=function(){return b};this.setArrowWidth=function(f){c=f;return this};this.getArrowWidth=function(){return c};
this.setArrowSpacing=function(f){a=f;return this};this.getArrowSpacing=function(){return a};this.setDs=function(f){e=f;return this};this.getDs=function(){return e};this.drawArrow=function(f,m,g,r,n,p,v,A){v.pushArrow({x:f-p*r[0]/n,y:m-p*r[1]/n,z:g-p*r[2]/n},{x:f,y:m,z:g})};this.generate=function(f,m,g,r){var n=0;var p=!1;var v=g;l.reset();for(g=0;g<d&&!p;g++){l.pushPoint(f,m,v);var A=h.getField(f,m,v);p=Math.sqrt(A[0]*A[0]+A[1]*A[1]+A[2]*A[2]);if(0===p)break;f+=r*A[0]/p*e;m+=r*A[1]/p*e;v+=r*A[2]/
p*e;n+=e;n>a&&(n=0,this.drawArrow(f,m,v,A,p,b,l,r));p=h.shouldStop(r,f,m,v)}return l};b=t.FieldLineGenerator.DEFAULT_ARROW_LENGTH;a=t.FieldLineGenerator.DEFAULT_ARROW_SPACING;e=k;d=q;l=new vizit.electricfield.FieldLine(d)};t.FieldLineGenerator.DEFAULT_ARROW_LENGTH=4;t.FieldLineGenerator.DEFAULT_ARROW_SPACING=24})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.FieldLineRenderer=function(q){let k=t.FieldLineRenderer.DEFAULT_LINE_WIDTH,b=t.FieldLineRenderer.DEFAULT_ARROW_WIDTH;this.setLineWidth=function(l){k=l;return this};this.getLineWidth=function(){return k};this.setArrowWidth=function(l){b=l;return this};this.getArrowWidth=function(){return b};this.createProgram=function(l){const d=l.createProgram("attribute vec3  current;attribute vec3  other;attribute float direction;uniform   float aspect;uniform   float halfWidth;uniform   mat4  modelViewMatrix;uniform   mat4  projectionMatrix;void main(){  mat4 projModelView    = projectionMatrix * modelViewMatrix;  vec4 currentProjected = projModelView * vec4(current, 1.0);  vec4 otherProjected   = projModelView * vec4(other, 1.0);  vec2 currentScreen    = currentProjected.xy / currentProjected.w;  currentScreen.x      *= aspect;  vec2 otherScreen      = otherProjected.xy / otherProjected.w;  otherScreen.x        *= aspect;  vec2 dir              = normalize(currentScreen - otherScreen);  vec2 normal           = vec2(-dir.y, dir.x);  normal               *= halfWidth;  normal.x             /= aspect;  vec4 offset = vec4(normal * direction, 0.0, 0.0);  gl_Position = currentProjected + offset;}","precision mediump float;void main(){  gl_FragColor = vec4(0.8,0.3,0.3,1.0);}"),
f=l.getAttribLocation(d,"current"),m=l.getAttribLocation(d,"direction"),g=l.getAttribLocation(d,"other"),r=l.getUniformLocation(d,"aspect"),n=l.getUniformLocation(d,"halfWidth"),p=l.getUniformLocation(d,"modelViewMatrix");l=l.getUniformLocation(d,"projectionMatrix");return{program:d,currentHandle:f,directionHandle:m,otherHandle:g,aspectHandle:r,halfWidthHandle:n,modelViewMatrixHandle:p,projectionMatrixHandle:l}};this.createArrowProgram=function(l){const d=l.createProgram("attribute vec3  current;attribute vec3  tip;attribute float direction;uniform   float aspect;uniform   float halfWidth;uniform   mat4  modelViewMatrix;uniform   mat4  projectionMatrix;varying vec3 vCurrent;void main(){  mat4 projModelView    = projectionMatrix * modelViewMatrix;  vec4 currentProjected = projModelView * vec4(current, 1.0);  vec4 tipProjected   =   projModelView * vec4(tip, 1.0);  vec2 currentScreen    = currentProjected.xy / currentProjected.w;  currentScreen.x      *= aspect;  vec2 tipScreen        = tipProjected.xy / tipProjected.w;  tipScreen.x          *= aspect;  vec2 dir              = currentScreen - tipScreen;  vec2 normal           = (dir == vec2(0.0, 0.0) ? vec2(0.0, 0.0) : normalize(vec2(-dir.y, dir.x)));  normal               *= halfWidth;  normal.x             /= aspect;  vec4 offset = (direction == 0.0 ?                             vec4(0.0, 0.0, 0.0, 0.0) :                              vec4((normal * direction / currentProjected.w) + dir/3.0, 0.0, 0.0));  gl_Position = currentProjected + offset;}",
"precision mediump float;void main(){  gl_FragColor = vec4(0.8,0.3,0.3,1.0);}"),f=l.getAttribLocation(d,"current"),m=l.getAttribLocation(d,"direction"),g=l.getAttribLocation(d,"tip"),r=l.getUniformLocation(d,"aspect"),n=l.getUniformLocation(d,"halfWidth"),p=l.getUniformLocation(d,"modelViewMatrix");l=l.getUniformLocation(d,"projectionMatrix");return{program:d,currentHandle:f,directionHandle:m,tipHandle:g,aspectHandle:r,halfWidthHandle:n,modelViewMatrixHandle:p,projectionMatrixHandle:l}};this.render=
function(l,d,f,m){const g=a.drawingBufferWidth/a.drawingBufferHeight,r=vizit.electricfield.FieldLine.FLOATS_PER_LOCATION,n=m.length,p=vizit.electricfield.FieldLine.FLOATS_PER_VERTEX*Float32Array.BYTES_PER_ELEMENT;if(0<n){a.useProgram(e.program);a.uniformMatrix4fv(e.modelViewMatrixHandle,!1,d);a.uniformMatrix4fv(e.projectionMatrixHandle,!1,l);a.uniform1f(e.aspectHandle,g);a.uniform1f(e.halfWidthHandle,k/a.drawingBufferHeight);for(var v=0;v<n;v++){f=m[v];if(!f.isEnabled())break;c.bindBuffer(f.fieldLineBufferHandle,
e.currentHandle,r,a.FLOAT,p,0);c.bindBuffer(f.fieldLineBufferHandle,e.otherHandle,r,a.FLOAT,p,r*Float32Array.BYTES_PER_ELEMENT);c.bindBuffer(f.fieldLineBufferHandle,e.directionHandle,1,a.FLOAT,p,2*r*Float32Array.BYTES_PER_ELEMENT);a.drawArrays(a.TRIANGLE_STRIP,0,4*(f.npoints-1))}a.useProgram(h.program);a.enableVertexAttribArray(h.tipHandle);a.enableVertexAttribArray(h.directionHandle);a.uniformMatrix4fv(h.modelViewMatrixHandle,!1,d);a.uniformMatrix4fv(h.projectionMatrixHandle,!1,l);a.uniform1f(h.aspectHandle,
g);a.uniform1f(h.halfWidthHandle,b/2/a.drawingBufferHeight);for(l=0;l<n;l++){f=m[l];if(!f.isEnabled())break;c.bindBuffer(f.fieldDirectionBufferHandle,h.currentHandle,r,a.FLOAT,p,0);c.bindBuffer(f.fieldDirectionBufferHandle,h.tipHandle,r,a.FLOAT,p,r*Float32Array.BYTES_PER_ELEMENT);c.bindBuffer(f.fieldDirectionBufferHandle,h.directionHandle,1,a.FLOAT,p,2*r*Float32Array.BYTES_PER_ELEMENT);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,f.fieldDirectionIndices);a.drawElements(a.TRIANGLES,6*f.narrows,a.UNSIGNED_SHORT,
0)}}};const c=q,a=c.getGLContext(),e=this.createProgram(c),h=this.createArrowProgram(c)};t.FieldLineRenderer.DEFAULT_LINE_WIDTH=3;t.FieldLineRenderer.DEFAULT_ARROW_WIDTH=5*t.FieldLineRenderer.DEFAULT_LINE_WIDTH})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};
(function(t){t.Cylinder=function(){var q;this.setColor=function(b){q=b};this.getColor=function(){return q};this.getCylinderModelView=function(b,c,a,e,h,l,d){var f=Math.sin(d);d=Math.cos(d);var m=Math.sin(l);l=Math.cos(l);var g=new Float32Array(16);g[0]=h*l*d;g[1]=h*d*m;g[2]=-h*f;g[3]=0;g[4]=-h*m;g[5]=h*l;g[6]=0;g[7]=0;g[8]=e*l*f;g[9]=e*m*f;g[10]=e*d;g[11]=0;g[12]=b;g[13]=c;g[14]=a;g[15]=1;return g};this.transformPoints=function(b,c,a,e){k[0]=b[0]*a;k[1]=b[1]*a;k[2]=b[2]*a;k[3]=b[3];k[4]=b[4]*a;k[5]=
b[5]*a;k[6]=b[6]*a;k[7]=b[7];k[8]=b[8]*c;k[9]=b[9]*c;k[10]=b[10]*c;k[11]=b[11];k[12]=b[12];k[13]=b[13];k[14]=b[14];k[15]=b[15];c=0;for(b=e.length;c<b;c++){a=e[c];var h=a[0];var l=a[1];var d=a[2];a[0]=k[0]*h+k[4]*l+k[8]*d+k[12];a[1]=k[1]*h+k[5]*l+k[9]*d+k[13];a[2]=k[2]*h+k[6]*l+k[10]*d+k[14]}return e};this.setupBuffers=function(b,c,a,e,h){var l=b.getGLContext();b.bindBuffer(a,c.getPositionHandle(),3,l.FLOAT,0,0);b.bindBuffer(e,c.getNormalHandle(),3,l.FLOAT,0,0);l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,
h)};this.drawCap=function(b,c,a){b.drawElements(b.TRIANGLE_FAN,c,b.UNSIGNED_SHORT,2*a)};this.drawSide=function(b,c,a){b.drawElements(b.TRIANGLE_STRIP,c,b.UNSIGNED_SHORT,2*a)};this.drawCylinder=function(b,c,a,e,h){b=b.getGLContext();b.uniformMatrix4fv(c.getModelViewMatrixHandle(),!1,a);h&&this.drawCap(b,e+2,0);this.drawSide(b,2*e+2,e+2);h&&this.drawCap(b,e+2,3*e+4)};this.fullRender=function(b,c,a,e,h,l,d){var f=b.getGLContext();var m=this.getBaseRadius();var g=this.getVertexBuffers(b);f.uniform4f(c.getSurfaceColorHandle(),
q.getRed(),q.getGreen(),q.getBlue(),q.getAlpha());var r=(this.getNindices()-6)/4;this.setupBuffers(b,c,g.vertices,g.normals,g.indices);k[3]=a[3];k[7]=a[7];k[8]=a[8]*e;k[9]=a[9]*e;k[10]=a[10]*e;k[11]=a[11];k[12]=a[12];k[13]=a[13];k[14]=a[14];k[15]=a[15];f.cullFace(f.FRONT);for(e=l;e>=h;e--)g=e/m,k[0]=a[0]*g,k[1]=a[1]*g,k[2]=a[2]*g,k[4]=a[4]*g,k[5]=a[5]*g,k[6]=a[6]*g,this.drawCylinder(b,c,k,r,d);f.cullFace(f.BACK);for(e=h;e<=l;e++)g=e/m,k[0]=a[0]*g,k[1]=a[1]*g,k[2]=a[2]*g,k[4]=a[4]*g,k[5]=a[5]*g,k[6]=
a[6]*g,this.drawCylinder(b,c,k,r,d)};this.translateBounds=function(b,c,a,e,h,l,d){var f=(c+h)/2;var m=(a+l)/2;var g=(e+d)/2;c-=f;a-=m;e-=g;h-=f;l-=m;d-=g;b.setTx(f).setTy(m).setTz(g).setX0(c).setY0(a).setZ0(e).setX1(h).setY1(l).setZ1(d)};this.sign=function(b){return 0>b?-1:1};this.zAxisRotation=function(b,c,a,e,h){var l=Math.atan2(h-a,e-c);c=-this.sign(e)*Math.sqrt(c*c+a*a);a=0;e=-c;h=0;b.setX0(c).setY0(a).setX1(e).setY1(h).setPhi(l)};this.yAxisRotation=function(b,c,a,e,h,l,d){a=Math.sqrt(c*c+a*a+
e*e);l=Math.acos(d/a);e=this.sign(d);d=e*a;h=c=0;b.setZ0(-e*a).setZ1(d).setX0(c).setX1(h).setTheta(l)};this.scale=function(b,c,a){var e=this.sign(a);c=a-c;b.setZ0(.5*-e).setZ1(.5*e).setHeight(c)};var k=new Float32Array(16)};t.Cylinder.prototype=new vizit.geometry.Cylinder})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.GaussianCylinder=function(q,k,b,c,a,e,h,l){this.setEnabled=function(y){f=vizit.utility.toBoolean(y)};this.isEnabled=function(){return f};this.setX=function(y){v=y;w[12]=v;return this};this.getX=function(){return v};this.setY=function(y){A=y;w[13]=A;return this};this.getY=function(){return A};this.setZ=function(y){x=y;w[14]=x;return this};this.getZ=function(){return x};this.setOrigin=function(y){this.setX(y[0]);this.setY(y[1]);return this.setZ(y[2])};this.getOrigin=function(){return[v,
A,x]};this.setR=function(y){n=y;return this};this.getR=function(){return n};this.setHeight=function(y){m=y;return this};this.getHeight=function(){return m};this.setTheta=function(y){p=y;return this};this.getTheta=function(){return p};this.setPhi=function(y){r=y;return this};this.getPhi=function(){return r};this.setName=function(y){g=y};this.getName=function(){return g};this.render=function(y,J){f&&this.fullRender(y,J,w,m,n,n,!0)};var d=new vizit.utility.Color(.5,.5,.5,.5);var f=!0;var m=c;var g=l;
var r=e;var n=a;var p=h;var v=q;var A=k;var x=b;this.setColor(d);var w=this.getCylinderModelView(v,A,x,this.getBaseHeight(),this.getBaseRadius(),r,p)};t.GaussianCylinder.prototype=new vizit.utility.Cylinder})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.GaussianSphere=function(q,k,b,c,a){var e;this.setColor=function(n){h=n};this.getColor=function(){return h};this.setEnabled=function(n){l=vizit.utility.toBoolean(n)};this.isEnabled=function(){return l};this.setX=function(n){m=n;return this};this.getX=function(){return m};this.setY=function(n){g=n;return this};this.getY=function(){return g};this.setZ=function(n){r=n;return this};this.getZ=function(){return r};this.setR=function(n){f=n;return this};this.getR=function(){return f};this.setName=
function(n){d=n};this.getName=function(){return d};this.getModelView=function(n){"undefined"===typeof n&&(n=1);"undefined"===typeof e?(e=new Float32Array(16),e[0]=n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=n,e[11]=0,e[12]=m,e[13]=g,e[14]=r,e[15]=1):(e[0]=n,e[5]=n,e[10]=n);return e};this.drawFullSurface=function(n,p,v,A,x,w){var y=n.getGLContext();n.bindBuffer(v,p.getPositionHandle(),3,y.FLOAT,0,0);n.bindBuffer(A,p.getNormalHandle(),3,y.FLOAT,0,0);y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,
x);y.drawElements(y.TRIANGLES,w,y.UNSIGNED_SHORT,0)};this.render=function(n,p){if(l){var v=n.getGLContext();var A=this.getIntrinsicRadius();var x=this.getVertexBuffers(n);v.uniformMatrix4fv(p.getModelViewMatrixHandle(),!1,this.getModelView(f/A));v.uniform4f(p.getSurfaceColorHandle(),h.getRed(),h.getGreen(),h.getBlue(),h.getAlpha());v.cullFace(v.FRONT);this.drawFullSurface(n,p,x.vertices,x.normals,x.indices,this.getNindices());v.cullFace(v.BACK);this.drawFullSurface(n,p,x.vertices,x.normals,x.indices,
this.getNindices())}};var h=new vizit.utility.Color(.5,.5,.5,.5);var l=!0;var d=a;var f=c;var m=q;var g=k;var r=b};t.GaussianSphere.prototype=new vizit.geometry.Sphere})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.ChargedCylinder=function(q,k,b,c,a,e,h,l,d,f,m,g){var r,n,p,v,A,x;this.setHeight=function(C){r=C;w=!0};this.getHeight=function(){return r};this.setTx=function(C){v=C;w=!0;return this};this.getTx=function(){return v};this.setTy=function(C){A=C;w=!0;return this};this.getTy=function(){return A};this.setTz=function(C){x=C;w=!0;return this};this.getTz=function(){return x};this.setX0=function(C){K=C;w=!0;return this};this.getX0=function(){return K};this.setY0=function(C){M=C;w=!0;return this};
this.getY0=function(){return M};this.setZ0=function(C){O=C;w=!0;return this};this.getZ0=function(){return O};this.setX1=function(C){S=C;w=!0;return this};this.getX1=function(){return S};this.setY1=function(C){W=C;w=!0;return this};this.getY1=function(){return W};this.setZ1=function(C){X=C;w=!0;return this};this.getZ1=function(){return X};this.setR0=function(C){E=C;w=!0;return this};this.getR0=function(){return E};this.setR1=function(C){F=C;w=!0;return this};this.getR1=function(){return F};this.setPhi=
function(C){n=C;w=!0;return this};this.getPhi=function(){return n};this.setTheta=function(C){p=C;w=!0;return this};this.getTheta=function(){return p};this.setNfieldLines=function(C){G=C;w=!0;return this};this.getNfieldLines=function(){return G};this.setModified=function(C){w=C;return this};this.isModified=function(){return w};this.setName=function(C){y=C;return this};this.getName=function(){return y};this.getStartPoints=function(){var C=[];if(0!==z+G){var I=this.sign(J);var N=Math.max(2,Math.round(Math.abs(J*
Math.PI*(F*F-E*E)*z*r)))+G;var R=(E+1)/F;var u=.707106781*(E+1)/F;var B=-.5;var L=1/(N-1);for(var H=0;H<N;H++)C.push([R,0,B,I]),C.push([-R,0,B,I]),C.push([0,R,B,I]),C.push([0,-R,B,I]),C.push([u,u,B,I]),C.push([u,-u,B,I]),C.push([-u,-u,B,I]),C.push([-u,u,B,I]),B+=L}return this.transformPoints(Y,r/this.getBaseHeight(),F/this.getBaseRadius(),C)};this.getNormal=function(C,I,N){var R={};var u=-((K-C)*U+(M-I)*T+(O-N)*D)/(P*P);var B=K+u*U;var L=M+u*T;u=O+u*D;R.x=C-B;R.y=I-L;R.z=N-u;return R};this.getField=
function(C,I,N){var R=Array(3);I=this.getNormal(C,I,N);N=Math.sqrt(I.x*I.x+I.y*I.y+I.z*I.z);C=2*(N<E?0:N<F?Math.PI*(N*N-E*E)*J:Math.PI*(F*F-E*E)*J)/N;R[0]=C*I.x/N;R[1]=C*I.y/N;R[2]=C*I.z/N;return R};this.render=function(C,I){this.fullRender(C,I,Y,r/this.getBaseHeight(),E/this.getBaseRadius(),F/this.getBaseRadius(),!1)};var w=!0;var y=g;var J="undefined"===typeof d?0:d;var z="undefined"===typeof f?0:f;var G="undefined"===typeof m?0:m;var E=h;var F=l;var K=q;var M=k;var O=b;var S=c;var W=a;var X=e;
h=0<J?new vizit.utility.Color(.05,.05,.8,.3):0>J?new vizit.utility.Color(.8,.05,.05,.3):new vizit.utility.Color(.5,.5,.5,.2);this.setColor(h);this.translateBounds(this,K,M,O,S,W,X);this.zAxisRotation(this,K,M,S,W);this.yAxisRotation(this,K,M,O,S,W,X);this.scale(this,O,X);K=q;M=k;O=b;S=c;W=a;X=e;var Y=this.getCylinderModelView(v,A,x,this.getBaseHeight(),this.getBaseRadius(),n,p);var U=S-K;var T=W-M;var D=X-O;var P=Math.sqrt(U*U+T*T+D*D)};t.ChargedCylinder.prototype=new vizit.utility.Cylinder})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.ChargedLine=function(q,k,b,c,a,e,h,l,d,f){var m,g,r,n,p,v;this.computeColor=function(D){return 0<D?new vizit.utility.Color(.05,.05,.8,.8):0>D?new vizit.utility.Color(.8,.05,.05,.8):new vizit.utility.Color(.5,.5,.5,.8)};this.setChargeDensity=function(D){A=D;x=!0;this.setColor(this.computeColor(A))};this.getChargeDensity=function(){return A};this.setHeight=function(D){m=D;x=!0};this.getHeight=function(){return m};this.setTx=function(D){n=D;x=!0;return this};this.getTx=function(){return n};
this.setTy=function(D){p=D;return this};this.getTy=function(){return p};this.setTz=function(D){v=D;x=!0;return this};this.getTz=function(){return v};this.setX0=function(D){E=D;x=!0;return this};this.getX0=function(){return E};this.setY0=function(D){F=D;x=!0;return this};this.getY0=function(){return F};this.setZ0=function(D){K=D;x=!0;return this};this.getZ0=function(){return K};this.setX1=function(D){M=D;x=!0;return this};this.getX1=function(){return M};this.setY1=function(D){O=D;x=!0;return this};
this.getY1=function(){return O};this.setZ1=function(D){S=D;x=!0;return this};this.getZ1=function(){return S};this.setR0=function(D){z=D;x=!0;return this};this.getR0=function(){return z};this.setR1=function(D){G=D;x=!0;return this};this.getR1=function(){return G};this.setPhi=function(D){g=D;x=!0;return this};this.getPhi=function(){return g};this.setTheta=function(D){r=D;x=!0;return this};this.getTheta=function(){return r};this.setNfieldLines=function(D){J=D;x=!0;return this};this.getNfieldLines=function(){return J};
this.setModified=function(D){x=D;return this};this.isModified=function(){return x};this.setName=function(D){w=D;return this};this.getName=function(){return w};this.getStartPoints=function(){var D=[];if(0!==y+J){var P=this.sign(A);var C=Math.max(2,Math.round(Math.abs(A*y*m)))+J;var I=-.5;var N=1/(C-1);for(var R=0;R<C;R++)D.push([1,0,I,P]),D.push([-1,0,I,P]),D.push([0,1,I,P]),D.push([0,-1,I,P]),D.push([.707106781,.707106781,I,P]),D.push([.707106781,-.707106781,I,P]),D.push([-.707106781,-.707106781,
I,P]),D.push([-.707106781,.707106781,I,P]),I+=N}return this.transformPoints(W,m/this.getBaseHeight(),(z+1)/this.getBaseRadius(),D)};this.getNormal=function(D,P,C){var I={};var N=-((E-D)*X+(F-P)*Y+(K-C)*U)/(T*T);var R=E+N*X;var u=F+N*Y;N=K+N*U;I.x=D-R;I.y=P-u;I.z=C-N;return I};this.getField=function(D,P,C){C=this.getNormal(D,P,C);var I=Math.sqrt(C.x*C.x+C.y*C.y+C.z*C.z);D=Array(3);P=2*A/I;D[0]=P*C.x/I;D[1]=P*C.y/I;D[2]=P*C.z/I;return D};this.render=function(D,P){this.fullRender(D,P,W,m,z,G,!1)};var A=
"undefined"===typeof h?0:h;this.setColor(this.computeColor(A));var x=!0;var w=f;var y="undefined"===typeof l?0:l;var J="undefined"===typeof d?0:d;var z=0;var G=3;var E=q;var F=k;var K=b;var M=c;var O=a;var S=e;this.translateBounds(this,E,F,K,M,O,S);this.zAxisRotation(this,E,F,M,O);this.yAxisRotation(this,E,F,K,M,O,S);this.scale(this,K,S);E=q;F=k;K=b;M=c;O=a;S=e;var W=this.getCylinderModelView(n,p,v,this.getBaseHeight(),this.getBaseRadius(),g,r);var X=M-E;var Y=O-F;var U=S-K;var T=Math.sqrt(X*X+Y*
Y+U*U)};t.ChargedLine.prototype=new vizit.utility.Cylinder})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.ChargedPlane=function(q,k,b,c,a,e,h,l,d,f,m,g,r,n,p,v){var A,x,w,y,J,z,G,E,F;this.setNfieldLines=function(u){X=u;K=!0;return this};this.getNfieldLines=function(){return X};this.setModified=function(u){K=u;return this};this.isModified=function(){return K};this.setName=function(u){M=u;return this};this.getName=function(){return M};this.calculateNormal=function(u){var B=Array(3);B[0]=(u[4]-u[1])*(u[11]-u[2])-(u[5]-u[2])*(u[10]-u[1]);B[1]=(u[5]-u[2])*(u[9]-u[0])-(u[3]-u[0])*(u[11]-u[2]);
B[2]=(u[3]-u[0])*(u[10]-u[1])-(u[4]-u[1])*(u[9]-u[0]);u=Math.sqrt(B[0]*B[0]+B[1]*B[1]+B[2]*B[2]);B[0]/=u;B[1]/=u;B[2]/=u;return B};this.adjustStartPoints=function(u){var B=u.length;for(var L=0;L<B;L++){var H=u[L];var Z=H[0];var aa=H[1];var V=H[2];H[0]=z+C*(y*Z*D+V*I)+R*(-J*aa*P+N*(-y*Z*I+V*D));H[1]=G+C*(J*aa*P+N*(y*Z*I-V*D))+R*(y*Z*D+V*I);H[2]=E+J*aa*N+P*(-y*Z*I+V*D)}return u};this.getStartPoints=function(){var u;var B=Math.abs(S*W)+X/Math.abs(y*J);var L=[];if(0<B){var H=Math.sqrt(1/B);B=H/Math.abs(y);
H/=Math.abs(J);var Z=!1;var aa=0<S?1:-1;var V=Math.min(-.5+B/2,.5);for(u=Math.min(-.5+H/2,.5);!Z;)L.push([V,u,.4,aa]),L.push([V,u,-.4,aa]),u+=H,.5<u?(u=.5-(u-.5),V+=B,H=-H):-.5>u&&(u=-.5-(u- -.5),V+=B,H=-H),Z=.5<V}return this.adjustStartPoints(L)};this.getField=function(u,B,L){var H=Array(3);u=(u-Y[0])*U[0]+(B-Y[1])*U[1]+(L-Y[2])*U[2];B=O*S;0===u&&(H[0]=0,H[1]=0,H[2]=0);0<u?(H[0]=B*U[0],H[1]=B*U[1],H[2]=B*U[2]):(H[0]=-B*U[0],H[1]=-B*U[1],H[2]=-B*U[2]);return H};this.translateBoundingBox=function(u){z=
(q+h)/2;G=(k+l)/2;E=(b+d)/2;u[0]-=z;u[1]-=G;u[2]-=E;u[3]-=z;u[4]-=G;u[5]-=E;u[6]-=z;u[7]-=G;u[8]-=E;u[9]-=z;u[10]-=G;u[11]-=E;return u};this.zAxisRotation=function(u){var B=u[3]-u[0];var L=u[0]-u[9];0===B||0===L?(w=0,F=0===B&&0===L?0===u[4]-u[1]?1:2:0===B?1:2):(B=(a-k)/B,L=(l-a)/L,Math.abs(B)<Math.abs(L)?(w=Math.atan(B),F=1):(w=Math.atan(L),F=2));C=Math.cos(w);R=Math.sin(w);for(var H=0;4>H;H++)L=C*u[3*H]-R*u[3*H+1],B=R*u[3*H]+C*u[3*H+1],u[3*H]=L,u[3*H+1]=B;return u};this.xAxisRotation=function(u,
B){if(1===B){B=u[1]-u[10];var L=u[2]-u[11]}else B=u[4]-u[1],L=u[5]-u[2];N=x=0;P=1;if(0!==L&&0!==B){x=Math.atan(L/B);N=Math.sin(x);P=Math.cos(x);for(var H=0;4>H;H++)B=P*u[3*H+1]-N*u[3*H+2],L=N*u[3*H+1]+P*u[3*H+2],u[3*H+1]=B,u[3*H+2]=L}return u};this.yAxisRotation=function(u,B){if(1===B){B=u[0]-u[9];var L=u[2]-u[11]}else B=u[3]-u[0],L=u[5]-u[2];I=A=0;D=1;if(0!==L){0!==B?(A=Math.atan(L/B),I=Math.sin(A),D=Math.cos(A)):(A=1.5707963267948966,I=1,D=0);for(var H=0;4>H;H++)B=D*u[3*H]+I*u[3*H+2],L=-I*u[3*H]+
D*u[3*H+2],u[3*H]=B,u[3*H+2]=L}return u};this.scaleBoundingbox=function(u,B){1===B?(y=u[0]-u[9],J=u[4]-u[1]):(y=u[3]-u[0],J=u[1]-u[10]);for(B=0;4>B;B++)0!==y&&(u[3*B]/=y),0!==J&&(u[3*B+1]/=J);return u};this.getModelView=function(){return T};this.drawFullSurface=function(u,B,L,H,Z,aa){var V=u.getGLContext();u.bindBuffer(L,B.getPositionHandle(),3,V.FLOAT,0,0);u.bindBuffer(H,B.getNormalHandle(),3,V.FLOAT,0,0);V.bindBuffer(V.ELEMENT_ARRAY_BUFFER,Z);V.drawElements(V.TRIANGLES,aa,V.UNSIGNED_SHORT,0)};this.render=
function(u,B){var L=u.getGLContext();var H=this.getVertexBuffers(u);0<S?L.uniform4f(B.getSurfaceColorHandle(),.05,.05,.8,.4):0>S?L.uniform4f(B.getSurfaceColorHandle(),.8,.05,.05,.4):L.uniform4f(B.getSurfaceColorHandle(),.5,.5,.5,.2);var Z=this.getNindices();L.uniformMatrix4fv(B.getModelViewMatrixHandle(),!1,this.getModelView());L.disable(L.CULL_FACE);this.drawFullSurface(u,B,H.vertices,H.normals,H.indices,Z);L.enable(L.CULL_FACE)};var K=!0;var M=v;var O=6.283185307179586;var S="undefined"===typeof r?
0:r;var W="undefined"===typeof n?0:n;var X="undefined"===typeof p?0:p;var Y=[q,k,b,c,a,e,h,l,d,f,m,g];c=Y.slice(0);var U=this.calculateNormal(Y);c=this.translateBoundingBox(c);c=this.zAxisRotation(c);c=this.xAxisRotation(c,F);c=this.yAxisRotation(c,F);c=this.scaleBoundingbox(c,F);var T=new Float32Array(16);var D=Math.cos(-A);var P=Math.cos(-x);var C=Math.cos(-w);var I=Math.sin(-A);var N=Math.sin(-x);var R=Math.sin(-w);T[0]=y*(D*C-I*N*R);T[1]=y*(D*R+C*I*N);T[2]=-y*P*I;T[3]=0;T[4]=-J*P*R;T[5]=J*P*C;
T[6]=J*N;T[7]=0;T[8]=N*R*D+I*C;T[9]=-(N*D*C-I*R);T[10]=D*P;T[11]=0;T[12]=z;T[13]=G;T[14]=E;T[15]=1};t.ChargedPlane.prototype=new vizit.geometry.Square})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.ChargedSphere=function(q,k,b,c,a,e,h,l,d){var f;let m;var g=!0;var r=d;var n=0;var p=c;var v=p*p;var A=v*p;var x=a;var w=x*x*x;var y="undefined"===typeof e?0:e;var J="undefined"===typeof h?0:h;m="undefined"===typeof l?0:l;this.setA=function(z){p=z;v=p*p;A=v*p;g=!0;return this};this.getA=function(){return p};this.setB=function(z){x=z;w=x*x*x;g=!0;return this};this.getB=function(){return x};this.setNindices=function(z){n=z;return this};this.setModified=function(z){g=z;return this};this.isModified=
function(){return g};this.setNfieldLines=function(z){m=z;g=!0;return this};this.getNfieldLines=function(){return m};this.setName=function(z){r=z;return this};this.getName=function(){return r};this.getStartPoints=function(){const z=0<y?1:0>y?-1:0,G=Math.round(J*y*z)+m,E=3.6/Math.sqrt(G);let F=0;const K=p+.2*(x-p),M=[];let O,S;for(var W=1;W<G;W++)S=-1+2*W/G,O=Math.sqrt(1-S*S),F+=E/O,M.push([Math.cos(F)*O*K+q,S*K+k,Math.sin(F)*O*K+b,z]);return M};this.getField=function(z,G,E){var F=[0,0,0];z-=q;G-=k;
E-=b;var K=z*z+G*G+E*E;if(K<=v)return F;var M=Math.sqrt(K);K=M>=p&&M<x?y*(M-A/K)/(w-A):y/K;F[0]=K*z/M;F[1]=K*G/M;F[2]=K*E/M;return F};this.getModelView=function(z){z||(z=1);f?(f[0]=z,f[5]=z,f[10]=z):(f=new Float32Array(16),f[0]=z,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=z,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=z,f[11]=0,f[12]=q,f[13]=k,f[14]=b,f[15]=1);return f};this.drawFullSurface=function(z,G,E,F,K,M){var O=z.getGLContext();z.bindBuffer(E,G.getPositionHandle(),3,O.FLOAT,0,0);z.bindBuffer(F,G.getNormalHandle(),
3,O.FLOAT,0,0);O.bindBuffer(O.ELEMENT_ARRAY_BUFFER,K);O.drawElements(O.TRIANGLES,M,O.UNSIGNED_SHORT,0)};this.render=function(z,G){var E;var F=z.getGLContext();var K=this.getIntrinsicRadius();var M=this.getVertexBuffers(z);0<y?F.uniform4f(G.getSurfaceColorHandle(),.05,.05,.8,.2):0>y?F.uniform4f(G.getSurfaceColorHandle(),.8,.05,.05,.2):F.uniform4f(G.getSurfaceColorHandle(),.5,.5,.5,.2);n=this.getNindices();F.cullFace(F.FRONT);for(E=x;E>=p;E--){var O=E/K;F.uniformMatrix4fv(G.getModelViewMatrixHandle(),
!1,this.getModelView(O));this.drawFullSurface(z,G,M.vertices,M.normals,M.indices,n)}F.cullFace(F.BACK);for(E=p;E<=x;E++)O=E/K,this.drawFullSurface(z,G,M.vertices,M.normals,M.indices,n),F.uniformMatrix4fv(G.getModelViewMatrixHandle(),!1,this.getModelView(O))}};t.ChargedSphere.prototype=new vizit.geometry.Sphere})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.Charge=function(q,k,b,c,a,e,h){var l;this.setCharge=function(p){d=vizit.utility.ensureNumber(p);f=!0};this.getCharge=function(){return d};this.setX=function(p){g[0]=vizit.utility.ensureNumber(p);f=!0};this.getX=function(){return g[0]};this.setY=function(p){g[1]=vizit.utility.ensureNumber(p);f=!0};this.getY=function(){return g[1]};this.setZ=function(p){g[2]=vizit.utility.ensureNumber(p);f=!0};this.getZ=function(){return g[2]};this.setPosition=function(p){g=p;f=!0};this.getPosition=function(){return g};
this.setNfieldLines=function(p){n=p;f=!0};this.getNfieldLines=function(){return n};this.setModified=function(p){f=p};this.isModified=function(){return f};this.setName=function(p){m=p};this.getName=function(){return m};this.getField=function(p,v,A){var x=[0,0,0];p-=g[0];v-=g[1];A-=g[2];l=p*p+v*v+A*A;if(0>=l)return x;var w=Math.sqrt(l);var y=d/l;x[0]=y*p/w;x[1]=y*v/w;x[2]=y*A/w;return x};this.getFieldSeedPointsI=function(p){var v=[];var A=0<d?1:0>d?-1:0;p=Math.round(p*d*A);var x=2/p;for(var w=0;w<p;w++){var y=
w*x-1+x/2;var J=Math.sqrt(1-y*y);var z=2.39996323*w;v.push([Math.cos(z)*J+g[0],y+g[1],Math.sin(z)*J+g[2],A])}return v};this.getStartPoints=function(p,v){var A=0<d?1:0>d?-1:0;var x=Math.round(r*d*A)+1+n;var w=3.6/Math.sqrt(x);p="undefined"===typeof p?Math.PI/2:p;v="undefined"===typeof v?1:v;var y=[];if(0<x)for(var J=1;J<x;J++){var z=-1+2*J/x;var G=Math.sqrt(1-z*z);p+=w/G;y.push([Math.cos(p)*G*v+g[0],z*v+g[1],Math.sin(p)*G*v+g[2],A])}return y};this.shouldStop=function(p,v,A,x){return 0>p*d&&4>l};var d=
c;var f=!0;var m=h;var g=[vizit.utility.ensureNumber(q),vizit.utility.ensureNumber(k),vizit.utility.ensureNumber(b)];var r="undefined"===typeof a?0:a;var n="undefined"===typeof e?0:e};t.Charges=function(){var q;this.addCharge=function(e){b=c.push(e);return this};for(var k=0;k<arguments.length;k++)this.addCharge(arguments[k]);this.getNcharges=function(){return b};this.getCharges=function(){return c};this.addDistribution=function(e){q=a.push(e);return this};this.getNdistributions=function(){return q};
this.getDistributions=function(){return a};this.chargesModified=function(){var e=!1;for(k=0;k<b&&!e;k++)e=e||c[k].isModified();return e};this.distributionsModified=function(){var e=!1;for(k=0;k<q&&!e;k++)e=e||a[k].isModified();return e};this.isModified=function(){return this.chargesModified()||this.distributionsModified()};this.setModified=function(e){for(k=0;k<b;k++)c[k].setModified(e);for(k=0;k<q;k++)a[k].setModified(e)};this.getStartPoints=function(e,h){var l=e,d=1.57079632679/(b+1),f=[];for(e=
0;e<b;e++){var m=c[e];f=f.concat(m.getStartPoints(l,h));l+=d}for(e=0;e<q;e++)f=f.concat(a[e].getStartPoints());return f};this.getField=function(e,h,l){for(var d,f=[0,0,0],m=0;m<b;m++)d=c[m],d=d.getField(e,h,l),f[0]+=d[0],f[1]+=d[1],f[2]+=d[2];for(m=0;m<q;m++)d=a[m].getField(e,h,l),f[0]+=d[0],f[1]+=d[1],f[2]+=d[2];return f};this.shouldStop=function(e,h,l,d){var f=!1;for(var m=0;m<b&&!f;m++)f=c[m],f=f.shouldStop(e,h,l,d);return f};var b=0;var c=[];var a=[]}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.ElectricField=function(q){var k,b;this.setLineWidth=function(w){v.setLineWidth(w);return this};this.getLineWidth=function(){return v.getLineWidth()};this.setArrowSpacing=function(w){p.setArrowSpacing(w);return this};this.getArrowSpacing=function(){return p.getArrowSpacing()};this.setArrowHeadSize=function(w){p.setArrowLength(w);return this};this.getArrowHeadSize=function(){return p.getArrowLength()};this.setArrowWidth=function(w){v.setArrowWidth(w);return this};this.getArrowWidth=function(){return v.getArrowWidth()};
this.setColor=function(w){c=w;return this};this.getColor=function(){return c};this.setCharges=function(w){b=w;n.setCharges(b);p.setCharges(b);return this};this.getCharges=function(){return b};this.addGaussianSurface=function(w){e.push(w);return this};this.getGaussianSurfaces=function(){return e};this.getGlUtility=function(){return m};this.setMaxVectors=function(w){h=w;return this};this.getMaxVectors=function(){return h};this.setModelViewMatrix=function(w){g=w;l=m.extractRotationPart(g,l);return this};
this.getModelViewMatrix=function(){return g};this.setProjectionMatrix=function(w){r=w;return this};this.addStartPoint=function(w,y,J,z){d.push([w,y,J,z]);return this};this.addStartPoints=function(w){d=d.concat(w)};this.getStartPoints=function(){return d};this.render=function(){if(f){var w=m.getGLContext();b.chargesModified()?(this.setupCharges(),this.setupFieldLines()):b.distributionsModified()&&this.setupFieldLines();m.clear();A.render(r,g,k,b);v.render(r,g,c,a);w.enable(w.BLEND);w.enable(w.CULL_FACE);
w.blendFunc(w.SRC_ALPHA,w.ONE_MINUS_SRC_ALPHA);x.render(r,g,l,b.getDistributions());w.disable(w.DEPTH_TEST);x.render(r,g,l,e);w.enable(w.DEPTH_TEST);w.disable(w.BLEND);w.disable(w.CULL_FACE);b.setModified(!1)}};this.setupCharges=function(w){k||(w=m.getGLContext(),k=w.createBuffer());w=n.generate();m.loadData(k,w)};this.setupFieldLines=function(){var w;var y=[];y=y.concat(b.getStartPoints(0,5));y=y.concat(d);var J=y.length;var z=a.length;var G=Math.min(J,z);for(w=0;w<G;++w){var E=y[w];E=p.generate(E[0],
E[1],E[2],E[3]);a[w].reload(m,E)}for(;w<z;++w)a[w].disable();for(;w<J;++w)E=y[w],E=p.generate(E[0],E[1],E[2],E[3]),a.push(new vizit.electricfield.FieldLineVBO(m,E))};this.start=function(){f=!0;this.render()};var c=new Float32Array([.8,.3,.3,1]);var a=[];var e=[];var h=5;var l=new Float32Array([1,0,0,0,1,0,0,0,1]);var d=[];var f=!1;const m=q.getGlUtility();m.clearColor(0,0,0,0);let g=q.getModelViewMatrix(),r=q.getProjectionMartix();q.registerRenderer(this);const n=new vizit.electricfield.ChargeGenerator,
p=new vizit.electricfield.FieldLineGenerator(3E3,.6),v=new vizit.electricfield.FieldLineRenderer(m),A=new vizit.electricfield.ChargeRenderer(m),x=new vizit.electricfield.SurfaceRenderer(m)}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};
(function(t){t.VectorFieldGenerator=function(q){let k;this.setStartPoints=function(g){h=g;return this};this.addStartPoints=function(g){h.push(...g);return this};this.getStartPoints=function(){return h};this.setMaxVectors=function(g){f=g;return this};this.getMaxVectors=function(){return f};this.setLineWidth=function(g){a=g;return this};this.getLineWidth=function(){return a};this.setArrowSize=function(g){e=g;return this};this.getArrowSize=function(){return e};this.setArrowHeadSize=function(g){c=g;return this};
this.getArrowHeadSize=function(){return c};this.setArrowHeadWidth=function(g){b=g;return this};this.getArrowHeadWidth=function(){return b};this.setVectorSpacing=function(g){m=g;return this};this.getVectorSpacing=function(){return m};this.setDs=function(g){l=g;return this};this.getDs=function(){return l};this.pushVertex=function(g,r,n,p,v){g.push(r.x);g.push(r.y);g.push(r.z);g.push(n.x);g.push(n.y);g.push(n.z);g.push(p);g.push(v)};this.generateVector=function(g,r,n,p,v,A,x,w,y,J,z){v={};v.x=g;v.y=
r;v.z=n;const G={};G.x=g+p[0]*y;G.y=r+p[1]*y;G.z=n+p[2]*y;this.pushVertex(z,v,G,A,0);this.pushVertex(z,v,G,-A,0);this.pushVertex(z,G,v,-A,x);this.pushVertex(z,G,v,A,x);this.pushVertex(z,G,v,w,1.33*x);this.pushVertex(z,G,v,0,x);this.pushVertex(z,G,v,0,0);this.pushVertex(z,G,v,-w,1.33*x);g=8*J;z.pushIndex(g);z.pushIndex(g+1);z.pushIndex(g+2);z.pushIndex(g+2);z.pushIndex(g+1);z.pushIndex(g+3);z.pushIndex(g+4);z.pushIndex(g+5);z.pushIndex(g+6);z.pushIndex(g+6);z.pushIndex(g+5);z.pushIndex(g+7)};this.trace=
function(g,r,n,p,v,A,x,w,y){var J,z,G;var E=G=J=0;for(z=!1;E<A&&!z;){var F=g.getField(r,n,p);z=Math.sqrt(F[0]*F[0]+F[1]*F[1]+F[2]*F[2]);if(0===z)break;J>=G&&(this.generateVector(r,n,p,F,z,a,c,b,w,x+E,y),G=J+Math.max(z*m*w,1),E++);r+=v*F[0]/z*l;n+=v*F[1]/z*l;p+=v*F[2]/z*l;J+=l;z=g.shouldStop(v,r,n,p)}return E};this.generateField=function(){var g;var r=h.length;k=0;var n=new vizit.utility.IndexedVertices(vizit.vectorfield.LineRenderer.VERTICES_PER_ARROW*vizit.vectorfield.LineRenderer.FLOATS_PER_VERTEX*
f*r,12*f*r);for(g=0;g<r;g++){var p=h[g];p[4]=k;k+=this.trace(d,p[0],p[1],p[2],p[3],f,k,e,n)}return n};let b=t.VectorFieldGenerator.DEFAULT_ARROW_HEAD_WIDTH,c=t.VectorFieldGenerator.DEFAULT_ARROW_HEAD_SIZE,a=t.VectorFieldGenerator.DEFAULT_LINE_WIDTH,e=t.VectorFieldGenerator.DEFAULT_ARROW_SIZE,h=[],l=t.VectorFieldGenerator.DEFAULT_DS,d=q,f=t.VectorFieldGenerator.DEFAULT_MAX_VECTORS,m=t.VectorFieldGenerator.DEFAULT_VECTOR_SPACING};t.VectorFieldGenerator.DEFAULT_ARROW_HEAD_WIDTH=10;t.VectorFieldGenerator.DEFAULT_ARROW_HEAD_SIZE=
10;t.VectorFieldGenerator.DEFAULT_ARROW_SIZE=4;t.VectorFieldGenerator.DEFAULT_LINE_WIDTH=2;t.VectorFieldGenerator.DEFAULT_DS=.33;t.VectorFieldGenerator.DEFAULT_MAX_VECTORS=5;t.VectorFieldGenerator.DEFAULT_VECTOR_SPACING=1.2})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.field=window.vizit.field||{};
(function(t){t.Stage=function(q){var k,b;this.getContext=function(){return a.getGLContext()};this.registerRenderer=function(f){k=f;return this};this.getRenderer=function(){return k};this.setModelViewMatrix=function(f){h=f;k.setModelViewMatrix(h);return this};this.getModelViewMatrix=function(){return h};this.requestRender=function(){b||(b=!0,requestAnimationFrame(this.render))};this.render=function(){k.render();b=!1};this.start=function(){k.start()};this.setScale=function(f){e=f;1>e&&(e=1);l=a.generateOrthographicMatrix(e,
e,-e,e);k&&(k.setProjectionMatrix(l),this.render());return this};this.getProjectionMartix=function(){return l};this.zoomBy=function(f){this.setScale(e+f);return this};this.setElementName=function(f,m){c[m]=f;return this};this.getElementByName=function(f){var m;c.hasOwnProperty(f)&&(m=c[f]);return m};this.getGlUtility=function(){return a};var c={};var a=new vizit.utility.GLUtility(q);var e=5;var h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);new Float32Array([1,0,0,0,1,0,0,0,1]);var l=a.generateOrthographicMatrix(e,
e,-e,e);var d=new vizit.utility.MotionEventHandler(this,a,75,4);q.addEventListener("mousewheel",d.handleMouseWheel.bind(d),!1);q.addEventListener("DOMMouseScroll",d.handleMouseWheel.bind(d),!1);q.addEventListener("mousedown",d.handleMouseDown.bind(d),!1);document.addEventListener("mouseup",d.handleMouseUp.bind(d),!1);document.addEventListener("mousemove",d.handleMouseMove.bind(d),!1);q.addEventListener("touchstart",d.handleTouchStart.bind(d),!1);q.addEventListener("touchmove",d.handleTouchMove.bind(d),
!1);q.addEventListener("touchend",d.handleTouchEnd.bind(d),!1)}})(window.vizit.field);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(t){t.BindingBuilder=function(){this.bindingBuilder=function(q,k,b){var c,a,e,h;for(e in k)"set"===e.toLowerCase()?h=k[e]:"from"===e.toLowerCase()?c=k[e]:"mapping"===e.toLowerCase()&&(a=k[e]);c||(c=h);k="set"+h.charAt(0).toUpperCase();1<h.length&&(k+=h.slice(1));(e=q[k])?(e=e.bind(q),q=a?new window.vizit.lesson.MappingEventHandler(e,c,a,b):new window.vizit.lesson.DirectEventHandler(e,b),document.addEventListener(c+"Changed",q.handleUpdate.bind(q),!1)):console.warn(`No method ${k} found to bind ${h}.`)};
this.bind=function(q,k,b){if(k)if(Array.isArray(k)){var c=k.length;for(var a=0;a<c;++a)this.bindingBuilder(q,k[a],b)}else this.bindingBuilder(q,k,b)}};t.bindingBuilder=new t.BindingBuilder})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(t){t.CombinedVectorValuedFunctionBuilder=function(q){this.buildFunction=function(b){var c,a,e;for(e in b)"args"===e.toLowerCase()?c=b[e]:"body"===e.toLowerCase()?a=b[e]:"name"===e.toLowerCase()?name=b[e]:"properties"!==e.toLowerCase()&&"stop"!==e.toLowerCase()&&e.toLowerCase();return new vizit.vectorfield.VectorFunction(c,a)};this.build=function(b){var c,a;if(b){var e=new vizit.vectorfield.CombinedVectorFunctions;if(Array.isArray(b)){var h=b.length;for(var l=0;l<h;++l)if(c=this.buildFunction(b[l]))e.addFunction(c),
(a=c.getName())&&k.setElementName(c,a)}else if(c=this.buildFunction(b))e.addFunction(c),(a=c.getName())&&k.setElementName(c,a)}return e};var k=q}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(t){t.SurfaceBuilder=function(){var q,k,b,c,a,e;this.getXMin=function(){return q};this.getXMax=function(){return k};this.getYMin=function(){return b};this.getYMax=function(){return c};this.getZMin=function(){return a};this.getZMax=function(){return e};this.gaussianCylinderBuilder=function(h){var l,d,f,m,g,r,n,p,v;var A=!0;for(m in h)"x"===m.toLowerCase()?n=h[m]:"y"===m.toLowerCase()?p=h[m]:"z"===m.toLowerCase()?v=h[m]:"h"===m.toLowerCase()?l=h[m]:"r"===m.toLowerCase()?g=h[m]:"phi"===m.toLowerCase()?
f=h[m]:"theta"===m.toLowerCase()?r=h[m]:"name"===m.toLowerCase()?d=h[m]:"enabled"===m.toLowerCase()&&(A=h[m]);q=Math.min(q,n-g,n+g);k=Math.max(k,n-g,n+g);b=Math.min(b,p-g,p-g);c=Math.max(c,p-g,p+g);a=Math.min(a,v-l,v+l);e=Math.max(e,v-l,v+l);h=new vizit.electricfield.GaussianCylinder(n,p,v,l,g,f,r,d);A||h.setEnabled(A);return h};this.gaussianSphereBuilder=function(h){var l,d,f,m,g,r;var n=!0;for(d in h)"x"===d.toLowerCase()?m=h[d]:"y"===d.toLowerCase()?g=h[d]:"z"===d.toLowerCase()?r=h[d]:"r"===d.toLowerCase()?
f=h[d]:"name"===d.toLowerCase()?l=h[d]:"enabled"===d.toLowerCase()&&(n=h[d]);q=Math.min(q,m-f,m+f);k=Math.max(k,m-f,m+f);b=Math.min(b,g-f,g-f);c=Math.max(c,g-f,g+f);a=Math.min(a,r-f,r+f);e=Math.max(e,r-f,r+f);h=new vizit.electricfield.GaussianSphere(m,g,r,f,l);n||h.setEnabled(n);return h};this.surfaceBuilder=function(h,l){var d,f,m,g;var r=/\s*gaussian\s*sphere\s*/i;for(f in h)"type"===f.toLowerCase()?g=h[f]:"bind"===f.toLowerCase()&&(d=h[f]);g.match(/\s*gaussian\s*cylinder\s*/i)?m=this.gaussianCylinderBuilder(h):
g.match(r)&&(m=this.gaussianSphereBuilder(h));"undefined"!==typeof d&&"undefined"!==m&&this.bind(m,d,l);return m};this.build=function(h,l,d){var f;if(h)if(Array.isArray(h)){var m=h.length;for(var g=0;g<m;++g)if(f=this.surfaceBuilder(h[g],d))l.addGaussianSurface(f),(name=f.getName())&&d.setElementName(f,name)}else if(f=this.surfaceBuilder(h,d))l.addGaussianSurface(f),(name=f.getName())&&d.setElementName(f,name);return l}};t.SurfaceBuilder.prototype=t.bindingBuilder})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};(function(t){t.VectorValuedFunctionBuilder=function(q){this.build=function(b,c){var a;if(b){var e=Array.isArray(b)?b[0]:b;"undefined"!==typeof e&&(a="function"===e.type.toLowerCase()?new vizit.builder.CombinedVectorValuedFunctionBuilder(k):new vizit.builder.ElectricFieldElementBuilder(k,c))}return a.build(b)};var k=q}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(t){t.DistributionBuilder=function(){var q,k,b,c,a,e;this.getXMin=function(){return q};this.getXMax=function(){return k};this.getYMin=function(){return b};this.getYMax=function(){return c};this.getZMin=function(){return a};this.getZMax=function(){return e};this.chargedPlaneBuilder=function(d){var f,m,g,r,n,p,v,A,x,w,y,J,z,G,E,F,K;for(f in d)f.match(h)?m=d[f]:f.match(l)?g=d[f]:"nfieldLines"===f.toLowerCase()?n=d[f]:"x0"===f.toLowerCase()?p=d[f]:"y0"===f.toLowerCase()?v=d[f]:"z0"===f.toLowerCase()?
A=d[f]:"x1"===f.toLowerCase()?x=d[f]:"y1"===f.toLowerCase()?w=d[f]:"z1"===f.toLowerCase()?y=d[f]:"x2"===f.toLowerCase()?J=d[f]:"y2"===f.toLowerCase()?z=d[f]:"z2"===f.toLowerCase()?G=d[f]:"x3"===f.toLowerCase()?E=d[f]:"y3"===f.toLowerCase()?F=d[f]:"z3"===f.toLowerCase()?K=d[f]:"name"===f.toLowerCase()&&(r=d[f]);q=Math.min(q,p,x,J,E);k=Math.max(k,p,x,J,E);b=Math.min(b,v,w,z,K);c=Math.max(c,v,w,z,K);a=Math.min(a,A,y,G,K);e=Math.max(e,A,y,G,K);return new vizit.electricfield.ChargedPlane(p,v,A,x,w,y,J,
z,G,E,F,K,m,g,n,r)};this.chargedCylinderBuilder=function(d){var f,m,g,r,n,p,v,A,x,w,y,J,z;for(n in d)n.match(h)?f=d[n]:n.match(l)?m=d[n]:"nfieldLines"===n.toLowerCase()?r=d[n]:"x0"===n.toLowerCase()?p=d[n]:"y0"===n.toLowerCase()?v=d[n]:"z0"===n.toLowerCase()?A=d[n]:"x1"===n.toLowerCase()?x=d[n]:"y1"===n.toLowerCase()?w=d[n]:"z1"===n.toLowerCase()?y=d[n]:"r0"===n.toLowerCase()?J=d[n]:"r1"===n.toLowerCase()?z=d[n]:"name"===n.toLowerCase()&&(g=d[n]);q=Math.min(q,p,x);k=Math.max(k,p,x);b=Math.min(b,v,
w);c=Math.max(c,v,w);a=Math.min(a,A,y);e=Math.max(e,A,y);return new vizit.electricfield.ChargedCylinder(p,v,A,x,w,y,J,z,f,m,r,g)};this.chargedLineBuilder=function(d){var f,m,g,r,n,p,v,A,x,w,y;for(n in d)n.match(h)?f=d[n]:n.match(l)?m=d[n]:"nfieldLines"===n.toLowerCase()?r=d[n]:"x0"===n.toLowerCase()?p=d[n]:"y0"===n.toLowerCase()?v=d[n]:"z0"===n.toLowerCase()?A=d[n]:"x1"===n.toLowerCase()?x=d[n]:"y1"===n.toLowerCase()?w=d[n]:"z1"===n.toLowerCase()?y=d[n]:"name"===n.toLowerCase()&&(g=d[n]);q=Math.min(q,
p,x);k=Math.max(k,p,x);b=Math.min(b,v,w);c=Math.max(c,v,w);a=Math.min(a,A,y);e=Math.max(e,A,y);return new vizit.electricfield.ChargedLine(p,v,A,x,w,y,f,m,r,g)};this.chargedSphereBuilder=function(d){var f,m,g,r,n,p,v,A,x;for(let w in d)"charge"===w.toLowerCase()?f=d[w]:w.match(l)?m=d[w]:"nfieldLines"===w.toLowerCase()?r=d[w]:"x"===w.toLowerCase()?n=d[w]:"y"===w.toLowerCase()?p=d[w]:"z"===w.toLowerCase()?v=d[w]:"a"===w.toLowerCase()?A=d[w]:"b"===w.toLowerCase()?x=d[w]:"name"===w.toLowerCase()&&(g=d[w]);
q=Math.min(q,n-x);k=Math.max(k,n+x);b=Math.min(b,p-x);c=Math.max(c,p+x);a=Math.min(a,v-x);e=Math.max(e,v+x);return new vizit.electricfield.ChargedSphere(n,p,v,A,x,f,m,r,g)};this.chargeDistributionBuilder=function(d,f){var m,g,r,n;var p=/\s*charged\s*cylinder\s*/i;var v=/\s*charged\s*line\s*/i;var A=/\s*charged\s*sphere\s*/i;for(r in d)"type"===r.toLowerCase()?n=d[r]:"bind"===r.toLowerCase()&&(m=d[r]);n.match(/\s*charged\s*plane\s*/i)?g=this.chargedPlaneBuilder(d):n.match(p)?g=this.chargedCylinderBuilder(d):
n.match(v)?g=this.chargedLineBuilder(d):n.match(A)&&(g=this.chargedSphereBuilder(d));"undefined"!==typeof m&&"undefined"!==g&&this.bind(g,m,f);return g};this.build=function(d,f,m){var g,r;if(d)if(Array.isArray(d)){var n=d.length;for(var p=0;p<n;++p)if(g=this.chargeDistributionBuilder(d[p],m))f.addDistribution(g),(r=g.getName())&&m.setElementName(g,r)}else if(g=this.chargeDistributionBuilder(d,m))f.addDistribution(g),(r=g.getName())&&m.setElementName(g,r);return f};var h=/\s*charge\s*density\s*/i;
var l=/\s*field\s*line\s*density\s*/i};t.DistributionBuilder.prototype=t.bindingBuilder})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(t){t.ChargesBuilder=function(){this.getXMin=function(){return q};this.getXMax=function(){return k};this.getYMin=function(){return b};this.getYMax=function(){return c};this.getZMin=function(){return a};this.getZMax=function(){return e};this.chargeBuilder=function(h,l){var d,f,m,g,r,n,p,v,A;var x="";const w=/\s*field\s*line\s*density\s*/i;for(v in h)"charge"===v.toLowerCase()?A=h[v]:"x"===v.toLowerCase()?m=h[v]:"y"===v.toLowerCase()?g=h[v]:"z"===v.toLowerCase()?r=h[v]:v.match(w)?n=h[v]:"nfieldlines"===
v.toLowerCase()?p=h[v]:"bind"===v.toLowerCase()?d=h[v]:"name"===v.toLowerCase()&&(f=h[v]);"undefined"===typeof A&&(x+="No charge specified for point charge.\n");"undefined"===typeof m&&(0<x.length&&(x+="\n"),x+="x coordinate is not defined in charge configuration.\n");"undefined"===typeof g&&(0<x.length&&(x+="\n"),x+="y coordinate is not defined in charge configuration.\n");"undefined"===typeof r&&(0<x.length&&(x+="\n"),x+="z coordinate is not defined in charge configuration.\n");if(0===x.length){m<
q&&(q=m);m>k&&(k=m);g<b&&(b=g);g>c&&(c=g);r<a&&(a=r);r>e&&(e=r);var y=new vizit.electricfield.Charge(m,g,r,A,n,p,f);"undefined"!==typeof d&&this.bind(y,d,l)}return{charge:y,message:x}};this.build=function(h,l,d){if(h)if(Array.isArray(h)){var f=h.length;for(var m=0;m<f;++m){var g=this.chargeBuilder(h[m],d);const r=g.charge;g.message&&console.log(g.message);r&&(l.addCharge(r),(g=r.getName())&&d.setElementName(r,g))}}else g=this.chargeBuilder(h,d),h=g.charge,g.message&&console.log(g.message),h&&(l.addCharge(h),
(g=h.getName())&&d.setElementName(h,g));return l};var q=Number.POSITIVE_INFINITY;var k=Number.NEGATIVE_INFINITY;var b=Number.POSITIVE_INFINITY;var c=Number.NEGATIVE_INFINITY;var a=Number.POSITIVE_INFINITY;var e=Number.NEGATIVE_INFINITY};t.ChargesBuilder.prototype=t.bindingBuilder})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(t){t.ElectricFieldElementBuilder=function(q,k){this.buildELement=function(a,e){const h=/\s*charged\s*cylinder\s*/i,l=/\s*charged\s*line\s*/i,d=/\s*charged\s*plane\s*/i,f=/\s*charged\s*sphere\s*/i,m=/\s*gaussian\s*cylinder\s*/i,g=/\s*gaussian\s*sphere\s*/i;for(var r in a)if("type"===r.toLowerCase()){var n=a[r];break}if(n.match(/\s*charges?\s*$/i))n=new vizit.builder.ChargesBuilder,e=n.build(a,e,b);else if(n.match(h)||n.match(l)||n.match(d)||n.match(f))n=new vizit.builder.DistributionBuilder,
e=n.build(a,e,b);else if(n.match(m)||n.match(g))n=new vizit.builder.SurfaceBuilder,c=n.build(a,c,b);return e};this.build=function(a){var e=new vizit.electricfield.Charges;if(a)if(Array.isArray(a)){var h=a.length;for(var l=0;l<h;++l)this.buildELement(a[l],e)}else this.buildELement(a,e);return e};var b=q;var c=k}})(window.vizit.builder);window.vizit=window.vizit||{};(function(t){t.Visualizations=function(){this.register=function(q,k){};this.lookup=function(q){var k;(void 0).hasOwnProperty(q)&&(k=(void 0)[q]);return k}}})(window.vizit);vizit.visualizations=new vizit.Visualizations;window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(t){t.ElectricFieldBuilder=function(q){this.build=function(b){var c,a,e,h,l,d,f,m;for(m in b)"arrowheadsize"===m.toLowerCase()?c=b[m]:"arrowwidth"===m.toLowerCase()?a=b[m]:"arrowspacing"===m.toLowerCase()?e=b[m]:"maxvectors"===m.toLowerCase()?f=b[m]:"linewidth"===m.toLowerCase()?d=b[m]:"elements"===m.toLowerCase()&&(l=b[m]);b=new vizit.electricfield.ElectricField(k);"undefined"!==typeof f&&b.setMaxVectors(f);"undefined"!==typeof c&&b.setArrowHeadSize(c);"undefined"!==typeof a&&b.setArrowWidth(a);
"undefined"!==typeof e&&b.setArrowSpacing(e);"undefined"!==typeof d&&b.setLineWidth(d);(h=(new vizit.builder.ElectricFieldElementBuilder(k,b)).build(l,h))&&b.setCharges(h);return b};var k=q}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(t){t.SimpleVectorFieldBuilder=function(q){this.build=function(b){var c,a,e,h,l,d,f;for(f in b)"arrowheadsize"===f.toLowerCase()&&(c=b[f]),"arrowheadwidth"===f.toLowerCase()?a=b[f]:"arrowsize"===f.toLowerCase()?e=b[f]:"linewidth"===f.toLowerCase()?h=b[f]:"maxvectors"===f.toLowerCase()&&(l=b[f]),"f"===f.toLowerCase()&&(d=b[f]);if(d){b=new vizit.builder.VectorValuedFunctionBuilder(k);var m=b.build(d)}d=new vizit.vectorfield.SimpleVectorField(k,m);"undefined"!==typeof l&&d.setMaxVectors(l);
"undefined"!==typeof e&&d.setArrowSize(e);"undefined"!==typeof c&&d.setArrowHeadSize(c);"undefined"!==typeof a&&d.setArrowHeadWidth(a);"undefined"!==typeof h&&d.setLineWidth(h);return d};var k=q}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(t){t.VizBuilder=function(){this.processConfig=function(q){var k,b,c,a,e;const h=/\s*electric\s*field\s*/i,l=/\s*simple\s*vector\s*field\s*/i;var d=/\s*start\s*points\s*/i;for(var f in q)"canvas"===f.toLowerCase()?k=q[f]:"scale"===f.toLowerCase()?c=q[f]:"type"===f.toLowerCase()?e=q[f]:"name"===f.toLowerCase()?b=q[f]:f.match(d)&&(a=q[f]);if("undefined"===typeof e)alert("Missing type for visualization configuration.");else if("undefined"===typeof k)alert("No canvas specified, please provide the id of a canvas.");
else if(d=document.getElementById(k)){k=new vizit.field.Stage(d);if(e.match(h)){var m=new vizit.builder.ElectricFieldBuilder(k);m=m.build(q)}else e.match(l)?(m=new vizit.builder.SimpleVectorFieldBuilder(k),m=m.build(q)):alert("Unrecognized visualization type: "+e+".");m&&("undefined"!==typeof c&&k.setScale(c),"undefined"!==typeof b&&vizit.visualizations.register(b,k),"undefined"!==typeof a&&m.addStartPoints(a),k.start())}else alert('Can not find canvas with id="'+k+'".')};this.process=function(q){if(q)if(Array.isArray(q)){var k=
q.length;for(var b=0;b<k;++b)this.processConfig(q[b])}else this.processConfig(q)}}})(window.vizit.builder);function VIZ_CONFIG_IF_EXISTS(t){"undefined"!==typeof VISUALIZATION_CONFIG&&(t=new vizit.builder.VizBuilder,t.process(VISUALIZATION_CONFIG))}"interactive"===document.readyState||"complete"===document.readyState?VIZ_CONFIG_IF_EXISTS():document.addEventListener("DOMContentLoaded",VIZ_CONFIG_IF_EXISTS);
//# sourceMappingURL=VField.min.js.map 
