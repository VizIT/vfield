/*
 Copyright 2013-2014 Vizit Solutions

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
'use strict';class IllegalArgumentException extends Error{constructor(t){super(t);this.name="IllegalArgumentException"}};window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};(function(t){t.ensureNumber=function(q){return"number"===typeof q?q:parseFloat(q)}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};(function(t){t.toBoolean=function(q){var k=typeof q;if("boolean"===k)var b=q;else if("number"===k)b=0!==q;else if("string"===k)switch(q.trim().toLowerCase()){case "f":case "false":case "n":case "no":case "0":case "":b=!1;break;default:b=!0}return b}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};
(function(t){t.MotionEventHandler=function(q,k,b,d){var a;var e=[];var h=!1;var l=a=null;this.findTouchByIdentifier=function(c){var f;for(f=0;f<e.length;f++){var n=e[f].identifier;if(n===c)return f}return-1};this.handleTouchStart=function(c){var f;var n=c.targetTouches;for(f=0;f<n.length;f++){var g=n[f];-1===this.findTouchByIdentifier(g.identifier)&&e.push(g)}if(c.preventDefault)c.preventDefault();else return!1};this.handleTouchEnd=function(c){var f;var n=c.changedTouches;for(f=0;f<n.length;f++){var g=
this.findTouchByIdentifier(n[f].identifier);-1!==g&&e.splice(g,1)}if(c.preventDefault)c.preventDefault();else return!1};this.handleOneActiveMove=function(c){var f=c.changedTouches[0];var n=e[0];if(null!==n){var g=f.pageX-n.pageX;n=f.pageY-n.pageY;var r=q.getModelViewMatrix();k.rotateBy(r,n/150,g/150);q.setModelViewMatrix(r);q.requestRender();e.splice(0,1,f)}else e.push(f);if(c.preventDefault)c.preventDefault();else return!1};this.handleTwoActiveMove=function(c){var f=e[0];var n=e[1];var g=n.pageX-
f.pageX;var r=n.pageY-f.pageY;var m=Math.sqrt(g*g+r*r);var p=c.changedTouches;for(g=0;g<p.length;g++){var v=p[g];r=v.identifier;f.identifier===r?(f=v,e.splice(0,1,v)):n.identifier===r&&(n=v,e.splice(1,1,v))}g=n.pageX-f.pageX;r=n.pageY-f.pageY;q.zoomBy(-(Math.sqrt(g*g+r*r)-m)/d);if(c.preventDefault)c.preventDefault();else return!1};this.handleTouchMove=function(c){return 1===e.length?this.handleOneActiveMove(c):2===e.length?this.handleTwoActiveMove(c):!0};this.handleMouseDown=function(c){h=!0;a=c.clientX;
l=c.clientY};this.handleMouseUp=function(c){h=!1};this.handleMouseMove=function(c){if(h){var f=c.clientX,n=c.clientY,g=f-a,r=n-l;c=q.getModelViewMatrix();k.rotateBy(c,r/30,g/30);q.setModelViewMatrix(c);q.requestRender();a=f;l=n}};this.handleMouseWheel=function(c){c=window.event||c;q.zoomBy((20*c.detail|c.deltaY|-c.wheelDeltaY)/b);if(c.preventDefault)c.preventDefault();else return!1}}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};
(function(t){t.GLUtility=function(q){this.getGLContext=function(){!b&&(b=k.getContext("webgl",{antialias:!0}))&&(b.enable(b.DEPTH_TEST),b.depthFunc(b.LESS));return b};this.clearColor=function(d,a,e,h){b.clearColor(d,a,e,h)};this.clear=function(){b.clear(b.COLOR_BUFFER_BIT)};this.compileShader=function(d,a){a=b.createShader(a);b.shaderSource(a,d);b.compileShader(a);if(!b.getShaderParameter(a,b.COMPILE_STATUS))throw"Shader compile failed with:"+b.getShaderInfoLog(a);return a};this.createProgram=function(d,
a,e){const h=b.createProgram();d=this.compileShader(d,b.VERTEX_SHADER);a=this.compileShader(a,b.FRAGMENT_SHADER);b.attachShader(h,d);b.attachShader(h,a);e&&b.transformFeedbackVaryings(h,e,b.SEPARATE_ATTRIBS);b.linkProgram(h);return h};this.loadData=function(d,a){b.bindBuffer(b.ARRAY_BUFFER,d);b.bufferData(b.ARRAY_BUFFER,a,b.STATIC_DRAW)};this.createBuffer=function(d){var a=b.createBuffer();this.loadData(a,d);return a};this.loadIndices=function(d,a){b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,d);b.bufferData(b.ELEMENT_ARRAY_BUFFER,
a,b.STATIC_DRAW)};this.createIndexBuffer=function(d){var a=b.createBuffer();this.loadIndices(a,d);return a};this.getAttribLocation=function(d,a){d=b.getAttribLocation(d,a);-1===d&&alert("Can not find attribute "+a+".");return d};this.bindBuffer=function(d,a,e,h,l,c){b.bindBuffer(b.ARRAY_BUFFER,d);b.enableVertexAttribArray(a);b.vertexAttribPointer(a,e,h,!1,l,c)};this.loadTexture=function(d,a,e){var h=b.createTexture(),l=new Image;l.onload=function(){this.onTextureLoaded(l,h,a,e)}.bind(this);l.src=
d;return h};this.onTextureLoaded=function(d,a,e,h){b.activeTexture(b.TEXTURE0+e);b.bindTexture(b.TEXTURE_2D,a);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,d);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR_MIPMAP_NEAREST);b.generateMipmap(b.TEXTURE_2D);h()};this.bindTexture=function(d,a,e,h){b.activeTexture(b.TEXTURE0+e);b.bindTexture(b.TEXTURE_2D,a);b.uniform1i(h,e)};this.generateModelViewMatrix=function(d){return new Float32Array([1,
0,0,0,0,1,0,0,0,0,1,0,d,0,0,1])};this.generatePerspectiveMatrix=function(d,a,e,h){return new Float32Array([e/d,0,0,0,0,e/a,0,0,0,0,-(h+e)/(h-e),-1,0,0,-2*h*e/(h-e),0])};this.generateOrthographicMatrix=function(d,a,e,h){return new Float32Array([1/d,0,0,0,0,1/a,0,0,0,0,-2/(h-e),0,0,0,-(h+e)/(h-e),1])};this.getUniformLocation=function(d,a){d=b.getUniformLocation(d,a);-1===d&&alert("Can not find uniform"+a+".");return d};this.loadUniform3f=function(d,a,e,h,l,c){a=d.getUniformLocation(a,e);-1===a?alert("Can not find uniform"+
e+"."):d.uniform3f(a,h,l,c)};this.loadUniform4f=function(d,a,e,h,l,c){d=b.getUniformLocation(d,a);-1===d?alert("Can not find uniform"+a+"."):b.uniform4f(d,e,h,l,c)};this.loadUniformMatrix3fv=function(d,a,e){d=b.getUniformLocation(d,a);-1===d?alert("Can not find uniform"+a+"."):b.uniformMatrix3fv(d,!1,e)};this.loadUniformMatrix4fv=function(d,a,e){d=b.getUniformLocation(d,a);-1===d?alert("Can not find uniform"+a+"."):b.uniformMatrix4fv(d,!1,e)};this.getXYRotationMatrix=function(d,a){const e=Math.cos(d),
h=Math.cos(a);d=Math.sin(d);a=Math.sin(a);return[h,d*a-e*a,0,0,e,d,0,a,-h*d,e*h,0,0,0,0,1]};this.rotateBy=function(d,a,e){var h=Math.cos(a),l=Math.cos(e);a=Math.sin(a);var c=Math.sin(e),f=a*c,n=l*a,g=h*c,r=h*l;e=d[0];var m=d[1];var p=d[2];d[0]=e*l+p*c;d[1]=e*f+m*h-p*n;d[2]=-e*g+m*a+p*r;e=d[4];m=d[5];p=d[6];d[4]=e*l+p*c;d[5]=e*f+m*h-p*n;d[6]=-e*g+m*a+p*r;e=d[8];m=d[9];p=d[10];d[8]=e*l+p*c;d[9]=e*f+m*h-p*n;d[10]=-e*g+m*a+p*r;e=d[12];m=d[13];p=d[14];d[12]=e*l+p*c;d[13]=e*f+m*h-p*n;d[14]=-e*g+m*a+p*r};
this.extractRotationPart=function(d,a){a.set(d.subarray(0,3));a.set(d.subarray(4,7),3);a.set(d.subarray(8,11),6);return a};var k=q;var b=this.getGLContext()}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};(function(t){t.Color=function(q,k,b,d){var a,e,h,l;this.setRed=function(c){a=c;return this};this.getRed=function(){return a};this.setGreen=function(c){e=c;return this};this.getGreen=function(){return e};this.setBlue=function(c){h=c;return this};this.getBlue=function(){return h};this.setAlpha=function(c){l=c;return this};this.getAlpha=function(){return l};this.setRed(q).setGreen(k).setBlue(b).setAlpha(d)}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.geometry=window.vizit.geometry||{};
(function(t){t.Surface=function(q,k){var b=k;var d=q;var a=new Float32Array(3*q);var e=new Uint16Array(k);var h=new Float32Array(3*q);this.setNindices=function(l){b=l};this.getNindices=function(){return b};this.setNvertices=function(l){d=l};this.getNvertices=function(){return d};this.setVerticies=function(l){a=l};this.getVertices=function(){return a};this.setIndices=function(l){e=l};this.getIndices=function(){return e};this.setNormals=function(l){h=l};this.getNormals=function(){return h}};t.Shapes=
{SPHERE:{value:"sphere"},SQUARE:{value:"square"},CYLINDER:{value:"cylinder"},LINE_SEGMENT:{value:"line segment"}};t.VertexRegistry=function(){var q={};this.registerVertices=function(k,b){if(q.hasOwnProperty(k))throw"Vertex buffers already registered for "+k+".";q[k]=b};this.hasVertices=function(k){return q.hasOwnProperty(k)};this.retrieveVertices=function(k){return q[k]}};t.vertexRegistry=new t.VertexRegistry;t.Square=function(){var q=t.Shapes.SQUARE;var k=[-.5,.5,0,.5,.5,0,.5,-.5,0,-.5,-.5,0];var b=
[0,0,1];this.getNindices=function(){return 6};this.computeGeometry=function(d,a){var e=d.getVertices();var h=d.getNormals();var l=d.getIndices();for(var c=0;12>c;c++)e[c]=a[c],h[c]=b[c%3];l[0]=0;l[1]=3;l[2]=1;l[3]=3;l[4]=2;l[5]=1;d.setNvertices(12);d.setNindices(6)};this.getVertexBuffers=function(d){if(this.hasVertices(q.value))var a=this.retrieveVertices(q.value);else{var e=new t.Surface(4,6);a={};this.computeGeometry(e,k);a.vertices=d.createBuffer(e.getVertices());a.normals=d.createBuffer(e.getNormals());
a.indices=d.createIndexBuffer(e.getIndices());this.registerVertices(q.value,a)}return a}};t.Square.prototype=t.vertexRegistry;t.LineSegment=function(){const q=t.Shapes.LINE_SEGMENT;this.getBaseHeight=function(){return 1};this.getBaseHalfWidth=function(){return.5};this.getShape=function(){return q}};t.Cylinder=function(){var q=t.Shapes.CYLINDER;this.getBaseHeight=function(){return 1};this.getBaseRadius=function(){return 1};this.getShape=function(){return q};this.getNindices=function(){return 126};
this.computeGeometry=function(k){var b;var d=k.getVertices();var a=k.getNormals();var e=k.getIndices();d[0]=0;a[0]=0;d[1]=0;a[1]=0;d[2]=.5;a[2]=1;e[0]=0;var h=94;e[h]=h;h*=3;d[h]=0;a[h++]=0;d[h]=0;a[h++]=0;d[h]=-.5;a[h]=-1;for(b=1;31>=b;b++){h=2*(b-1)*Math.PI/30;e[b]=b;var l=3*b;d[l]=1*Math.cos(h);a[l++]=0;d[l]=1*Math.sin(h);a[l++]=0;d[l]=.5;a[l]=1}for(b=1;31>=b;b++)l=3*b,h=b+90+4,e[h]=h,h*=3,d[h]=d[l++],a[h++]=0,d[h]=d[l],a[h++]=0,d[h]=-.5,a[h]=-1;l=3;h=285;var c=96;for(b=0;30>=b;b++)e[c/3]=c/3,
d[c]=d[l],a[c++]=d[l++]/1,d[c]=d[l],a[c++]=d[l++]/1,d[c]=d[l],a[c++]=d[l++]/1,e[c/3]=c/3,d[c]=d[h],a[c++]=d[h++]/1,d[c]=d[h],a[c++]=d[h++]/1,d[c]=d[h],a[c++]=d[h++]/1;k.setNvertices(378);k.setNindices(126)};this.getVertexBuffers=function(k){if(this.hasVertices(q.value))var b=this.retrieveVertices(q.value);else{var d=new t.Surface(126,126);b={};this.computeGeometry(d);b.vertices=k.createBuffer(d.getVertices());b.normals=k.createBuffer(d.getNormals());b.indices=k.createIndexBuffer(d.getIndices());this.registerVertices(q.value,
b)}return b}};t.Cylinder.prototype=t.vertexRegistry;t.Sphere=function(){var q=t.Shapes.SPHERE;this.getIntrinsicRadius=function(){return 30};this.getShape=function(){return q};this.getNindices=function(){return 5400};this.computeGeometry=function(k,b,d,a){var e,h;var l=k.getVertices();var c=h=0;var f=k.getNormals();for(e=0;e<=d;e++){var n=e*Math.PI/d;var g=Math.sin(n);var r=Math.cos(n);for(n=0;n<=a;n++){var m=2*n*Math.PI/a;var p=Math.sin(m);m=Math.cos(m);p*=g;var v=r;m*=g;f[c]=p;l[c++]=b*p;f[c]=v;
l[c++]=b*v;f[c]=m;l[c++]=b*m}}k.setNvertices(--c);f=k.getIndices();for(e=0;e<d;e++)for(n=0;n<a;n++)b=e*(a+1)+n,c=b+a+1,f[h++]=b,f[h++]=c,f[h++]=b+1,f[h++]=c,f[h++]=c+1,f[h++]=b+1;k.setNindices(--h)};this.getVertexBuffers=function(k){if(this.hasVertices(q.value))var b=this.retrieveVertices(q.value);else{var d=new t.Surface(961,5400);b={};this.computeGeometry(d,30,30,30);b.vertices=k.createBuffer(d.getVertices());b.normals=k.createBuffer(d.getNormals());b.indices=k.createIndexBuffer(d.getIndices());
this.registerVertices(q.value,b)}return b}};t.Sphere.prototype=t.vertexRegistry})(window.vizit.geometry);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.SurfaceRenderer=function(q){var k,b,d,a,e,h,l,c,f,n;this.createProgram=function(p){p=g.createProgram("attribute vec3 normal;attribute vec3 position;uniform   vec3 ambientLighting;uniform   vec3 directionalLighting;uniform   vec3 directionalColor;uniform   mat4 modelViewMatrix;uniform   mat4 globalModelViewMatrix;uniform   mat3 normalMatrix;uniform   mat4 projectionMatrix;varying   vec3 lighting;void main(void){  gl_Position = projectionMatrix * globalModelViewMatrix * modelViewMatrix * vec4(position, 1.0);  vec3  transformedNormal         = normalMatrix * normal;  float directionalLightWeighting = max(dot(transformedNormal, directionalLighting), 0.0);  lighting                        = ambientLighting + directionalColor * directionalLightWeighting;}","precision mediump float;uniform vec4 surfaceColor;varying vec3 lighting;void main(void){  gl_FragColor = vec4(surfaceColor.rgb * lighting, surfaceColor.a);}");
k=g.getUniformLocation(p,"ambientLighting");b=g.getUniformLocation(p,"directionalLighting");d=g.getUniformLocation(p,"directionalColor");e=g.getUniformLocation(p,"modelViewMatrix");a=g.getUniformLocation(p,"globalModelViewMatrix");h=g.getAttribLocation(p,"normal");l=g.getUniformLocation(p,"normalMatrix");c=g.getAttribLocation(p,"position");f=g.getUniformLocation(p,"projectionMatrix");n=g.getUniformLocation(p,"surfaceColor");return p};this.getAmbientLightingHandle=function(){return k};this.getDirectionalLightingHandle=
function(){return b};this.getDirectionalColorHandle=function(){return d};this.getModelViewMatrixHandle=function(){return e};this.getGlobalModelViewMatrixHandle=function(){return a};this.getNormalHandle=function(){return h};this.getNormalMatrixHandle=function(){return l};this.getPositionHandle=function(){return c};this.getProjectionMatrixHandle=function(){return f};this.getSurfaceColorHandle=function(){return n};this.render=function(p,v,A,x){var w=x.length;if(0<w)for(r.useProgram(m),r.uniformMatrix4fv(a,
!1,v),r.uniformMatrix3fv(l,!1,A),r.uniformMatrix4fv(f,!1,p),r.uniform3f(k,.3,.3,.3),r.uniform3f(b,1,1,1),r.uniform3f(d,.4,.4,.4),p=0;p<w;p++)x[p].render(g,this)};var g=q;var r=g.getGLContext();var m=this.createProgram()}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};(function(t){t.IndexedVertices=function(q,k){let b,d;this.getNindices=function(){return b};this.getNvertices=function(){return d};this.getVertices=function(){return a};this.push=function(h){a[d++]=h};this.getIndices=function(){return e};this.pushIndex=function(h){e[b++]=h};this.reset=function(){d=b=0};const a=new Float32Array(q),e=new Uint16Array(k);this.reset()}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};(function(t){t.VectorFunction=function(q,k){var b;this.setModified=function(a){d=a};this.isModified=function(){return d};this.setName=function(a){b=a};this.getName=function(){return b};this.shouldStop=function(a,e,h,l){return 0>a*Q&&4>r2};this.getField=new Function(q,k);var d=!0}})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};
(function(t){t.CombinedVectorFunctions=function(){var q;this.addFunction=function(a){b=d.push(a);return this};for(var k=0;k<arguments.length;k++)this.addFunction(arguments[k]);this.getNfunctions=function(){return b};this.getFunctions=function(){return d};this.isModified=function(){var a=!1;for(k=0;k<b&&!a;k++)a=a||d[k].isModified();return a};this.setModified=function(a){for(k=0;k<b;k++)d[k].setModified(a)};this.setStartPoints=function(a){q=a};this.getStartPoints=function(){return q};this.getField=
function(a,e,h){for(var l,c=[0,0,0],f=0;f<b;f++)l=d[f].getField(a,e,h),c[0]+=l[0],c[1]+=l[1],c[2]+=l[2];return c};this.shouldStop=function(a,e,h,l){for(a=0;a<b;a++);return!1};var b=0;var d=[]}})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};
(function(t){t.LineRenderer=function(q){this.createProgram=function(){const a=k.createProgram("attribute vec3  current;attribute vec3  other;attribute float normalOffset;attribute float parallelOffset;uniform   vec2  resolution;uniform   mat4  modelViewMatrix;uniform   mat4  projectionMatrix;void main(){  mat4 projModelView    = projectionMatrix * modelViewMatrix;  vec4 currentProjected = projModelView * vec4(current, 1.0);  vec4 otherProjected   = projModelView * vec4(other, 1.0);  vec2 currentScreen       = currentProjected.xy / currentProjected.w;  vec2 otherScreen        = otherProjected.xy / otherProjected.w;  vec2 dir              = otherScreen - currentScreen;  vec2 normal           = (dir == vec2(0.0, 0.0) ? vec2(0.0, 0.0) : normalize(vec2(-dir.y, dir.x)));  float originalLength  = distance(current, other);  float screenLength    = length(dir);  vec4 offset = vec4(normal*normalOffset, 0.0, 0.0);  offset     += screenLength == 0.0 ? vec4(0.0, 0.0, 0.0, 0.0)                                    : vec4(dir * parallelOffset / screenLength, 0.0, 0.0);  offset.xy            /= resolution * currentProjected.w;  gl_Position = currentProjected + offset;}","precision mediump float;uniform   vec4 color;void main(){    gl_FragColor = color;}"),
e=k.getAttribLocation(a,"current"),h=k.getAttribLocation(a,"other"),l=k.getAttribLocation(a,"normalOffset"),c=k.getAttribLocation(a,"parallelOffset"),f=k.getUniformLocation(a,"resolution"),n=k.getUniformLocation(a,"color"),g=k.getUniformLocation(a,"modelViewMatrix"),r=k.getUniformLocation(a,"projectionMatrix");return{program:a,currentHandle:e,otherHandle:h,normalOffsetHandle:l,parallelOffsetHandle:c,resolutionHandle:f,colorHandle:n,modelViewMatrixHandle:g,projectionMatrixHandle:r}};this.drawIndexedLines=
function(a,e,h,l){const c=new Float32Array(2);c[0]=b.drawingBufferWidth;c[1]=b.drawingBufferHeight;const f=t.LineRenderer.FLOATS_PER_LOCATION,n=t.LineRenderer.FLOATS_PER_OFFSET,g=t.LineRenderer.FLOATS_PER_VERTEX*Float32Array.BYTES_PER_ELEMENT;b.useProgram(d.program);b.uniform4fv(d.colorHandle,h);b.uniformMatrix4fv(d.modelViewMatrixHandle,!1,e);b.uniformMatrix4fv(d.projectionMatrixHandle,!1,a);b.uniform2fv(d.resolutionHandle,c);e=l.length;for(h=0;h<e;h++)a=l[h],k.bindBuffer(a.vertices,d.currentHandle,
f,b.FLOAT,g,0),k.bindBuffer(a.vertices,d.otherHandle,f,b.FLOAT,g,f*Float32Array.BYTES_PER_ELEMENT),k.bindBuffer(a.vertices,d.normalOffsetHandle,n,b.FLOAT,g,2*f*Float32Array.BYTES_PER_ELEMENT),k.bindBuffer(a.vertices,d.parallelOffsetHandle,n,b.FLOAT,g,2*f*Float32Array.BYTES_PER_ELEMENT+n*Float32Array.BYTES_PER_ELEMENT),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a.indices),b.drawElements(b.TRIANGLES,a.nindices,b.UNSIGNED_SHORT,0)};const k=q,b=k.getGLContext(),d=this.createProgram()};t.LineRenderer.FLOATS_PER_LOCATION=
3;t.LineRenderer.LOCATIONS_PER_VERTEX=2;t.LineRenderer.FLOATS_PER_OFFSET=1;t.LineRenderer.OFFSETS_PER_VERTEX=2;t.LineRenderer.FLOATS_PER_VERTEX=t.LineRenderer.LOCATIONS_PER_VERTEX*t.LineRenderer.FLOATS_PER_LOCATION+t.LineRenderer.OFFSETS_PER_VERTEX*t.LineRenderer.FLOATS_PER_OFFSET;t.LineRenderer.VERTICES_PER_SEGMENT=4;t.LineRenderer.FLOATS_PER_SEGMENT=t.LineRenderer.VERTICES_PER_SEGMENT*t.LineRenderer.FLOATS_PER_VERTEX;t.LineRenderer.VERTICES_PER_ARROW=8})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};
(function(t){t.SimpleVectorField=function(q,k){this.setArrowHeadWidth=function(g){l.setArrowHeadWidth(g);return this};this.getArrowHeadWidth=function(){return l.getArrowHeadWidth()};this.setArrowHeadSize=function(g){l.setArrowHeadSize(g);return this};this.getArrowHeadSize=function(){return l.getArrowHeadSize()};this.setArrowSize=function(g){l.setArrowSize(g);return this};this.getArrowSize=function(){return l.getArrowSize()};this.setColor=function(g){b=g;return this};this.getColor=function(){return b};
this.getGlUtility=function(){return h};this.setMaxVectors=function(g){l.setMaxVectors(g);return this};this.getMaxVectors=function(){return l.getMaxVectors()};this.setModelViewMatrix=function(g){f=g;return this};this.getModelViewMatrix=function(){return f};this.setProjectionMatrix=function(g){n=g;return this};this.setStartPoints=function(g){l.setStartPoints(g);return this};this.addStartPoints=function(g){l.addStartPoints(g);return this};this.getStartPoints=function(){return l.getStartPoints()};this.setupVectorField=
function(){let g,r=[];g={};if("function"===typeof a.getStartPoints){var m=a.getStartPoints(0,2);"undefined"!==typeof m&&0<m.length&&l.addStartPoints(m)}m=l.generateField();g.vertices=h.createBuffer(m.getVertices());g.indices=h.createIndexBuffer(m.getIndices());g.nindices=m.getNindices();r[0]=g;return r};this.render=function(){d&&(a.isModified()&&(e=this.setupVectorField()),h.clear(),c.drawIndexedLines(n,f,b,e),a.setModified(!1))};this.start=function(){d=!0;this.render()};let b=new Float32Array([.8,
.3,.3,1]),d=!1;const a=k;let e;const h=q.getGlUtility(),l=new vizit.vectorfield.VectorFieldGenerator(a),c=new vizit.vectorfield.LineRenderer(h);h.clearColor(0,0,0,0);let f=q.getModelViewMatrix(),n=q.getProjectionMartix();q.registerRenderer(this)}})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};(function(t){t.CountdownLatch=function(q,k){var b=q;this.countDown=function(){b--;0>=b&&k()}}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.ChargeGenerator=function(q){var k,b,d;this.setCharges=function(f){k=f;if(!b||a*k.getCharges().length>b.byteLength)b=new ArrayBuffer(a*k.getCharges().length)};this.getCharges=function(){return k};this.getChargesArray=function(){return b};this.getNcharges=function(){return d};this.generate=function(){var f=k.getCharges();d=f.length;var n=new Float32Array(b);var g=new Uint8Array(b);for(var r=0;r<d;r++){var m=f[r];var p=m.getPosition();var v=5*r;n[v++]=p[0];n[v++]=p[1];n[v++]=p[2];n[v++]=
e;v=16+20*r;m=0<m.getCharge()?l:0>m.getCharge()?h:c;g[v++]=m[0];g[v++]=m[1];g[v++]=m[2];g[v++]=m[3]}return b};var a=3*Float32Array.BYTES_PER_ELEMENT+Float32Array.BYTES_PER_ELEMENT+4*Uint8Array.BYTES_PER_ELEMENT;var e=16;var h=[204,13,13,255];var l=[13,13,204,255];var c=[13,13,13,51]}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.ChargeRenderer=function(q){var k,b,d,a,e;this.createProgram=function(){var f=h.createProgram("precision highp float;attribute vec3  position;attribute vec4  color;attribute float size;uniform   mat4  modelViewMatrix;uniform   mat4  projectionMatrix;varying vec4 vColor;void main(){    gl_Position  = projectionMatrix * modelViewMatrix * vec4(position, 1);    gl_PointSize = size;    vColor       = color;}","precision lowp float;varying vec4 vColor; void main() {   float dist = distance( vec2(0.5,0.5), gl_PointCoord );   if ( dist > 0.5 )     discard;   gl_FragColor = vColor; }");
k=h.getAttribLocation(f,"color");b=h.getUniformLocation(f,"modelViewMatrix");d=h.getAttribLocation(f,"position");a=h.getUniformLocation(f,"projectionMatrix");e=h.getAttribLocation(f,"size");return f};this.render=function(f,n,g,r){r=r.getNcharges();0<r&&(l.useProgram(c),l.uniformMatrix4fv(b,!1,n),l.uniformMatrix4fv(a,!1,f),l.bindBuffer(l.ARRAY_BUFFER,g),l.enableVertexAttribArray(k),l.enableVertexAttribArray(d),l.enableVertexAttribArray(e),l.vertexAttribPointer(d,3,l.FLOAT,!1,20,0),l.vertexAttribPointer(e,
1,l.FLOAT,!1,20,12),l.vertexAttribPointer(k,4,l.UNSIGNED_BYTE,!0,20,16),l.drawArrays(l.POINTS,0,r))};var h=q;var l=h.getGLContext();var c=this.createProgram()}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.FieldLineVBO=function(q,k){this.disable=function(){this.enabled=!1};this.isEnabled=function(){return this.enabled};this.reload=function(b,d){b.loadData(this.fieldLineBufferHandle,d.getPoints());this.npoints=d.getNpoints();d=d.getArrows();b.loadData(this.fieldDirectionBufferHandle,d.vertices);b.loadIndices(this.fieldDirectionIndices,d.indices);this.narrows=d.narrows;this.enabled=!0};this.fieldLineBufferHandle=q.createBuffer(k.getPoints());this.npoints=k.getNpoints();k=k.getArrows();
this.fieldDirectionBufferHandle=q.createBuffer(k.vertices);this.narrows=k.narrows;this.fieldDirectionIndices=q.createIndexBuffer(k.indices);this.enabled=!0}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.FieldLine=function(q){function k(m,p,v,A,x,w,y){n[g++]=m;n[g++]=p;n[g++]=v;n[g++]=A;n[g++]=x;n[g++]=w;n[g++]=y}function b(m,p,v){h[e++]=m.x;h[e++]=m.y;h[e++]=m.z;h[e++]=p.x;h[e++]=p.y;h[e++]=p.z;h[e++]=v}let d,a,e,h,l,c,f,n,g,r;this.setMaxPoints=function(m){m!==l&&(l=m,n=new Float32Array(t.FieldLine.FLOATS_PER_SEGMENT*(l-1)),h=new Float32Array(l),d=new Uint16Array(l),this.reset());return this};this.getMaxPoints=function(){return l};this.pushPoint=function(m,p,v){0<f&&(k(r.x,r.y,r.z,
m,p,v,1),k(r.x,r.y,r.z,m,p,v,-1),k(m,p,v,r.x,r.y,r.z,-1),k(m,p,v,r.x,r.y,r.z,1));r={x:m,y:p,z:v};f++};this.getPoints=function(){return n};this.getNpoints=function(){return f};this.pushArrow=function(m,p){b(m,p,1);b(m,p,0);b(p,p,0);b(m,p,-1);m=c*t.FieldLine.VERTICES_PER_ARROW;d[a++]=m;d[a++]=m+1;d[a++]=m+2;d[a++]=m+2;d[a++]=m+1;d[a++]=m+3;c++};this.getArrows=function(){return{vertices:h.slice(0,vizit.electricfield.FieldLine.VERTICES_PER_ARROW*vizit.electricfield.FieldLine.FLOATS_PER_VERTEX*c),indices:d.slice(0,
vizit.electricfield.FieldLine.LOCATIONS_PER_VERTEX*vizit.electricfield.FieldLine.FLOATS_PER_LOCATION*c),narrows:c}};this.getNarrows=function(){return c};this.reset=function(){g=f=c=e=a=0};this.setMaxPoints(q)};t.FieldLine.FLOATS_PER_LOCATION=3;t.FieldLine.LOCATIONS_PER_VERTEX=2;t.FieldLine.FLOATS_PER_DIRECTION=1;t.FieldLine.FLOATS_PER_VERTEX=t.FieldLine.LOCATIONS_PER_VERTEX*t.FieldLine.FLOATS_PER_LOCATION+t.FieldLine.FLOATS_PER_DIRECTION;t.FieldLine.VERTICES_PER_SEGMENT=4;t.FieldLine.FLOATS_PER_SEGMENT=
t.FieldLine.VERTICES_PER_SEGMENT*t.FieldLine.FLOATS_PER_VERTEX;t.FieldLine.VERTICES_PER_ARROW=4})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.FieldLineGenerator=function(q,k){let b,d,a,e,h,l,c;this.setCharges=function(f){h=f;return this};this.getCharges=function(){return h};this.getArrows=function(){return arrows};this.setMaxPoints=function(f){f>maxpoints&&(l=new vizit.electricfield.FieldLine(c));c=f;return this};this.getMaxPoints=function(){return c};this.setArrowLength=function(f){b=f;return this};this.getArrowLength=function(){return b};this.setArrowWidth=function(f){d=f;return this};this.getArrowWidth=function(){return d};
this.setArrowSpacing=function(f){a=f;return this};this.getArrowSpacing=function(){return a};this.setDs=function(f){e=f;return this};this.getDs=function(){return e};this.drawArrow=function(f,n,g,r,m,p,v,A){v.pushArrow({x:f-p*r[0]/m,y:n-p*r[1]/m,z:g-p*r[2]/m},{x:f,y:n,z:g})};this.generate=function(f,n,g,r){var m=0;var p=!1;var v=g;l.reset();for(g=0;g<c&&!p;g++){l.pushPoint(f,n,v);var A=h.getField(f,n,v);p=Math.sqrt(A[0]*A[0]+A[1]*A[1]+A[2]*A[2]);if(0===p)break;f+=r*A[0]/p*e;n+=r*A[1]/p*e;v+=r*A[2]/
p*e;m+=e;m>a&&(m=0,this.drawArrow(f,n,v,A,p,b,l,r));p=h.shouldStop(r,f,n,v)}return l};b=t.FieldLineGenerator.DEFAULT_ARROW_LENGTH;a=t.FieldLineGenerator.DEFAULT_ARROW_SPACING;e=k;c=q;l=new vizit.electricfield.FieldLine(c)};t.FieldLineGenerator.DEFAULT_ARROW_LENGTH=4;t.FieldLineGenerator.DEFAULT_ARROW_SPACING=24})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.FieldLineRenderer=function(q){let k=t.FieldLineRenderer.DEFAULT_LINE_WIDTH,b=t.FieldLineRenderer.DEFAULT_ARROW_WIDTH;this.setLineWidth=function(l){k=l;return this};this.getLineWidth=function(){return k};this.setArrowWidth=function(l){b=l;return this};this.getArrowWidth=function(){return b};this.createProgram=function(l){const c=l.createProgram("attribute vec3  current;attribute vec3  other;attribute float direction;uniform   float aspect;uniform   float halfWidth;uniform   mat4  modelViewMatrix;uniform   mat4  projectionMatrix;void main(){  mat4 projModelView    = projectionMatrix * modelViewMatrix;  vec4 currentProjected = projModelView * vec4(current, 1.0);  vec4 otherProjected   = projModelView * vec4(other, 1.0);  vec2 currentScreen    = currentProjected.xy / currentProjected.w;  currentScreen.x      *= aspect;  vec2 otherScreen      = otherProjected.xy / otherProjected.w;  otherScreen.x        *= aspect;  vec2 dir              = normalize(currentScreen - otherScreen);  vec2 normal           = vec2(-dir.y, dir.x);  normal               *= halfWidth;  normal.x             /= aspect;  vec4 offset = vec4(normal * direction, 0.0, 0.0);  gl_Position = currentProjected + offset;}","precision mediump float;void main(){  gl_FragColor = vec4(0.8,0.3,0.3,1.0);}"),
f=l.getAttribLocation(c,"current"),n=l.getAttribLocation(c,"direction"),g=l.getAttribLocation(c,"other"),r=l.getUniformLocation(c,"aspect"),m=l.getUniformLocation(c,"halfWidth"),p=l.getUniformLocation(c,"modelViewMatrix");l=l.getUniformLocation(c,"projectionMatrix");return{program:c,currentHandle:f,directionHandle:n,otherHandle:g,aspectHandle:r,halfWidthHandle:m,modelViewMatrixHandle:p,projectionMatrixHandle:l}};this.createArrowProgram=function(l){const c=l.createProgram("attribute vec3  current;attribute vec3  tip;attribute float direction;uniform   float aspect;uniform   float halfWidth;uniform   mat4  modelViewMatrix;uniform   mat4  projectionMatrix;varying vec3 vCurrent;void main(){  mat4 projModelView    = projectionMatrix * modelViewMatrix;  vec4 currentProjected = projModelView * vec4(current, 1.0);  vec4 tipProjected   =   projModelView * vec4(tip, 1.0);  vec2 currentScreen    = currentProjected.xy / currentProjected.w;  currentScreen.x      *= aspect;  vec2 tipScreen        = tipProjected.xy / tipProjected.w;  tipScreen.x          *= aspect;  vec2 dir              = currentScreen - tipScreen;  vec2 normal           = (dir == vec2(0.0, 0.0) ? vec2(0.0, 0.0) : normalize(vec2(-dir.y, dir.x)));  normal               *= halfWidth;  normal.x             /= aspect;  vec4 offset = (direction == 0.0 ?                             vec4(0.0, 0.0, 0.0, 0.0) :                              vec4((normal * direction / currentProjected.w) + dir/3.0, 0.0, 0.0));  gl_Position = currentProjected + offset;}",
"precision mediump float;void main(){  gl_FragColor = vec4(0.8,0.3,0.3,1.0);}"),f=l.getAttribLocation(c,"current"),n=l.getAttribLocation(c,"direction"),g=l.getAttribLocation(c,"tip"),r=l.getUniformLocation(c,"aspect"),m=l.getUniformLocation(c,"halfWidth"),p=l.getUniformLocation(c,"modelViewMatrix");l=l.getUniformLocation(c,"projectionMatrix");return{program:c,currentHandle:f,directionHandle:n,tipHandle:g,aspectHandle:r,halfWidthHandle:m,modelViewMatrixHandle:p,projectionMatrixHandle:l}};this.render=
function(l,c,f,n){const g=a.drawingBufferWidth/a.drawingBufferHeight,r=vizit.electricfield.FieldLine.FLOATS_PER_LOCATION,m=n.length,p=vizit.electricfield.FieldLine.FLOATS_PER_VERTEX*Float32Array.BYTES_PER_ELEMENT;if(0<m){a.useProgram(e.program);a.uniformMatrix4fv(e.modelViewMatrixHandle,!1,c);a.uniformMatrix4fv(e.projectionMatrixHandle,!1,l);a.uniform1f(e.aspectHandle,g);a.uniform1f(e.halfWidthHandle,k/2/a.drawingBufferHeight);for(var v=0;v<m;v++){f=n[v];if(!f.isEnabled())break;d.bindBuffer(f.fieldLineBufferHandle,
e.currentHandle,r,a.FLOAT,p,0);d.bindBuffer(f.fieldLineBufferHandle,e.otherHandle,r,a.FLOAT,p,r*Float32Array.BYTES_PER_ELEMENT);d.bindBuffer(f.fieldLineBufferHandle,e.directionHandle,1,a.FLOAT,p,2*r*Float32Array.BYTES_PER_ELEMENT);a.drawArrays(a.TRIANGLE_STRIP,0,4*(f.npoints-1))}a.useProgram(h.program);a.enableVertexAttribArray(h.tipHandle);a.enableVertexAttribArray(h.directionHandle);a.uniformMatrix4fv(h.modelViewMatrixHandle,!1,c);a.uniformMatrix4fv(h.projectionMatrixHandle,!1,l);a.uniform1f(h.aspectHandle,
g);a.uniform1f(h.halfWidthHandle,b/2/a.drawingBufferHeight);for(l=0;l<m;l++){f=n[l];if(!f.isEnabled())break;d.bindBuffer(f.fieldDirectionBufferHandle,h.currentHandle,r,a.FLOAT,p,0);d.bindBuffer(f.fieldDirectionBufferHandle,h.tipHandle,r,a.FLOAT,p,r*Float32Array.BYTES_PER_ELEMENT);d.bindBuffer(f.fieldDirectionBufferHandle,h.directionHandle,1,a.FLOAT,p,2*r*Float32Array.BYTES_PER_ELEMENT);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,f.fieldDirectionIndices);a.drawElements(a.TRIANGLES,6*f.narrows,a.UNSIGNED_SHORT,
0)}}};const d=q,a=d.getGLContext(),e=this.createProgram(d),h=this.createArrowProgram(d)};t.FieldLineRenderer.DEFAULT_LINE_WIDTH=3;t.FieldLineRenderer.DEFAULT_ARROW_WIDTH=5*t.FieldLineRenderer.DEFAULT_LINE_WIDTH})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};
(function(t){t.Cylinder=function(){var q;this.setColor=function(b){q=b};this.getColor=function(){return q};this.getCylinderModelView=function(b,d,a,e,h,l,c){var f=Math.sin(c);c=Math.cos(c);var n=Math.sin(l);l=Math.cos(l);var g=new Float32Array(16);g[0]=h*l*c;g[1]=h*c*n;g[2]=-h*f;g[3]=0;g[4]=-h*n;g[5]=h*l;g[6]=0;g[7]=0;g[8]=e*l*f;g[9]=e*n*f;g[10]=e*c;g[11]=0;g[12]=b;g[13]=d;g[14]=a;g[15]=1;return g};this.transformPoints=function(b,d,a,e){k[0]=b[0]*a;k[1]=b[1]*a;k[2]=b[2]*a;k[3]=b[3];k[4]=b[4]*a;k[5]=
b[5]*a;k[6]=b[6]*a;k[7]=b[7];k[8]=b[8]*d;k[9]=b[9]*d;k[10]=b[10]*d;k[11]=b[11];k[12]=b[12];k[13]=b[13];k[14]=b[14];k[15]=b[15];d=0;for(b=e.length;d<b;d++){a=e[d];var h=a[0];var l=a[1];var c=a[2];a[0]=k[0]*h+k[4]*l+k[8]*c+k[12];a[1]=k[1]*h+k[5]*l+k[9]*c+k[13];a[2]=k[2]*h+k[6]*l+k[10]*c+k[14]}return e};this.setupBuffers=function(b,d,a,e,h){var l=b.getGLContext();b.bindBuffer(a,d.getPositionHandle(),3,l.FLOAT,0,0);b.bindBuffer(e,d.getNormalHandle(),3,l.FLOAT,0,0);l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,
h)};this.drawCap=function(b,d,a){b.drawElements(b.TRIANGLE_FAN,d,b.UNSIGNED_SHORT,2*a)};this.drawSide=function(b,d,a){b.drawElements(b.TRIANGLE_STRIP,d,b.UNSIGNED_SHORT,2*a)};this.drawCylinder=function(b,d,a,e,h){b=b.getGLContext();b.uniformMatrix4fv(d.getModelViewMatrixHandle(),!1,a);h&&this.drawCap(b,e+2,0);this.drawSide(b,2*e+2,e+2);h&&this.drawCap(b,e+2,3*e+4)};this.fullRender=function(b,d,a,e,h,l,c){var f=b.getGLContext();var n=this.getBaseRadius();var g=this.getVertexBuffers(b);f.uniform4f(d.getSurfaceColorHandle(),
q.getRed(),q.getGreen(),q.getBlue(),q.getAlpha());var r=(this.getNindices()-6)/4;this.setupBuffers(b,d,g.vertices,g.normals,g.indices);k[3]=a[3];k[7]=a[7];k[8]=a[8]*e;k[9]=a[9]*e;k[10]=a[10]*e;k[11]=a[11];k[12]=a[12];k[13]=a[13];k[14]=a[14];k[15]=a[15];f.cullFace(f.FRONT);for(e=l;e>=h;e--)g=e/n,k[0]=a[0]*g,k[1]=a[1]*g,k[2]=a[2]*g,k[4]=a[4]*g,k[5]=a[5]*g,k[6]=a[6]*g,this.drawCylinder(b,d,k,r,c);f.cullFace(f.BACK);for(e=h;e<=l;e++)g=e/n,k[0]=a[0]*g,k[1]=a[1]*g,k[2]=a[2]*g,k[4]=a[4]*g,k[5]=a[5]*g,k[6]=
a[6]*g,this.drawCylinder(b,d,k,r,c)};this.translateBounds=function(b,d,a,e,h,l,c){var f=(d+h)/2;var n=(a+l)/2;var g=(e+c)/2;d-=f;a-=n;e-=g;h-=f;l-=n;c-=g;b.setTx(f).setTy(n).setTz(g).setX0(d).setY0(a).setZ0(e).setX1(h).setY1(l).setZ1(c)};this.sign=function(b){return 0>b?-1:1};this.zAxisRotation=function(b,d,a,e,h){var l=Math.atan2(h-a,e-d);d=-this.sign(e)*Math.sqrt(d*d+a*a);a=0;e=-d;h=0;b.setX0(d).setY0(a).setX1(e).setY1(h).setPhi(l)};this.yAxisRotation=function(b,d,a,e,h,l,c){a=Math.sqrt(d*d+a*a+
e*e);l=Math.acos(c/a);e=this.sign(c);c=e*a;h=d=0;b.setZ0(-e*a).setZ1(c).setX0(d).setX1(h).setTheta(l)};this.scale=function(b,d,a){var e=this.sign(a);d=a-d;b.setZ0(.5*-e).setZ1(.5*e).setHeight(d)};var k=new Float32Array(16)};t.Cylinder.prototype=new vizit.geometry.Cylinder})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.GaussianCylinder=function(q,k,b,d,a,e,h,l){this.setEnabled=function(y){f=vizit.utility.toBoolean(y)};this.isEnabled=function(){return f};this.setX=function(y){v=y;w[12]=v;return this};this.getX=function(){return v};this.setY=function(y){A=y;w[13]=A;return this};this.getY=function(){return A};this.setZ=function(y){x=y;w[14]=x;return this};this.getZ=function(){return x};this.setOrigin=function(y){this.setX(y[0]);this.setY(y[1]);return this.setZ(y[2])};this.getOrigin=function(){return[v,
A,x]};this.setR=function(y){m=y;return this};this.getR=function(){return m};this.setHeight=function(y){n=y;return this};this.getHeight=function(){return n};this.setTheta=function(y){p=y;return this};this.getTheta=function(){return p};this.setPhi=function(y){r=y;return this};this.getPhi=function(){return r};this.setName=function(y){g=y};this.getName=function(){return g};this.render=function(y,J){f&&this.fullRender(y,J,w,n,m,m,!0)};var c=new vizit.utility.Color(.5,.5,.5,.5);var f=!0;var n=d;var g=l;
var r=e;var m=a;var p=h;var v=q;var A=k;var x=b;this.setColor(c);var w=this.getCylinderModelView(v,A,x,this.getBaseHeight(),this.getBaseRadius(),r,p)};t.GaussianCylinder.prototype=new vizit.utility.Cylinder})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.GaussianSphere=function(q,k,b,d,a){var e;this.setColor=function(m){h=m};this.getColor=function(){return h};this.setEnabled=function(m){l=vizit.utility.toBoolean(m)};this.isEnabled=function(){return l};this.setX=function(m){n=m;return this};this.getX=function(){return n};this.setY=function(m){g=m;return this};this.getY=function(){return g};this.setZ=function(m){r=m;return this};this.getZ=function(){return r};this.setR=function(m){f=m;return this};this.getR=function(){return f};this.setName=
function(m){c=m};this.getName=function(){return c};this.getModelView=function(m){"undefined"===typeof m&&(m=1);"undefined"===typeof e?(e=new Float32Array(16),e[0]=m,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=m,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=m,e[11]=0,e[12]=n,e[13]=g,e[14]=r,e[15]=1):(e[0]=m,e[5]=m,e[10]=m);return e};this.drawFullSurface=function(m,p,v,A,x,w){var y=m.getGLContext();m.bindBuffer(v,p.getPositionHandle(),3,y.FLOAT,0,0);m.bindBuffer(A,p.getNormalHandle(),3,y.FLOAT,0,0);y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,
x);y.drawElements(y.TRIANGLES,w,y.UNSIGNED_SHORT,0)};this.render=function(m,p){if(l){var v=m.getGLContext();var A=this.getIntrinsicRadius();var x=this.getVertexBuffers(m);v.uniformMatrix4fv(p.getModelViewMatrixHandle(),!1,this.getModelView(f/A));v.uniform4f(p.getSurfaceColorHandle(),h.getRed(),h.getGreen(),h.getBlue(),h.getAlpha());v.cullFace(v.FRONT);this.drawFullSurface(m,p,x.vertices,x.normals,x.indices,this.getNindices());v.cullFace(v.BACK);this.drawFullSurface(m,p,x.vertices,x.normals,x.indices,
this.getNindices())}};var h=new vizit.utility.Color(.5,.5,.5,.5);var l=!0;var c=a;var f=d;var n=q;var g=k;var r=b};t.GaussianSphere.prototype=new vizit.geometry.Sphere})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.ChargedCylinder=function(q,k,b,d,a,e,h,l,c,f,n,g){var r,m,p,v,A,x;this.setHeight=function(C){r=C;w=!0};this.getHeight=function(){return r};this.setTx=function(C){v=C;w=!0;return this};this.getTx=function(){return v};this.setTy=function(C){A=C;w=!0;return this};this.getTy=function(){return A};this.setTz=function(C){x=C;w=!0;return this};this.getTz=function(){return x};this.setX0=function(C){K=C;w=!0;return this};this.getX0=function(){return K};this.setY0=function(C){M=C;w=!0;return this};
this.getY0=function(){return M};this.setZ0=function(C){O=C;w=!0;return this};this.getZ0=function(){return O};this.setX1=function(C){S=C;w=!0;return this};this.getX1=function(){return S};this.setY1=function(C){W=C;w=!0;return this};this.getY1=function(){return W};this.setZ1=function(C){X=C;w=!0;return this};this.getZ1=function(){return X};this.setR0=function(C){E=C;w=!0;return this};this.getR0=function(){return E};this.setR1=function(C){F=C;w=!0;return this};this.getR1=function(){return F};this.setPhi=
function(C){m=C;w=!0;return this};this.getPhi=function(){return m};this.setTheta=function(C){p=C;w=!0;return this};this.getTheta=function(){return p};this.setNfieldLines=function(C){G=C;w=!0;return this};this.getNfieldLines=function(){return G};this.setModified=function(C){w=C;return this};this.isModified=function(){return w};this.setName=function(C){y=C;return this};this.getName=function(){return y};this.getStartPoints=function(){var C=[];if(0!==z+G){var I=this.sign(J);var N=Math.max(2,Math.round(Math.abs(J*
Math.PI*(F*F-E*E)*z*r)))+G;var R=(E+1)/F;var u=.707106781*(E+1)/F;var B=-.5;var L=1/(N-1);for(var H=0;H<N;H++)C.push([R,0,B,I]),C.push([-R,0,B,I]),C.push([0,R,B,I]),C.push([0,-R,B,I]),C.push([u,u,B,I]),C.push([u,-u,B,I]),C.push([-u,-u,B,I]),C.push([-u,u,B,I]),B+=L}return this.transformPoints(Y,r/this.getBaseHeight(),F/this.getBaseRadius(),C)};this.getNormal=function(C,I,N){var R={};var u=-((K-C)*U+(M-I)*T+(O-N)*D)/(P*P);var B=K+u*U;var L=M+u*T;u=O+u*D;R.x=C-B;R.y=I-L;R.z=N-u;return R};this.getField=
function(C,I,N){var R=Array(3);I=this.getNormal(C,I,N);N=Math.sqrt(I.x*I.x+I.y*I.y+I.z*I.z);C=2*(N<E?0:N<F?Math.PI*(N*N-E*E)*J:Math.PI*(F*F-E*E)*J)/N;R[0]=C*I.x/N;R[1]=C*I.y/N;R[2]=C*I.z/N;return R};this.render=function(C,I){this.fullRender(C,I,Y,r/this.getBaseHeight(),E/this.getBaseRadius(),F/this.getBaseRadius(),!1)};var w=!0;var y=g;var J="undefined"===typeof c?0:c;var z="undefined"===typeof f?0:f;var G="undefined"===typeof n?0:n;var E=h;var F=l;var K=q;var M=k;var O=b;var S=d;var W=a;var X=e;
h=0<J?new vizit.utility.Color(.05,.05,.8,.3):0>J?new vizit.utility.Color(.8,.05,.05,.3):new vizit.utility.Color(.5,.5,.5,.2);this.setColor(h);this.translateBounds(this,K,M,O,S,W,X);this.zAxisRotation(this,K,M,S,W);this.yAxisRotation(this,K,M,O,S,W,X);this.scale(this,O,X);K=q;M=k;O=b;S=d;W=a;X=e;var Y=this.getCylinderModelView(v,A,x,this.getBaseHeight(),this.getBaseRadius(),m,p);var U=S-K;var T=W-M;var D=X-O;var P=Math.sqrt(U*U+T*T+D*D)};t.ChargedCylinder.prototype=new vizit.utility.Cylinder})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.ChargedLine=function(q,k,b,d,a,e,h,l,c,f){var n,g,r,m,p,v;this.computeColor=function(D){return 0<D?new vizit.utility.Color(.05,.05,.8,.8):0>D?new vizit.utility.Color(.8,.05,.05,.8):new vizit.utility.Color(.5,.5,.5,.8)};this.setChargeDensity=function(D){A=D;x=!0;this.setColor(this.computeColor(A))};this.getChargeDensity=function(){return A};this.setHeight=function(D){n=D;x=!0};this.getHeight=function(){return n};this.setTx=function(D){m=D;x=!0;return this};this.getTx=function(){return m};
this.setTy=function(D){p=D;return this};this.getTy=function(){return p};this.setTz=function(D){v=D;x=!0;return this};this.getTz=function(){return v};this.setX0=function(D){E=D;x=!0;return this};this.getX0=function(){return E};this.setY0=function(D){F=D;x=!0;return this};this.getY0=function(){return F};this.setZ0=function(D){K=D;x=!0;return this};this.getZ0=function(){return K};this.setX1=function(D){M=D;x=!0;return this};this.getX1=function(){return M};this.setY1=function(D){O=D;x=!0;return this};
this.getY1=function(){return O};this.setZ1=function(D){S=D;x=!0;return this};this.getZ1=function(){return S};this.setR0=function(D){z=D;x=!0;return this};this.getR0=function(){return z};this.setR1=function(D){G=D;x=!0;return this};this.getR1=function(){return G};this.setPhi=function(D){g=D;x=!0;return this};this.getPhi=function(){return g};this.setTheta=function(D){r=D;x=!0;return this};this.getTheta=function(){return r};this.setNfieldLines=function(D){J=D;x=!0;return this};this.getNfieldLines=function(){return J};
this.setModified=function(D){x=D;return this};this.isModified=function(){return x};this.setName=function(D){w=D;return this};this.getName=function(){return w};this.getStartPoints=function(){var D=[];if(0!==y+J){var P=this.sign(A);var C=Math.max(2,Math.round(Math.abs(A*y*n)))+J;var I=-.5;var N=1/(C-1);for(var R=0;R<C;R++)D.push([1,0,I,P]),D.push([-1,0,I,P]),D.push([0,1,I,P]),D.push([0,-1,I,P]),D.push([.707106781,.707106781,I,P]),D.push([.707106781,-.707106781,I,P]),D.push([-.707106781,-.707106781,
I,P]),D.push([-.707106781,.707106781,I,P]),I+=N}return this.transformPoints(W,n/this.getBaseHeight(),(z+1)/this.getBaseRadius(),D)};this.getNormal=function(D,P,C){var I={};var N=-((E-D)*X+(F-P)*Y+(K-C)*U)/(T*T);var R=E+N*X;var u=F+N*Y;N=K+N*U;I.x=D-R;I.y=P-u;I.z=C-N;return I};this.getField=function(D,P,C){C=this.getNormal(D,P,C);var I=Math.sqrt(C.x*C.x+C.y*C.y+C.z*C.z);D=Array(3);P=2*A/I;D[0]=P*C.x/I;D[1]=P*C.y/I;D[2]=P*C.z/I;return D};this.render=function(D,P){this.fullRender(D,P,W,n,z,G,!1)};var A=
"undefined"===typeof h?0:h;this.setColor(this.computeColor(A));var x=!0;var w=f;var y="undefined"===typeof l?0:l;var J="undefined"===typeof c?0:c;var z=0;var G=3;var E=q;var F=k;var K=b;var M=d;var O=a;var S=e;this.translateBounds(this,E,F,K,M,O,S);this.zAxisRotation(this,E,F,M,O);this.yAxisRotation(this,E,F,K,M,O,S);this.scale(this,K,S);E=q;F=k;K=b;M=d;O=a;S=e;var W=this.getCylinderModelView(m,p,v,this.getBaseHeight(),this.getBaseRadius(),g,r);var X=M-E;var Y=O-F;var U=S-K;var T=Math.sqrt(X*X+Y*
Y+U*U)};t.ChargedLine.prototype=new vizit.utility.Cylinder})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.ChargedPlane=function(q,k,b,d,a,e,h,l,c,f,n,g,r,m,p,v){var A,x,w,y,J,z,G,E,F;this.setNfieldLines=function(u){X=u;K=!0;return this};this.getNfieldLines=function(){return X};this.setModified=function(u){K=u;return this};this.isModified=function(){return K};this.setName=function(u){M=u;return this};this.getName=function(){return M};this.calculateNormal=function(u){var B=Array(3);B[0]=(u[4]-u[1])*(u[11]-u[2])-(u[5]-u[2])*(u[10]-u[1]);B[1]=(u[5]-u[2])*(u[9]-u[0])-(u[3]-u[0])*(u[11]-u[2]);
B[2]=(u[3]-u[0])*(u[10]-u[1])-(u[4]-u[1])*(u[9]-u[0]);u=Math.sqrt(B[0]*B[0]+B[1]*B[1]+B[2]*B[2]);B[0]/=u;B[1]/=u;B[2]/=u;return B};this.adjustStartPoints=function(u){var B=u.length;for(var L=0;L<B;L++){var H=u[L];var Z=H[0];var aa=H[1];var V=H[2];H[0]=z+C*(y*Z*D+V*I)+R*(-J*aa*P+N*(-y*Z*I+V*D));H[1]=G+C*(J*aa*P+N*(y*Z*I-V*D))+R*(y*Z*D+V*I);H[2]=E+J*aa*N+P*(-y*Z*I+V*D)}return u};this.getStartPoints=function(){var u;var B=Math.abs(S*W)+X/Math.abs(y*J);var L=[];if(0<B){var H=Math.sqrt(1/B);B=H/Math.abs(y);
H/=Math.abs(J);var Z=!1;var aa=0<S?1:-1;var V=Math.min(-.5+B/2,.5);for(u=Math.min(-.5+H/2,.5);!Z;)L.push([V,u,.4,aa]),L.push([V,u,-.4,aa]),u+=H,.5<u?(u=.5-(u-.5),V+=B,H=-H):-.5>u&&(u=-.5-(u- -.5),V+=B,H=-H),Z=.5<V}return this.adjustStartPoints(L)};this.getField=function(u,B,L){var H=Array(3);u=(u-Y[0])*U[0]+(B-Y[1])*U[1]+(L-Y[2])*U[2];B=O*S;0===u&&(H[0]=0,H[1]=0,H[2]=0);0<u?(H[0]=B*U[0],H[1]=B*U[1],H[2]=B*U[2]):(H[0]=-B*U[0],H[1]=-B*U[1],H[2]=-B*U[2]);return H};this.translateBoundingBox=function(u){z=
(q+h)/2;G=(k+l)/2;E=(b+c)/2;u[0]-=z;u[1]-=G;u[2]-=E;u[3]-=z;u[4]-=G;u[5]-=E;u[6]-=z;u[7]-=G;u[8]-=E;u[9]-=z;u[10]-=G;u[11]-=E;return u};this.zAxisRotation=function(u){var B=u[3]-u[0];var L=u[0]-u[9];0===B||0===L?(w=0,F=0===B&&0===L?0===u[4]-u[1]?1:2:0===B?1:2):(B=(a-k)/B,L=(l-a)/L,Math.abs(B)<Math.abs(L)?(w=Math.atan(B),F=1):(w=Math.atan(L),F=2));C=Math.cos(w);R=Math.sin(w);for(var H=0;4>H;H++)L=C*u[3*H]-R*u[3*H+1],B=R*u[3*H]+C*u[3*H+1],u[3*H]=L,u[3*H+1]=B;return u};this.xAxisRotation=function(u,
B){if(1===B){B=u[1]-u[10];var L=u[2]-u[11]}else B=u[4]-u[1],L=u[5]-u[2];N=x=0;P=1;if(0!==L&&0!==B){x=Math.atan(L/B);N=Math.sin(x);P=Math.cos(x);for(var H=0;4>H;H++)B=P*u[3*H+1]-N*u[3*H+2],L=N*u[3*H+1]+P*u[3*H+2],u[3*H+1]=B,u[3*H+2]=L}return u};this.yAxisRotation=function(u,B){if(1===B){B=u[0]-u[9];var L=u[2]-u[11]}else B=u[3]-u[0],L=u[5]-u[2];I=A=0;D=1;if(0!==L){0!==B?(A=Math.atan(L/B),I=Math.sin(A),D=Math.cos(A)):(A=1.5707963267948966,I=1,D=0);for(var H=0;4>H;H++)B=D*u[3*H]+I*u[3*H+2],L=-I*u[3*H]+
D*u[3*H+2],u[3*H]=B,u[3*H+2]=L}return u};this.scaleBoundingbox=function(u,B){1===B?(y=u[0]-u[9],J=u[4]-u[1]):(y=u[3]-u[0],J=u[1]-u[10]);for(B=0;4>B;B++)0!==y&&(u[3*B]/=y),0!==J&&(u[3*B+1]/=J);return u};this.getModelView=function(){return T};this.drawFullSurface=function(u,B,L,H,Z,aa){var V=u.getGLContext();u.bindBuffer(L,B.getPositionHandle(),3,V.FLOAT,0,0);u.bindBuffer(H,B.getNormalHandle(),3,V.FLOAT,0,0);V.bindBuffer(V.ELEMENT_ARRAY_BUFFER,Z);V.drawElements(V.TRIANGLES,aa,V.UNSIGNED_SHORT,0)};this.render=
function(u,B){var L=u.getGLContext();var H=this.getVertexBuffers(u);0<S?L.uniform4f(B.getSurfaceColorHandle(),.05,.05,.8,.4):0>S?L.uniform4f(B.getSurfaceColorHandle(),.8,.05,.05,.4):L.uniform4f(B.getSurfaceColorHandle(),.5,.5,.5,.2);var Z=this.getNindices();L.uniformMatrix4fv(B.getModelViewMatrixHandle(),!1,this.getModelView());L.disable(L.CULL_FACE);this.drawFullSurface(u,B,H.vertices,H.normals,H.indices,Z);L.enable(L.CULL_FACE)};var K=!0;var M=v;var O=6.283185307179586;var S="undefined"===typeof r?
0:r;var W="undefined"===typeof m?0:m;var X="undefined"===typeof p?0:p;var Y=[q,k,b,d,a,e,h,l,c,f,n,g];d=Y.slice(0);var U=this.calculateNormal(Y);d=this.translateBoundingBox(d);d=this.zAxisRotation(d);d=this.xAxisRotation(d,F);d=this.yAxisRotation(d,F);d=this.scaleBoundingbox(d,F);var T=new Float32Array(16);var D=Math.cos(-A);var P=Math.cos(-x);var C=Math.cos(-w);var I=Math.sin(-A);var N=Math.sin(-x);var R=Math.sin(-w);T[0]=y*(D*C-I*N*R);T[1]=y*(D*R+C*I*N);T[2]=-y*P*I;T[3]=0;T[4]=-J*P*R;T[5]=J*P*C;
T[6]=J*N;T[7]=0;T[8]=N*R*D+I*C;T[9]=-(N*D*C-I*R);T[10]=D*P;T[11]=0;T[12]=z;T[13]=G;T[14]=E;T[15]=1};t.ChargedPlane.prototype=new vizit.geometry.Square})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.ChargedSphere=function(q,k,b,d,a,e,h,l,c){var f;let n;var g=!0;var r=c;var m=0;var p=d;var v=p*p;var A=v*p;var x=a;var w=x*x*x;var y="undefined"===typeof e?0:e;var J="undefined"===typeof h?0:h;n="undefined"===typeof l?0:l;this.setA=function(z){p=z;v=p*p;A=v*p;g=!0;return this};this.getA=function(){return p};this.setB=function(z){x=z;w=x*x*x;g=!0;return this};this.getB=function(){return x};this.setNindices=function(z){m=z;return this};this.setModified=function(z){g=z;return this};this.isModified=
function(){return g};this.setNfieldLines=function(z){n=z;g=!0;return this};this.getNfieldLines=function(){return n};this.setName=function(z){r=z;return this};this.getName=function(){return r};this.getStartPoints=function(){const z=0<y?1:0>y?-1:0,G=Math.round(J*y*z)+n,E=3.6/Math.sqrt(G);let F=0;const K=p+.2*(x-p),M=[];let O,S;for(var W=1;W<G;W++)S=-1+2*W/G,O=Math.sqrt(1-S*S),F+=E/O,M.push([Math.cos(F)*O*K+q,S*K+k,Math.sin(F)*O*K+b,z]);return M};this.getField=function(z,G,E){var F=[0,0,0];z-=q;G-=k;
E-=b;var K=z*z+G*G+E*E;if(K<=v)return F;var M=Math.sqrt(K);K=M>=p&&M<x?y*(M-A/K)/(w-A):y/K;F[0]=K*z/M;F[1]=K*G/M;F[2]=K*E/M;return F};this.getModelView=function(z){z||(z=1);f?(f[0]=z,f[5]=z,f[10]=z):(f=new Float32Array(16),f[0]=z,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=z,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=z,f[11]=0,f[12]=q,f[13]=k,f[14]=b,f[15]=1);return f};this.drawFullSurface=function(z,G,E,F,K,M){var O=z.getGLContext();z.bindBuffer(E,G.getPositionHandle(),3,O.FLOAT,0,0);z.bindBuffer(F,G.getNormalHandle(),
3,O.FLOAT,0,0);O.bindBuffer(O.ELEMENT_ARRAY_BUFFER,K);O.drawElements(O.TRIANGLES,M,O.UNSIGNED_SHORT,0)};this.render=function(z,G){var E;var F=z.getGLContext();var K=this.getIntrinsicRadius();var M=this.getVertexBuffers(z);0<y?F.uniform4f(G.getSurfaceColorHandle(),.05,.05,.8,.2):0>y?F.uniform4f(G.getSurfaceColorHandle(),.8,.05,.05,.2):F.uniform4f(G.getSurfaceColorHandle(),.5,.5,.5,.2);m=this.getNindices();F.cullFace(F.FRONT);for(E=x;E>=p;E--){var O=E/K;F.uniformMatrix4fv(G.getModelViewMatrixHandle(),
!1,this.getModelView(O));this.drawFullSurface(z,G,M.vertices,M.normals,M.indices,m)}F.cullFace(F.BACK);for(E=p;E<=x;E++)O=E/K,this.drawFullSurface(z,G,M.vertices,M.normals,M.indices,m),F.uniformMatrix4fv(G.getModelViewMatrixHandle(),!1,this.getModelView(O))}};t.ChargedSphere.prototype=new vizit.geometry.Sphere})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.Charge=function(q,k,b,d,a,e,h){var l;this.setCharge=function(p){c=vizit.utility.ensureNumber(p);f=!0};this.getCharge=function(){return c};this.setX=function(p){g[0]=vizit.utility.ensureNumber(p);f=!0};this.getX=function(){return g[0]};this.setY=function(p){g[1]=vizit.utility.ensureNumber(p);f=!0};this.getY=function(){return g[1]};this.setZ=function(p){g[2]=vizit.utility.ensureNumber(p);f=!0};this.getZ=function(){return g[2]};this.setPosition=function(p){g=p;f=!0};this.getPosition=function(){return g};
this.setNfieldLines=function(p){m=p;f=!0};this.getNfieldLines=function(){return m};this.setModified=function(p){f=p};this.isModified=function(){return f};this.setName=function(p){n=p};this.getName=function(){return n};this.getField=function(p,v,A){var x=[0,0,0];p-=g[0];v-=g[1];A-=g[2];l=p*p+v*v+A*A;if(0>=l)return x;var w=Math.sqrt(l);var y=c/l;x[0]=y*p/w;x[1]=y*v/w;x[2]=y*A/w;return x};this.getFieldSeedPointsI=function(p){var v=[];var A=0<c?1:0>c?-1:0;p=Math.round(p*c*A);var x=2/p;for(var w=0;w<p;w++){var y=
w*x-1+x/2;var J=Math.sqrt(1-y*y);var z=2.39996323*w;v.push([Math.cos(z)*J+g[0],y+g[1],Math.sin(z)*J+g[2],A])}return v};this.getStartPoints=function(p,v){var A=0<c?1:0>c?-1:0;var x=Math.round(r*c*A)+1+m;var w=3.6/Math.sqrt(x);p="undefined"===typeof p?Math.PI/2:p;v="undefined"===typeof v?1:v;var y=[];if(0<x)for(var J=1;J<x;J++){var z=-1+2*J/x;var G=Math.sqrt(1-z*z);p+=w/G;y.push([Math.cos(p)*G*v+g[0],z*v+g[1],Math.sin(p)*G*v+g[2],A])}return y};this.shouldStop=function(p,v,A,x){return 0>p*c&&4>l};var c=
d;var f=!0;var n=h;var g=[vizit.utility.ensureNumber(q),vizit.utility.ensureNumber(k),vizit.utility.ensureNumber(b)];var r="undefined"===typeof a?0:a;var m="undefined"===typeof e?0:e};t.Charges=function(){var q;this.addCharge=function(e){b=d.push(e);return this};for(var k=0;k<arguments.length;k++)this.addCharge(arguments[k]);this.getNcharges=function(){return b};this.getCharges=function(){return d};this.addDistribution=function(e){q=a.push(e);return this};this.getNdistributions=function(){return q};
this.getDistributions=function(){return a};this.chargesModified=function(){var e=!1;for(k=0;k<b&&!e;k++)e=e||d[k].isModified();return e};this.distributionsModified=function(){var e=!1;for(k=0;k<q&&!e;k++)e=e||a[k].isModified();return e};this.isModified=function(){return this.chargesModified()||this.distributionsModified()};this.setModified=function(e){for(k=0;k<b;k++)d[k].setModified(e);for(k=0;k<q;k++)a[k].setModified(e)};this.getStartPoints=function(e,h){var l=e,c=1.57079632679/(b+1),f=[];for(e=
0;e<b;e++){var n=d[e];f=f.concat(n.getStartPoints(l,h));l+=c}for(e=0;e<q;e++)f=f.concat(a[e].getStartPoints());return f};this.getField=function(e,h,l){for(var c,f=[0,0,0],n=0;n<b;n++)c=d[n],c=c.getField(e,h,l),f[0]+=c[0],f[1]+=c[1],f[2]+=c[2];for(n=0;n<q;n++)c=a[n].getField(e,h,l),f[0]+=c[0],f[1]+=c[1],f[2]+=c[2];return f};this.shouldStop=function(e,h,l,c){var f=!1;for(var n=0;n<b&&!f;n++)f=d[n],f=f.shouldStop(e,h,l,c);return f};var b=0;var d=[];var a=[]}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(t){t.ElectricField=function(q){var k,b;this.setLineWidth=function(w){v.setLineWidth(w);return this};this.getLineWidth=function(){return v.getLineWidth()};this.setArrowSpacing=function(w){p.setArrowSpacing(w);return this};this.getArrowSpacing=function(){return p.getArrowSpacing()};this.setArrowHeadSize=function(w){p.setArrowLength(w);return this};this.getArrowHeadSize=function(){return p.getArrowLength()};this.setArrowWidth=function(w){v.setArrowWidth(w);return this};this.getArrowWidth=function(){return v.getArrowWidth()};
this.setColor=function(w){d=w;return this};this.getColor=function(){return d};this.setCharges=function(w){b=w;m.setCharges(b);p.setCharges(b);return this};this.getCharges=function(){return b};this.addGaussianSurface=function(w){e.push(w);return this};this.getGaussianSurfaces=function(){return e};this.getGlUtility=function(){return n};this.setMaxVectors=function(w){h=w;return this};this.getMaxVectors=function(){return h};this.setModelViewMatrix=function(w){g=w;l=n.extractRotationPart(g,l);return this};
this.getModelViewMatrix=function(){return g};this.setProjectionMatrix=function(w){r=w;return this};this.addStartPoint=function(w,y,J,z){c.push([w,y,J,z]);return this};this.addStartPoints=function(w){c=c.concat(w)};this.getStartPoints=function(){return c};this.render=function(){if(f){var w=n.getGLContext();b.chargesModified()?(this.setupCharges(),this.setupFieldLines()):b.distributionsModified()&&this.setupFieldLines();n.clear();A.render(r,g,k,b);v.render(r,g,d,a);w.enable(w.BLEND);w.enable(w.CULL_FACE);
w.blendFunc(w.SRC_ALPHA,w.ONE_MINUS_SRC_ALPHA);x.render(r,g,l,b.getDistributions());w.disable(w.DEPTH_TEST);x.render(r,g,l,e);w.enable(w.DEPTH_TEST);w.disable(w.BLEND);w.disable(w.CULL_FACE);b.setModified(!1)}};this.setupCharges=function(w){k||(w=n.getGLContext(),k=w.createBuffer());w=m.generate();n.loadData(k,w)};this.setupFieldLines=function(){var w;var y=[];y=y.concat(b.getStartPoints(0,5));y=y.concat(c);var J=y.length;var z=a.length;var G=Math.min(J,z);for(w=0;w<G;++w){var E=y[w];E=p.generate(E[0],
E[1],E[2],E[3]);a[w].reload(n,E)}for(;w<z;++w)a[w].disable();for(;w<J;++w)E=y[w],E=p.generate(E[0],E[1],E[2],E[3]),a.push(new vizit.electricfield.FieldLineVBO(n,E))};this.start=function(){f=!0;this.render()};var d=new Float32Array([.8,.3,.3,1]);var a=[];var e=[];var h=5;var l=new Float32Array([1,0,0,0,1,0,0,0,1]);var c=[];var f=!1;const n=q.getGlUtility();n.clearColor(0,0,0,0);let g=q.getModelViewMatrix(),r=q.getProjectionMartix();q.registerRenderer(this);const m=new vizit.electricfield.ChargeGenerator,
p=new vizit.electricfield.FieldLineGenerator(3E3,.6),v=new vizit.electricfield.FieldLineRenderer(n),A=new vizit.electricfield.ChargeRenderer(n),x=new vizit.electricfield.SurfaceRenderer(n)}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};
(function(t){t.VectorFieldGenerator=function(q){let k;this.setStartPoints=function(g){h=g;return this};this.addStartPoints=function(g){h.push(...g);return this};this.getStartPoints=function(){return h};this.setMaxVectors=function(g){f=g;return this};this.getMaxVectors=function(){return f};this.setLineWidth=function(g){a=g;return this};this.getLineWidth=function(){return a};this.setArrowSize=function(g){e=g;return this};this.getArrowSize=function(){return e};this.setArrowHeadSize=function(g){d=g;return this};
this.getArrowHeadSize=function(){return d};this.setArrowHeadWidth=function(g){b=g;return this};this.getArrowHeadWidth=function(){return b};this.setVectorSpacing=function(g){n=g;return this};this.getVectorSpacing=function(){return n};this.setDs=function(g){l=g;return this};this.getDs=function(){return l};this.pushVertex=function(g,r,m,p,v){g.push(r.x);g.push(r.y);g.push(r.z);g.push(m.x);g.push(m.y);g.push(m.z);g.push(p);g.push(v)};this.generateVector=function(g,r,m,p,v,A,x,w,y,J,z){v={};v.x=g;v.y=
r;v.z=m;const G={};G.x=g+p[0]*y;G.y=r+p[1]*y;G.z=m+p[2]*y;this.pushVertex(z,v,G,A,0);this.pushVertex(z,v,G,-A,0);this.pushVertex(z,G,v,-A,x);this.pushVertex(z,G,v,A,x);this.pushVertex(z,G,v,w,1.33*x);this.pushVertex(z,G,v,0,x);this.pushVertex(z,G,v,0,0);this.pushVertex(z,G,v,-w,1.33*x);g=8*J;z.pushIndex(g);z.pushIndex(g+1);z.pushIndex(g+2);z.pushIndex(g+2);z.pushIndex(g+1);z.pushIndex(g+3);z.pushIndex(g+4);z.pushIndex(g+5);z.pushIndex(g+6);z.pushIndex(g+6);z.pushIndex(g+5);z.pushIndex(g+7)};this.trace=
function(g,r,m,p,v,A,x,w,y){var J,z,G;var E=G=J=0;for(z=!1;E<A&&!z;){var F=g.getField(r,m,p);z=Math.sqrt(F[0]*F[0]+F[1]*F[1]+F[2]*F[2]);if(0===z)break;J>=G&&(this.generateVector(r,m,p,F,z,a,d,b,w,x+E,y),G=J+Math.max(z*n*w,1),E++);r+=v*F[0]/z*l;m+=v*F[1]/z*l;p+=v*F[2]/z*l;J+=l;z=g.shouldStop(v,r,m,p)}return E};this.generateField=function(){var g;var r=h.length;k=0;var m=new vizit.utility.IndexedVertices(vizit.vectorfield.LineRenderer.VERTICES_PER_ARROW*vizit.vectorfield.LineRenderer.FLOATS_PER_VERTEX*
f*r,12*f*r);for(g=0;g<r;g++){var p=h[g];p[4]=k;k+=this.trace(c,p[0],p[1],p[2],p[3],f,k,e,m)}return m};let b=t.VectorFieldGenerator.DEFAULT_ARROW_HEAD_WIDTH,d=t.VectorFieldGenerator.DEFAULT_ARROW_HEAD_SIZE,a=t.VectorFieldGenerator.DEFAULT_LINE_WIDTH,e=t.VectorFieldGenerator.DEFAULT_ARROW_SIZE,h=[],l=t.VectorFieldGenerator.DEFAULT_DS,c=q,f=t.VectorFieldGenerator.DEFAULT_MAX_VECTORS,n=t.VectorFieldGenerator.DEFAULT_VECTOR_SPACING};t.VectorFieldGenerator.DEFAULT_ARROW_HEAD_WIDTH=10;t.VectorFieldGenerator.DEFAULT_ARROW_HEAD_SIZE=
10;t.VectorFieldGenerator.DEFAULT_ARROW_SIZE=4;t.VectorFieldGenerator.DEFAULT_LINE_WIDTH=2;t.VectorFieldGenerator.DEFAULT_DS=.33;t.VectorFieldGenerator.DEFAULT_MAX_VECTORS=5;t.VectorFieldGenerator.DEFAULT_VECTOR_SPACING=1.2})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.field=window.vizit.field||{};
(function(t){t.Stage=function(q){var k,b;this.getContext=function(){return a.getGLContext()};this.registerRenderer=function(f){k=f;return this};this.getRenderer=function(){return k};this.setModelViewMatrix=function(f){h=f;k.setModelViewMatrix(h);return this};this.getModelViewMatrix=function(){return h};this.requestRender=function(){b||(b=!0,requestAnimationFrame(this.render))};this.render=function(){k.render();b=!1};this.start=function(){k.start()};this.setScale=function(f){e=f;1>e&&(e=1);l=a.generateOrthographicMatrix(e,
e,-e,e);k&&(k.setProjectionMatrix(l),this.render());return this};this.getProjectionMartix=function(){return l};this.zoomBy=function(f){this.setScale(e+f);return this};this.setElementName=function(f,n){d[n]=f;return this};this.getElementByName=function(f){var n;d.hasOwnProperty(f)&&(n=d[f]);return n};this.getGlUtility=function(){return a};var d={};var a=new vizit.utility.GLUtility(q);var e=5;var h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);new Float32Array([1,0,0,0,1,0,0,0,1]);var l=a.generateOrthographicMatrix(e,
e,-e,e);var c=new vizit.utility.MotionEventHandler(this,a,75,4);q.addEventListener("mousewheel",c.handleMouseWheel.bind(c),!1);q.addEventListener("DOMMouseScroll",c.handleMouseWheel.bind(c),!1);q.addEventListener("mousedown",c.handleMouseDown.bind(c),!1);document.addEventListener("mouseup",c.handleMouseUp.bind(c),!1);document.addEventListener("mousemove",c.handleMouseMove.bind(c),!1);q.addEventListener("touchstart",c.handleTouchStart.bind(c),!1);q.addEventListener("touchmove",c.handleTouchMove.bind(c),
!1);q.addEventListener("touchend",c.handleTouchEnd.bind(c),!1)}})(window.vizit.field);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(t){t.BindingBuilder=function(){this.bindingBuilder=function(q,k,b){var d,a,e,h;for(e in k)"set"===e.toLowerCase()?h=k[e]:"from"===e.toLowerCase()?d=k[e]:"mapping"===e.toLowerCase()&&(a=k[e]);d||(d=h);k="set"+h.charAt(0).toUpperCase();1<h.length&&(k+=h.slice(1));h=q[k];h=h.bind(q);q=a?new window.vizit.lesson.MappingEventHandler(h,d,a,b):new window.vizit.lesson.DirectEventHandler(h,b);document.addEventListener(d+"Changed",q.handleUpdate.bind(q),!1)};this.bind=function(q,k,b){if(k)if(Array.isArray(k)){var d=
k.length;for(var a=0;a<d;++a)this.bindingBuilder(q,k[a],b)}else this.bindingBuilder(q,k,b)}};t.bindingBuilder=new t.BindingBuilder})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(t){t.CombinedVectorValuedFunctionBuilder=function(q){this.buildFunction=function(b){var d,a,e;for(e in b)"args"===e.toLowerCase()?d=b[e]:"body"===e.toLowerCase()?a=b[e]:"name"===e.toLowerCase()?name=b[e]:"properties"!==e.toLowerCase()&&"stop"!==e.toLowerCase()&&e.toLowerCase();return new vizit.vectorfield.VectorFunction(d,a)};this.build=function(b){var d,a;if(b){var e=new vizit.vectorfield.CombinedVectorFunctions;if(Array.isArray(b)){var h=b.length;for(var l=0;l<h;++l)if(d=this.buildFunction(b[l]))e.addFunction(d),
(a=d.getName())&&k.setElementName(d,a)}else if(d=this.buildFunction(b))e.addFunction(d),(a=d.getName())&&k.setElementName(d,a)}return e};var k=q}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(t){t.SurfaceBuilder=function(){var q,k,b,d,a,e;this.getXMin=function(){return q};this.getXMax=function(){return k};this.getYMin=function(){return b};this.getYMax=function(){return d};this.getZMin=function(){return a};this.getZMax=function(){return e};this.gaussianCylinderBuilder=function(h){var l,c,f,n,g,r,m,p,v;var A=!0;for(n in h)"x"===n.toLowerCase()?m=h[n]:"y"===n.toLowerCase()?p=h[n]:"z"===n.toLowerCase()?v=h[n]:"h"===n.toLowerCase()?l=h[n]:"r"===n.toLowerCase()?g=h[n]:"phi"===n.toLowerCase()?
f=h[n]:"theta"===n.toLowerCase()?r=h[n]:"name"===n.toLowerCase()?c=h[n]:"enabled"===n.toLowerCase()&&(A=h[n]);q=Math.min(q,m-g,m+g);k=Math.max(k,m-g,m+g);b=Math.min(b,p-g,p-g);d=Math.max(d,p-g,p+g);a=Math.min(a,v-l,v+l);e=Math.max(e,v-l,v+l);h=new vizit.electricfield.GaussianCylinder(m,p,v,l,g,f,r,c);A||h.setEnabled(A);return h};this.gaussianSphereBuilder=function(h){var l,c,f,n,g,r;var m=!0;for(c in h)"x"===c.toLowerCase()?n=h[c]:"y"===c.toLowerCase()?g=h[c]:"z"===c.toLowerCase()?r=h[c]:"r"===c.toLowerCase()?
f=h[c]:"name"===c.toLowerCase()?l=h[c]:"enabled"===c.toLowerCase()&&(m=h[c]);q=Math.min(q,n-f,n+f);k=Math.max(k,n-f,n+f);b=Math.min(b,g-f,g-f);d=Math.max(d,g-f,g+f);a=Math.min(a,r-f,r+f);e=Math.max(e,r-f,r+f);h=new vizit.electricfield.GaussianSphere(n,g,r,f,l);m||h.setEnabled(m);return h};this.surfaceBuilder=function(h,l){var c,f,n,g;var r=/\s*gaussian\s*sphere\s*/i;for(f in h)"type"===f.toLowerCase()?g=h[f]:"bind"===f.toLowerCase()&&(c=h[f]);g.match(/\s*gaussian\s*cylinder\s*/i)?n=this.gaussianCylinderBuilder(h):
g.match(r)&&(n=this.gaussianSphereBuilder(h));"undefined"!==typeof c&&"undefined"!==n&&this.bind(n,c,l);return n};this.build=function(h,l,c){var f;if(h)if(Array.isArray(h)){var n=h.length;for(var g=0;g<n;++g)if(f=this.surfaceBuilder(h[g],c))l.addGaussianSurface(f),(name=f.getName())&&c.setElementName(f,name)}else if(f=this.surfaceBuilder(h,c))l.addGaussianSurface(f),(name=f.getName())&&c.setElementName(f,name);return l}};t.SurfaceBuilder.prototype=t.bindingBuilder})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};(function(t){t.VectorValuedFunctionBuilder=function(q){this.build=function(b,d){var a;if(b){var e=Array.isArray(b)?b[0]:b;"undefined"!==typeof e&&(a="function"===e.type.toLowerCase()?new vizit.builder.CombinedVectorValuedFunctionBuilder(k):new vizit.builder.ElectricFieldElementBuilder(k,d))}return a.build(b)};var k=q}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(t){t.DistributionBuilder=function(){var q,k,b,d,a,e;this.getXMin=function(){return q};this.getXMax=function(){return k};this.getYMin=function(){return b};this.getYMax=function(){return d};this.getZMin=function(){return a};this.getZMax=function(){return e};this.chargedPlaneBuilder=function(c){var f,n,g,r,m,p,v,A,x,w,y,J,z,G,E,F,K;for(f in c)f.match(h)?n=c[f]:f.match(l)?g=c[f]:"nfieldLines"===f.toLowerCase()?m=c[f]:"x0"===f.toLowerCase()?p=c[f]:"y0"===f.toLowerCase()?v=c[f]:"z0"===f.toLowerCase()?
A=c[f]:"x1"===f.toLowerCase()?x=c[f]:"y1"===f.toLowerCase()?w=c[f]:"z1"===f.toLowerCase()?y=c[f]:"x2"===f.toLowerCase()?J=c[f]:"y2"===f.toLowerCase()?z=c[f]:"z2"===f.toLowerCase()?G=c[f]:"x3"===f.toLowerCase()?E=c[f]:"y3"===f.toLowerCase()?F=c[f]:"z3"===f.toLowerCase()?K=c[f]:"name"===f.toLowerCase()&&(r=c[f]);q=Math.min(q,p,x,J,E);k=Math.max(k,p,x,J,E);b=Math.min(b,v,w,z,K);d=Math.max(d,v,w,z,K);a=Math.min(a,A,y,G,K);e=Math.max(e,A,y,G,K);return new vizit.electricfield.ChargedPlane(p,v,A,x,w,y,J,
z,G,E,F,K,n,g,m,r)};this.chargedCylinderBuilder=function(c){var f,n,g,r,m,p,v,A,x,w,y,J,z;for(m in c)m.match(h)?f=c[m]:m.match(l)?n=c[m]:"nfieldLines"===m.toLowerCase()?r=c[m]:"x0"===m.toLowerCase()?p=c[m]:"y0"===m.toLowerCase()?v=c[m]:"z0"===m.toLowerCase()?A=c[m]:"x1"===m.toLowerCase()?x=c[m]:"y1"===m.toLowerCase()?w=c[m]:"z1"===m.toLowerCase()?y=c[m]:"r0"===m.toLowerCase()?J=c[m]:"r1"===m.toLowerCase()?z=c[m]:"name"===m.toLowerCase()&&(g=c[m]);q=Math.min(q,p,x);k=Math.max(k,p,x);b=Math.min(b,v,
w);d=Math.max(d,v,w);a=Math.min(a,A,y);e=Math.max(e,A,y);return new vizit.electricfield.ChargedCylinder(p,v,A,x,w,y,J,z,f,n,r,g)};this.chargedLineBuilder=function(c){var f,n,g,r,m,p,v,A,x,w,y;for(m in c)m.match(h)?f=c[m]:m.match(l)?n=c[m]:"nfieldLines"===m.toLowerCase()?r=c[m]:"x0"===m.toLowerCase()?p=c[m]:"y0"===m.toLowerCase()?v=c[m]:"z0"===m.toLowerCase()?A=c[m]:"x1"===m.toLowerCase()?x=c[m]:"y1"===m.toLowerCase()?w=c[m]:"z1"===m.toLowerCase()?y=c[m]:"name"===m.toLowerCase()&&(g=c[m]);q=Math.min(q,
p,x);k=Math.max(k,p,x);b=Math.min(b,v,w);d=Math.max(d,v,w);a=Math.min(a,A,y);e=Math.max(e,A,y);return new vizit.electricfield.ChargedLine(p,v,A,x,w,y,f,n,r,g)};this.chargedSphereBuilder=function(c){var f,n,g,r,m,p,v,A,x;for(let w in c)"charge"===w.toLowerCase()?f=c[w]:w.match(l)?n=c[w]:"nfieldLines"===w.toLowerCase()?r=c[w]:"x"===w.toLowerCase()?m=c[w]:"y"===w.toLowerCase()?p=c[w]:"z"===w.toLowerCase()?v=c[w]:"a"===w.toLowerCase()?A=c[w]:"b"===w.toLowerCase()?x=c[w]:"name"===w.toLowerCase()&&(g=c[w]);
q=Math.min(q,m-x);k=Math.max(k,m+x);b=Math.min(b,p-x);d=Math.max(d,p+x);a=Math.min(a,v-x);e=Math.max(e,v+x);return new vizit.electricfield.ChargedSphere(m,p,v,A,x,f,n,r,g)};this.chargeDistributionBuilder=function(c,f){var n,g,r,m;var p=/\s*charged\s*cylinder\s*/i;var v=/\s*charged\s*line\s*/i;var A=/\s*charged\s*sphere\s*/i;for(r in c)"type"===r.toLowerCase()?m=c[r]:"bind"===r.toLowerCase()&&(n=c[r]);m.match(/\s*charged\s*plane\s*/i)?g=this.chargedPlaneBuilder(c):m.match(p)?g=this.chargedCylinderBuilder(c):
m.match(v)?g=this.chargedLineBuilder(c):m.match(A)&&(g=this.chargedSphereBuilder(c));"undefined"!==typeof n&&"undefined"!==g&&this.bind(g,n,f);return g};this.build=function(c,f,n){var g,r;if(c)if(Array.isArray(c)){var m=c.length;for(var p=0;p<m;++p)if(g=this.chargeDistributionBuilder(c[p],n))f.addDistribution(g),(r=g.getName())&&n.setElementName(g,r)}else if(g=this.chargeDistributionBuilder(c,n))f.addDistribution(g),(r=g.getName())&&n.setElementName(g,r);return f};var h=/\s*charge\s*density\s*/i;
var l=/\s*field\s*line\s*density\s*/i};t.DistributionBuilder.prototype=t.bindingBuilder})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(t){t.ChargesBuilder=function(){this.getXMin=function(){return q};this.getXMax=function(){return k};this.getYMin=function(){return b};this.getYMax=function(){return d};this.getZMin=function(){return a};this.getZMax=function(){return e};this.chargeBuilder=function(h,l){var c,f,n,g,r,m,p,v,A;var x="";const w=/\s*field\s*line\s*density\s*/i;for(v in h)"charge"===v.toLowerCase()?A=h[v]:"x"===v.toLowerCase()?n=h[v]:"y"===v.toLowerCase()?g=h[v]:"z"===v.toLowerCase()?r=h[v]:v.match(w)?m=h[v]:"nfieldlines"===
v.toLowerCase()?p=h[v]:"bind"===v.toLowerCase()?c=h[v]:"name"===v.toLowerCase()&&(f=h[v]);"undefined"===typeof A&&(x+="No charge specified for point charge.\n");"undefined"===typeof n&&(0<x.length&&(x+="\n"),x+="x coordinate is not defined in charge configuration.\n");"undefined"===typeof g&&(0<x.length&&(x+="\n"),x+="y coordinate is not defined in charge configuration.\n");"undefined"===typeof r&&(0<x.length&&(x+="\n"),x+="z coordinate is not defined in charge configuration.\n");if(0===x.length){n<
q&&(q=n);n>k&&(k=n);g<b&&(b=g);g>d&&(d=g);r<a&&(a=r);r>e&&(e=r);var y=new vizit.electricfield.Charge(n,g,r,A,m,p,f);"undefined"!==typeof c&&this.bind(y,c,l)}return{charge:y,message:x}};this.build=function(h,l,c){if(h)if(Array.isArray(h)){var f=h.length;for(var n=0;n<f;++n){var g=this.chargeBuilder(h[n],c);const r=g.charge;g.message&&console.log(g.message);r&&(l.addCharge(r),(g=r.getName())&&c.setElementName(r,g))}}else g=this.chargeBuilder(h,c),h=g.charge,g.message&&console.log(g.message),h&&(l.addCharge(h),
(g=h.getName())&&c.setElementName(h,g));return l};var q=Number.POSITIVE_INFINITY;var k=Number.NEGATIVE_INFINITY;var b=Number.POSITIVE_INFINITY;var d=Number.NEGATIVE_INFINITY;var a=Number.POSITIVE_INFINITY;var e=Number.NEGATIVE_INFINITY};t.ChargesBuilder.prototype=t.bindingBuilder})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(t){t.ElectricFieldElementBuilder=function(q,k){this.buildELement=function(a,e){const h=/\s*charged\s*cylinder\s*/i,l=/\s*charged\s*line\s*/i,c=/\s*charged\s*plane\s*/i,f=/\s*charged\s*sphere\s*/i,n=/\s*gaussian\s*cylinder\s*/i,g=/\s*gaussian\s*sphere\s*/i;for(var r in a)if("type"===r.toLowerCase()){var m=a[r];break}if(m.match(/\s*charges?\s*$/i))m=new vizit.builder.ChargesBuilder,e=m.build(a,e,b);else if(m.match(h)||m.match(l)||m.match(c)||m.match(f))m=new vizit.builder.DistributionBuilder,
e=m.build(a,e,b);else if(m.match(n)||m.match(g))m=new vizit.builder.SurfaceBuilder,d=m.build(a,d,b);return e};this.build=function(a){var e=new vizit.electricfield.Charges;if(a)if(Array.isArray(a)){var h=a.length;for(var l=0;l<h;++l)this.buildELement(a[l],e)}else this.buildELement(a,e);return e};var b=q;var d=k}})(window.vizit.builder);window.vizit=window.vizit||{};(function(t){t.Visualizations=function(){this.register=function(q,k){};this.lookup=function(q){var k;(void 0).hasOwnProperty(q)&&(k=(void 0)[q]);return k}}})(window.vizit);vizit.visualizations=new vizit.Visualizations;window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(t){t.ElectricFieldBuilder=function(q){this.build=function(b){var d,a,e,h,l,c;for(c in b)"arrowheadsize"===c.toLowerCase()?d=b[c]:"arrowspacing"===c.toLowerCase()?a=b[c]:"maxvectors"===c.toLowerCase()?l=b[c]:"elements"===c.toLowerCase()&&(h=b[c]);b=new vizit.electricfield.ElectricField(k);"undefined"!==typeof l&&b.setMaxVectors(l);"undefined"!==typeof d&&b.setArrowHeadSize(d);"undefined"!==typeof a&&b.setArrowSpacing(a);(e=(new vizit.builder.ElectricFieldElementBuilder(k,b)).build(h,e))&&
b.setCharges(e);return b};var k=q}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(t){t.SimpleVectorFieldBuilder=function(q){this.build=function(b){var d,a,e,h,l,c;for(c in b)"arrowheadsize"===c.toLowerCase()&&(d=b[c]),"arrowheadwidth"===c.toLowerCase()?a=b[c]:"arrowsize"===c.toLowerCase()?e=b[c]:"maxvectors"===c.toLowerCase()&&(h=b[c]),"f"===c.toLowerCase()&&(l=b[c]);if(l){b=new vizit.builder.VectorValuedFunctionBuilder(k);var f=b.build(l)}l=new vizit.vectorfield.SimpleVectorField(k,f);"undefined"!==typeof h&&l.setMaxVectors(h);"undefined"!==typeof e&&l.setArrowSize(e);
"undefined"!==typeof d&&l.setArrowHeadSize(d);"undefined"!==typeof a&&l.setArrowHeadWidth(a);return l};var k=q}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(t){t.VizBuilder=function(){this.processConfig=function(q){var k,b,d,a,e;const h=/\s*electric\s*field\s*/i,l=/\s*simple\s*vector\s*field\s*/i;var c=/\s*start\s*points\s*/i;for(var f in q)"canvas"===f.toLowerCase()?k=q[f]:"scale"===f.toLowerCase()?d=q[f]:"type"===f.toLowerCase()?e=q[f]:"name"===f.toLowerCase()?b=q[f]:f.match(c)&&(a=q[f]);if("undefined"===typeof e)alert("Missing type for visualization configuration.");else if("undefined"===typeof k)alert("No canvas specified, please provide the id of a canvas.");
else if(c=document.getElementById(k)){k=new vizit.field.Stage(c);if(e.match(h)){var n=new vizit.builder.ElectricFieldBuilder(k);n=n.build(q)}else e.match(l)?(n=new vizit.builder.SimpleVectorFieldBuilder(k),n=n.build(q)):alert("Unrecognized visualization type: "+e+".");n&&("undefined"!==typeof d&&k.setScale(d),"undefined"!==typeof b&&vizit.visualizations.register(b,k),"undefined"!==typeof a&&n.addStartPoints(a),k.start())}else alert('Can not find canvas with id="'+k+'".')};this.process=function(q){if(q)if(Array.isArray(q)){var k=
q.length;for(var b=0;b<k;++b)this.processConfig(q[b])}else this.processConfig(q)}}})(window.vizit.builder);function VIZ_CONFIG_IF_EXISTS(t){"undefined"!==typeof VISUALIZATION_CONFIG&&(t=new vizit.builder.VizBuilder,t.process(VISUALIZATION_CONFIG))}"interactive"===document.readyState||"complete"===document.readyState?VIZ_CONFIG_IF_EXISTS():document.addEventListener("DOMContentLoaded",VIZ_CONFIG_IF_EXISTS);
//# sourceMappingURL=VField.min.js.map 
