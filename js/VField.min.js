/*
 Copyright 2013-2014 Vizit Solutions

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};
(function(m){m.MotionEventHandler=function(g,h,a,f){var b,c,d,l;b=[];c=!1;l=d=null;this.findTouchByIdentifier=function(a){var f,c;for(f=0;f<b.length;f++)if(c=b[f].identifier,c===a)return f;return-1};this.handleTouchStart=function(a){var f,c,d;d=a.targetTouches;for(f=0;f<d.length;f++)c=d[f],-1===this.findTouchByIdentifier(c.identifier)&&b.push(c);if(a.preventDefault)a.preventDefault();else return!1};this.handleTouchEnd=function(a){var f,c,d;d=a.changedTouches;for(f=0;f<d.length;f++)c=this.findTouchByIdentifier(d[f].identifier),
-1!==c&&b.splice(c,1);if(a.preventDefault)a.preventDefault();else return!1};this.handleOneActiveMove=function(a){var f,c,d,l;l=a.changedTouches[0];c=b[0];null!==c?(f=l.pageX-c.pageX,c=l.pageY-c.pageY,d=g.getModelViewMatrix(),h.rotateBy(d,c/150,f/150),g.setModelViewMatrix(d),g.requestRender(),b.splice(0,1,l)):b.push(l);if(a.preventDefault)a.preventDefault();else return!1};this.handleTwoActiveMove=function(a){var c,d,l,h,p,s,z;h=b[0];s=b[1];c=s.pageX-h.pageX;d=s.pageY-h.pageY;l=Math.sqrt(c*c+d*d);z=
a.changedTouches;for(c=0;c<z.length;c++)p=z[c],d=p.identifier,h.identifier===d?(h=p,b.splice(0,1,p)):s.identifier===d&&(s=p,b.splice(1,1,p));c=s.pageX-h.pageX;d=s.pageY-h.pageY;h=Math.sqrt(c*c+d*d);g.zoomBy(-(h-l)/f);if(a.preventDefault)a.preventDefault();else return!1};this.handleTouchMove=function(a){return 1===b.length?this.handleOneActiveMove(a):2===b.length?this.handleTwoActiveMove(a):!0};this.handleMouseDown=function(a){c=!0;d=a.clientX;l=a.clientY};this.handleMouseUp=function(a){c=!1};this.handleMouseMove=
function(a){if(c){var f=a.clientX,b=a.clientY,r=f-d,n=b-l;a=g.getModelViewMatrix();h.rotateBy(a,n/30,r/30);g.setModelViewMatrix(a);g.requestRender();d=f;l=b}};this.handleMouseWheel=function(c){c=window.event||c;g.zoomBy(c.wheelDeltaY/a);if(c.preventDefault)c.preventDefault();else return!1}}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};
(function(m){m.GLUtility=function(g){var h,a;this.getGLContext=function(){!a&&(a=h.getContext("webgl",{antialias:!0})||h.getContext("experimental-webgl",{antialias:!0}))&&(a.enable(a.DEPTH_TEST),a.depthFunc(a.LESS));return a};this.clearColor=function(f,b,c,d){a.clearColor(f,b,c,d)};this.clear=function(){a.clear(a.COLOR_BUFFER_BIT)};this.compileShader=function(f,b){var c=a.createShader(b);a.shaderSource(c,f);a.compileShader(c);if(!a.getShaderParameter(c,a.COMPILE_STATUS))throw"Shader compile failed with:"+
a.getShaderInfoLog(c);return c};this.createProgram=function(f,b){var c,d,l;d=a.createProgram();l=this.compileShader(f,a.VERTEX_SHADER);c=this.compileShader(b,a.FRAGMENT_SHADER);a.attachShader(d,l);a.attachShader(d,c);a.linkProgram(d);return d};this.loadData=function(f,b){a.bindBuffer(a.ARRAY_BUFFER,f);a.bufferData(a.ARRAY_BUFFER,b,a.STATIC_DRAW)};this.createBuffer=function(f){var b=a.createBuffer();this.loadData(b,f);return b};this.createIndexBuffer=function(f){var b=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,
b);a.bufferData(a.ELEMENT_ARRAY_BUFFER,f,a.STATIC_DRAW);return b};this.getAttribLocation=function(f,b){var c;c=a.getAttribLocation(f,b);-1===c&&alert("Can not find uniform"+attribute+".");return c};this.bindBuffer=function(f,b,c,d,l,e){a.bindBuffer(a.ARRAY_BUFFER,f);a.enableVertexAttribArray(b);a.vertexAttribPointer(b,c,d,!1,l,e)};this.loadTexture=function(f,b,c){var d=a.createTexture(),l=new Image;l.onload=function(){this.onTextureLoaded(l,d,b,c)}.bind(this);l.src=f;return d};this.onTextureLoaded=
function(f,b,c,d){a.activeTexture(a.TEXTURE0+c);a.bindTexture(a.TEXTURE_2D,b);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,f);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR_MIPMAP_NEAREST);a.generateMipmap(a.TEXTURE_2D);d()};this.bindTexture=function(f,b,c,d){a.activeTexture(a.TEXTURE0+c);a.bindTexture(a.TEXTURE_2D,b);a.uniform1i(d,c)};this.generateModelViewMatrix=function(a){return new Float32Array([1,0,0,0,0,1,
0,0,0,0,1,0,a,0,0,1])};this.generatePerspectiveMatrix=function(a,b,c,d){return new Float32Array([c/a,0,0,0,0,c/b,0,0,0,0,-(d+c)/(d-c),-1,0,0,-2*d*c/(d-c),0])};this.generateOrthographicMatrix=function(a,b,c,d){return new Float32Array([1/a,0,0,0,0,1/b,0,0,0,0,-2/(d-c),0,0,0,-(d+c)/(d-c),1])};this.getUniformLocation=function(f,b){var c;c=a.getUniformLocation(f,b);-1===c&&alert("Can not find uniform"+b+".");return c};this.loadUniform3f=function(a,b,c,d,l,e){b=a.getUniformLocation(b,c);-1===b?alert("Can not find uniform"+
c+"."):a.uniform3f(b,d,l,e)};this.loadUniform4f=function(f,b,c,d,l,e){f=a.getUniformLocation(f,b);-1===f?alert("Can not find uniform"+b+"."):a.uniform4f(f,c,d,l,e)};this.loadUniformMatrix3fv=function(f,b,c){f=a.getUniformLocation(f,b);-1===f?alert("Can not find uniform"+b+"."):a.uniformMatrix3fv(f,!1,c)};this.loadUniformMatrix4fv=function(f,b,c){f=a.getUniformLocation(f,b);-1===f?alert("Can not find uniform"+b+"."):a.uniformMatrix4fv(f,!1,c)};this.getXYRotationMatrix=function(a,b){Math.cos(a);Math.cos(b);
Math.sin(a);Math.sin(b)};this.rotateBy=function(a,b,c){var d,l,e=Math.cos(b),k=Math.cos(c);b=Math.sin(b);var g=Math.sin(c),h=b*g,n=k*b,p=e*g,s=e*k;c=a[0];d=a[1];l=a[2];a[0]=c*k+l*g;a[1]=c*h+d*e-l*n;a[2]=-c*p+d*b+l*s;c=a[4];d=a[5];l=a[6];a[4]=c*k+l*g;a[5]=c*h+d*e-l*n;a[6]=-c*p+d*b+l*s;c=a[8];d=a[9];l=a[10];a[8]=c*k+l*g;a[9]=c*h+d*e-l*n;a[10]=-c*p+d*b+l*s;c=a[12];d=a[13];l=a[14];a[12]=c*k+l*g;a[13]=c*h+d*e-l*n;a[14]=-c*p+d*b+l*s};this.extractRotationPart=function(a,b){b.set(a.subarray(0,3));b.set(a.subarray(4,
7),3);b.set(a.subarray(8,11),6);return b};h=g;a=this.getGLContext()}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};(function(m){m.Color=function(g,h,a,f){var b,c,d,l;this.setRed=function(a){b=a;return this};this.getRed=function(){return b};this.setGreen=function(a){c=a;return this};this.getGreen=function(){return c};this.setBlue=function(a){d=a;return this};this.getBlue=function(){return d};this.setAlpha=function(a){l=a;return this};this.getAlpha=function(){return l};this.setRed(g).setGreen(h).setBlue(a).setAlpha(f)}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.geometry=window.vizit.geometry||{};
(function(m){m.Surface=function(g,h){var a,f,b,c,d;f=h;c=g;d=new Float32Array(3*g);a=new Uint16Array(h);b=new Float32Array(3*g);this.setNindices=function(a){f=a};this.getNindices=function(){return f};this.setNvertices=function(a){c=a};this.getNvertices=function(){return c};this.setVerticies=function(a){d=a};this.getVertices=function(){return d};this.setIndices=function(a){};this.getIndices=function(){return a};this.setNormals=function(a){};this.getNormals=function(){return b}};m.Shapes={SPHERE:{value:"sphere"},
SQUARE:{value:"square"},CYLINDER:{value:"cylinder"}};m.VertexRegistry=function(){var g;g={};this.registerVertices=function(h,a){if(g.hasOwnProperty(h))throw"Vertex buffers already registered for "+h+".";g[h]=a};this.hasVertices=function(h){return g.hasOwnProperty(h)};this.retrieveVertices=function(h){return g[h]}};m.vertexRegistry=new m.VertexRegistry;m.Square=function(){var g,h,a;a=m.Shapes.SQUARE;g=[-0.5,0.5,0,0.5,0.5,0,0.5,-0.5,0,-0.5,-0.5,0];h=[0,0,1];this.getNindices=function(){return 6};this.computeGeometry=
function(a,b){var c,d,l;l=a.getVertices();d=a.getNormals();c=a.getIndices();for(var e=0;12>e;e++)l[e]=b[e],d[e]=h[e%3];c[0]=0;c[1]=3;c[2]=1;c[3]=3;c[4]=2;c[5]=1;a.setNvertices(12);a.setNindices(6)};this.getVertexBuffers=function(f){var b,c;this.hasVertices(a.value)?c=this.retrieveVertices(a.value):(b=new m.Surface(4,6),c={},this.computeGeometry(b,g),c.vertices=f.createBuffer(b.getVertices()),c.normals=f.createBuffer(b.getNormals()),c.indices=f.createIndexBuffer(b.getIndices()),this.registerVertices(a.value,
c));return c}};m.Square.prototype=m.vertexRegistry;m.Cylinder=function(){var g;g=m.Shapes.CYLINDER;this.getBaseHeight=function(){return 1};this.getBaseRadius=function(){return 1};this.getShape=function(){return g};this.getNindices=function(){return 126};this.computeGeometry=function(g){var a,f,b,c,d,l,e;e=g.getVertices();c=g.getNormals();b=g.getIndices();e[0]=0;c[0]=0;e[1]=0;c[1]=0;e[2]=0.5;c[2]=1;b[0]=0;a=94;b[a]=a;a*=3;e[a]=0;c[a++]=0;e[a]=0;c[a++]=0;e[a]=-0.5;c[a]=-1;for(f=1;31>=f;f++)a=2*(f-1)*
Math.PI/30,b[f]=f,l=3*f,e[l]=1*Math.cos(a),c[l++]=0,e[l]=1*Math.sin(a),c[l++]=0,e[l]=0.5,c[l]=1;for(f=1;31>=f;f++)l=3*f,a=f+90+4,b[a]=a,a*=3,e[a]=e[l++],c[a++]=0,e[a]=e[l],c[a++]=0,e[a]=-0.5,c[a]=-1;l=3;a=285;d=96;for(f=0;30>=f;f++)b[d/3]=d/3,e[d]=e[l],c[d++]=e[l++]/1,e[d]=e[l],c[d++]=e[l++]/1,e[d]=e[l],c[d++]=e[l++]/1,b[d/3]=d/3,e[d]=e[a],c[d++]=e[a++]/1,e[d]=e[a],c[d++]=e[a++]/1,e[d]=e[a],c[d++]=e[a++]/1;g.setNvertices(378);g.setNindices(126)};this.getVertexBuffers=function(h){var a,f;this.hasVertices(g.value)?
f=this.retrieveVertices(g.value):(a=new m.Surface(126,126),f={},this.computeGeometry(a),f.vertices=h.createBuffer(a.getVertices()),f.normals=h.createBuffer(a.getNormals()),f.indices=h.createIndexBuffer(a.getIndices()),this.registerVertices(g.value,f));return f}};m.Cylinder.prototype=m.vertexRegistry;m.Sphere=function(){var g;g=m.Shapes.SPHERE;this.getIntrinsicRadius=function(){return 30};this.getShape=function(){return g};this.getNindices=function(){return 5400};this.computeGeometry=function(g,a,
f,b){var c,d,l,e,k,q,r,n,p,s,z;s=g.getVertices();r=q=0;l=g.getNormals();for(e=0;e<=f;e++)for(k=e*Math.PI/f,p=Math.sin(k),d=Math.cos(k),k=0;k<=b;k++)c=2*k*Math.PI/b,n=Math.sin(c),c=Math.cos(c),n*=p,z=d,c*=p,l[r]=n,s[r++]=a*n,l[r]=z,s[r++]=a*z,l[r]=c,s[r++]=a*c;g.setNvertices(--r);l=g.getIndices();for(e=0;e<f;e++)for(k=0;k<b;k++)a=e*(b+1)+k,r=a+b+1,l[q++]=a,l[q++]=r,l[q++]=a+1,l[q++]=r,l[q++]=r+1,l[q++]=a+1;g.setNindices(--q)};this.getVertexBuffers=function(h){var a,f;this.hasVertices(g.value)?f=this.retrieveVertices(g.value):
(a=new m.Surface(961,5400),f={},this.computeGeometry(a,30,30,30),f.vertices=h.createBuffer(a.getVertices()),f.normals=h.createBuffer(a.getNormals()),f.indices=h.createIndexBuffer(a.getIndices()),this.registerVertices(g.value,f));return f}};m.Sphere.prototype=m.vertexRegistry})(window.vizit.geometry);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.SurfaceRenderer=function(g){var h,a,f,b,c,d,l,e,k,q,r,n,p;this.createProgram=function(b){b=d.createProgram("attribute vec3 normal;attribute vec3 position;uniform   vec3 ambientLighting;uniform   vec3 directionalLighting;uniform   vec3 directionalColor;uniform   mat4 modelViewMatrix;uniform   mat4 globalModelViewMatrix;uniform   mat3 normalMatrix;uniform   mat4 projectionMatrix;varying   vec3 lighting;void main(void){  gl_Position = projectionMatrix * globalModelViewMatrix * modelViewMatrix * vec4(position, 1.0);  vec3  transformedNormal         = normalMatrix * normal;  float directionalLightWeighting = max(dot(transformedNormal, directionalLighting), 0.0);  lighting                        = ambientLighting + directionalColor * directionalLightWeighting;}","precision mediump float;uniform vec4 surfaceColor;varying vec3 lighting;void main(void){  gl_FragColor = vec4(surfaceColor.rgb * lighting, surfaceColor.a);}");
h=d.getUniformLocation(b,"ambientLighting");a=d.getUniformLocation(b,"directionalLighting");f=d.getUniformLocation(b,"directionalColor");l=d.getUniformLocation(b,"modelViewMatrix");c=d.getUniformLocation(b,"globalModelViewMatrix");e=d.getAttribLocation(b,"normal");k=d.getUniformLocation(b,"normalMatrix");q=d.getAttribLocation(b,"position");n=d.getUniformLocation(b,"projectionMatrix");p=d.getUniformLocation(b,"surfaceColor");return b};this.getAmbientLightingHandle=function(){return h};this.getDirectionalLightingHandle=
function(){return a};this.getDirectionalColorHandle=function(){return f};this.getModelViewMatrixHandle=function(){return l};this.getGlobalModelViewMatrixHandle=function(){return c};this.getNormalHandle=function(){return e};this.getNormalMatrixHandle=function(){return k};this.getPositionHandle=function(){return q};this.getProjectionMatrixHandle=function(){return n};this.getSurfaceColorHandle=function(){return p};this.render=function(e,l,g,p){var q;q=p.length;if(0<q)for(b.useProgram(r),b.uniformMatrix4fv(c,
!1,l),b.uniformMatrix3fv(k,!1,g),b.uniformMatrix4fv(n,!1,e),b.uniform3f(h,0.3,0.3,0.3),b.uniform3f(a,1,1,1),b.uniform3f(f,0.4,0.4,0.4),e=0;e<q;e++)p[e].render(d,this)};d=g;b=d.getGLContext();r=this.createProgram()}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};
(function(m){m.IndexedVertices=function(g,h){var a,f,b,c;this.setNindices=function(a){f=a};this.getNindices=function(){return f};this.setNvertices=function(a){b=a};this.getNvertices=function(){return b};this.setVerticies=function(a){c=a};this.getVertices=function(){return c};this.setVerticies=function(a){c=a};this.getVertices=function(){return c};this.pushVertex=function(a){c[b++]=a};this.setIndices=function(a){};this.getIndices=function(){return a};this.pushIndex=function(c){a[f++]=c};b=f=0;c=new Float32Array(3*
g);a=new Uint16Array(h)}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};(function(m){m.VectorFunction=function(g,h){var a,f;this.setModified=function(b){a=b};this.isModified=function(){return a};this.setName=function(a){f=a};this.getName=function(){return f};this.shouldStop=function(a,c,d,f){return 0>a*Q&&4>r2};this.getField=new Function(g,h)}})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};
(function(m){m.CombinedVectorFunctions=function(){var g,h;this.addFunction=function(a){h=g.push(a);return this};for(var a=0;a<arguments.length;a++)this.addFunction(arguments[a]);this.getNfunctions=function(){return h};this.getFunctions=function(){return g};this.isModified=function(){var f;f=!1;for(a=0;a<h&&!f;a++)f=f||g[a].isModified();return f};this.setModified=function(f){for(a=0;a<h;a++)g[a].setModified(f)};this.getStartPoints=function(){var a,b=0,c=1.57079632679/(ncharges+1),d,l=[];for(a=0;a<
h;a++)d=g[a],l=l.concat(d.getStartPoints(b,6)),b+=c;return l};this.getField=function(a,b,c){for(var d,l=[0,0,0],e=0;e<h;e++)d=g[e].getField(a,b,c),l[0]+=d[0],l[1]+=d[1],l[2]+=d[2];return l};this.shouldStop=function(a,b,c,d){var l;l=!1;for(var e=0;e<ncharges&!l;e++)l=g[e].shouldStop(a,b,c,d);return l};h=0;g=[]}})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};
(function(m){m.LineRenderer=function(g){var h,a,f,b,c,d,l;this.createProgram=function(){var a;a=f.createProgram("attribute vec3 position;uniform   mat4 modelViewMatrix;uniform   mat4 projectionMatrix;void main(){    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1);}","precision mediump float;uniform   vec4 color;void main(){    gl_FragColor = color;}");h=f.getUniformLocation(a,"color");b=f.getAttribLocation(a,"position");d=f.getUniformLocation(a,"modelViewMatrix");l=f.getUniformLocation(a,
"projectionMatrix");return a};this.drawIndexedLines=function(e,k,g,r){a.useProgram(c);a.lineWidth(1);a.uniform4fv(h,g);a.uniformMatrix4fv(d,!1,k);a.uniformMatrix4fv(l,!1,e);k=r.length;for(g=0;g<k;g++)e=r[g],f.bindBuffer(e.vertices,b,3,a.FLOAT,12,0),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e.indices),a.drawElements(a.LINES,e.nindices,a.UNSIGNED_SHORT,0)};f=g;a=f.getGLContext();c=this.createProgram()}})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};
(function(m){m.SimpleVectorField=function(g,h){var a,f,b,c,d,l,e,k,q,r,n,p,s,z;this.setArrowHeadWidth=function(a){f=a;return this};this.getArrowHeadWidth=function(){return f};this.setArrowHeadSize=function(c){a=c;return this};this.getArrowHeadSize=function(){return a};this.setColor=function(a){b=a;return this};this.getColor=function(){return b};this.setGlUtility=function(a){e=a;return this};this.getGlUtility=function(){return e};this.setMaxVectors=function(a){q=a;return this};this.getMaxVectors=function(){return q};
this.setModelViewMatrix=function(a){r=a;return this};this.getModelViewMatrix=function(){return r};this.setProjectionMatrix=function(a){p=a;return this};this.addStartPoints=function(a){c=c.concat(a);return this};this.getStartPoints=function(){return c};this.setupVectorField=function(){var a,b;a="function"===typeof d.getStartPoints?c.concat(d.getStartPoints(0,2)):c;l.setStartPoints(a);a={};b=l.generateField();a.vertices=e.createBuffer(b.getVertices());a.indices=e.createIndexBuffer(b.getIndices());a.nindices=
b.getNindices();k[0]=a;return k};this.render=function(){z&&(d.isModified()&&(k=this.setupVectorField()),e.clear(),n.drawIndexedLines(p,r,b,k),d.setModified(!1))};this.start=function(){n=new vizit.vectorfield.LineRenderer(e);l=new vizit.vectorfield.VectorFieldGenerator(d,q,a,f,s);z=!0;this.render()};f=0.5;a=0.3;d=g;k=[];b=new Float32Array([0.8,0.3,0.3,1]);q=5;s="undefined"===typeof h?1:h;c=[];z=!1}})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};(function(m){m.CountdownLatch=function(g,h){var a=g;this.countDown=function(){a--;0>=a&&h()}}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.ChargeGenerator=function(g){var h,a,f;this.setCharges=function(b){h=b;4*h.getCharges().length>a.length&&(a=new Float32Array(4*h.getCharges().length))};this.getCharges=function(){return h};this.getChargesArray=function(){return a};this.getNcharges=function(){return f};this.generate=function(){var b,c,d,l;l=h.getCharges();f=l.length;for(var e=c=0;e<f;e++)b=l[e],d=b.getPosition(),a[c++]=d[0],a[c++]=d[1],a[c++]=d[2],a[c++]=b.getCharge();return a};h=g;a=new Float32Array(4*h.getCharges().length)}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.ChargeRenderer=function(g,h,a){var f,b,c,d,l,e,k,q,r,n,p,s,z,t;this.createProgram=function(a){a=d.createProgram("precision highp float;attribute vec3  position;attribute float charge;varying   float vCharge;uniform   mat4  modelViewMatrix;uniform   mat4  projectionMatrix;void main(){    gl_Position  = projectionMatrix * modelViewMatrix * vec4(position, 1);    gl_PointSize = 16.0;    vCharge      = charge;}","precision lowp float;varying float     vCharge;uniform sampler2D positiveChargeSampler;uniform sampler2D negativeChargeSampler;vec4   textureColor; void main() {   if (vCharge > 0.0)   {       textureColor = texture2D(positiveChargeSampler, gl_PointCoord);   }   else   {       textureColor = texture2D(negativeChargeSampler, gl_PointCoord);   }   if (textureColor.a > 0.5)   {       gl_FragColor = textureColor;   }   else   {       discard;   } }");
b=d.getAttribLocation(a,"charge");l=d.getUniformLocation(a,"modelViewMatrix");e=d.getUniformLocation(a,"negativeChargeSampler");r=d.getAttribLocation(a,"position");n=d.getUniformLocation(a,"positiveChargeSampler");t=d.getUniformLocation(a,"projectionMatrix");return a};this.loadTextures=function(a,c){k=0;q=d.loadTexture(a+"images/negativeCharge.png",k,c);p=1;s=d.loadTexture(a+"images/positiveCharge.png",p,c)};this.bindTextures=function(){d.bindTexture(z,q,k,e);d.bindTexture(z,s,p,n)};this.render=function(a,
e,k,g){c.useProgram(z);f||this.bindTextures();c.uniformMatrix4fv(l,!1,e);c.uniformMatrix4fv(t,!1,a);d.bindBuffer(k,r,3,c.FLOAT,16,0);d.bindBuffer(k,b,1,c.FLOAT,16,12);c.drawArrays(c.POINTS,0,g.getNcharges())};f=!1;d=g;c=d.getGLContext();z=this.createProgram();this.loadTextures(a,h)}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.FieldLineVBO=function(g,h){this.disable=function(){this.enabled=!1};this.isEnabled=function(){return this.enabled};this.reload=function(a,f){a.loadData(this.fieldLineBufferHandle,f.getPoints());this.npoints=f.getNpoints();a.loadData(this.fieldDirectionBufferHandle,f.getArrows());this.narrows=f.getNarrows();this.enabled=!0};this.fieldLineBufferHandle=g.createBuffer(h.getPoints());this.npoints=h.getNpoints();this.fieldDirectionBufferHandle=g.createBuffer(h.getArrows());this.narrows=h.getNarrows();
this.enabled=!0}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.FieldLine=function(g){var h,a,f,b,c,d;this.setMaxPoints=function(b){b!==g&&(g=b,c=new Float32Array(3*g),a=new Float32Array(g));return this};this.getMaxPoints=function(){return g};this.pushPoint=function(a,e,f){c[d++]=a;c[d++]=e;c[d++]=f;b++};this.getPoints=function(){return c};this.getNpoints=function(){return b};this.pushArrow=function(c,b,d,g,r,n,p,s,z){a[h++]=c;a[h++]=b;a[h++]=d;a[h++]=g;a[h++]=r;a[h++]=n;a[h++]=g;a[h++]=r;a[h++]=n;a[h++]=p;a[h++]=s;a[h++]=z;f++};this.getArrows=
function(){return a};this.getNarrows=function(){return f};this.reset=function(){d=b=f=h=0};c=new Float32Array(3*g);a=new Float32Array(g);this.reset()}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.FieldLineGenerator=function(g,h,a,f,b){var c,d,l,e,k,q;this.setCharges=function(a){e=a;return this};this.getCharges=function(){return e};this.getArrows=function(){return arrows};this.setMaxPoints=function(a){a>maxpoints&&(k=new vizit.electricfield.FieldLine(q));q=a;return this};this.getMaxPoints=function(){return q};this.setArrowHeadSize=function(a){c=a;return this};this.getArrowHeadSize=function(){return c};this.setArrowSpacing=function(a){d=a;return this};this.getArrowSpacing=function(){return d};
this.setDs=function(a){l=a;return this};this.getDs=function(){return l};this.drawArrow=function(a,c,b,d,e,f,l){var k,g,h,q,m;k=d[0]/e;g=d[1]/e;h=d[2]/e;0!==h?(q=e=1,d=-(d[0]+d[1])/d[2]):(0!==g?(e=1,q=-(d[0]+d[2])/d[1]):(e=-(d[1]+d[2])/d[0],q=1),d=1);m=f/Math.sqrt(e*e+q*q+d*d);e*=m;q*=m;d*=m;k*=f;g*=f;f*=h;l.pushArrow(a-k+e,c-g+q,b-f+d,a,c,b,a-k-e,c-g-q,b-f-d)};this.generate=function(a,b,f,g){var h,t,m,v;h=0;t=!1;v=f;k.reset();for(f=0;f<q&&!t;f++){k.pushPoint(a,b,v);m=e.getField(a,b,v);t=Math.sqrt(m[0]*
m[0]+m[1]*m[1]+m[2]*m[2]);if(0===t)break;a+=g*m[0]/t*l;b+=g*m[1]/t*l;v+=g*m[2]/t*l;h+=l;h>d&&(h=0,this.drawArrow(a,b,v,m,t,c,k));t=e.shouldStop(g,a,b,v)}return k};c=f;d=b;e=g;l=a;q=h;k=new vizit.electricfield.FieldLine(q)}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.FieldLineRenderer=function(g){var h,a,f,b,c,d;this.createProgram=function(c){c=a.createProgram("attribute vec3 position;uniform   mat4 modelViewMatrix;uniform   mat4 projectionMatrix;void main(){  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}","precision mediump float;void main(){  gl_FragColor = vec4(0.8,0.3,0.3,1.0);}");f=a.getUniformLocation(c,"modelViewMatrix");b=a.getAttribLocation(c,"position");d=a.getUniformLocation(c,"projectionMatrix");return c};
this.render=function(l,e,k,g){k=g.length;if(0<k)for(h.useProgram(c),h.lineWidth(1),h.uniformMatrix4fv(f,!1,e),h.uniformMatrix4fv(d,!1,l),e=0;e<k;e++){l=g[e];if(!l.isEnabled())break;a.bindBuffer(l.fieldLineBufferHandle,b,3,h.FLOAT,12,0);h.drawArrays(h.LINE_STRIP,0,l.npoints);a.bindBuffer(l.fieldDirectionBufferHandle,b,3,h.FLOAT,12,0);h.drawArrays(h.LINES,0,l.narrows)}};a=g;h=a.getGLContext();c=this.createProgram()}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};
(function(m){m.Cylinder=function(){var g,h;this.setColor=function(a){h=a};this.getColor=function(){return h};this.getCylinderModelView=function(a,f,b,c,d,l,e){var k,g,h;h=Math.sin(e);e=Math.cos(e);g=Math.sin(l);l=Math.cos(l);k=new Float32Array(16);k[0]=d*l*e;k[1]=d*e*g;k[2]=-d*h;k[3]=0;k[4]=-d*g;k[5]=d*l;k[6]=0;k[7]=0;k[8]=c*l*h;k[9]=c*g*h;k[10]=c*e;k[11]=0;k[12]=a;k[13]=f;k[14]=b;k[15]=1;return k};this.transformPoints=function(a,f,b,c){var d,l,e;g[0]=a[0]*b;g[1]=a[1]*b;g[2]=a[2]*b;g[3]=a[3];g[4]=
a[4]*b;g[5]=a[5]*b;g[6]=a[6]*b;g[7]=a[7];g[8]=a[8]*f;g[9]=a[9]*f;g[10]=a[10]*f;g[11]=a[11];g[12]=a[12];g[13]=a[13];g[14]=a[14];g[15]=a[15];f=0;for(a=c.length;f<a;f++)b=c[f],d=b[0],l=b[1],e=b[2],b[0]=g[0]*d+g[4]*l+g[8]*e+g[12],b[1]=g[1]*d+g[5]*l+g[9]*e+g[13],b[2]=g[2]*d+g[6]*l+g[10]*e+g[14];return c};this.setupBuffers=function(a,f,b,c,d){var g;g=a.getGLContext();a.bindBuffer(b,f.getPositionHandle(),3,g.FLOAT,0,0);a.bindBuffer(c,f.getNormalHandle(),3,g.FLOAT,0,0);g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,
d)};this.drawCap=function(a,f,b){a.drawElements(a.TRIANGLE_FAN,f,a.UNSIGNED_SHORT,2*b)};this.drawSide=function(a,f,b){a.drawElements(a.TRIANGLE_STRIP,f,a.UNSIGNED_SHORT,2*b)};this.drawCylinder=function(a,f,b,c,d){a=a.getGLContext();a.uniformMatrix4fv(f.getModelViewMatrixHandle(),!1,b);d&&this.drawCap(a,c+2,0);this.drawSide(a,2*c+2,c+2);d&&this.drawCap(a,c+2,3*c+4)};this.fullRender=function(a,f,b,c,d,l,e){var k,q,r,n;k=a.getGLContext();r=this.getBaseRadius();n=this.getVertexBuffers(a);k.uniform4f(f.getSurfaceColorHandle(),
h.getRed(),h.getGreen(),h.getBlue(),h.getAlpha());q=(this.getNindices()-6)/4;this.setupBuffers(a,f,n.vertices,n.normals,n.indices);g[3]=b[3];g[7]=b[7];g[8]=b[8]*c;g[9]=b[9]*c;g[10]=b[10]*c;g[11]=b[11];g[12]=b[12];g[13]=b[13];g[14]=b[14];g[15]=b[15];k.cullFace(k.FRONT);for(c=l;c>=d;c--)n=c/r,g[0]=b[0]*n,g[1]=b[1]*n,g[2]=b[2]*n,g[4]=b[4]*n,g[5]=b[5]*n,g[6]=b[6]*n,this.drawCylinder(a,f,g,q,e);k.cullFace(k.BACK);for(c=d;c<=l;c++)n=c/r,g[0]=b[0]*n,g[1]=b[1]*n,g[2]=b[2]*n,g[4]=b[4]*n,g[5]=b[5]*n,g[6]=b[6]*
n,this.drawCylinder(a,f,g,q,e)};this.translateBounds=function(a,f,b,c,d,g,e){var k,h,r;k=(f+d)/2;h=(b+g)/2;r=(c+e)/2;f-=k;b-=h;c-=r;d-=k;g-=h;e-=r;a.setTx(k).setTy(h).setTz(r).setX0(f).setY0(b).setZ0(c).setX1(d).setY1(g).setZ1(e)};this.sign=function(a){return 0>a?-1:1};this.zAxisRotation=function(a,f,b,c,d){var g;g=Math.atan2(d-b,c-f);f=-this.sign(c)*Math.sqrt(f*f+b*b);b=0;c=-f;d=0;a.setX0(f).setY0(b).setX1(c).setY1(d).setPhi(g)};this.yAxisRotation=function(a,f,b,c,d,g,e){b=Math.sqrt(f*f+b*b+c*c);
g=Math.acos(e/b);c=this.sign(e);e=c*b;d=f=0;a.setZ0(-c*b).setZ1(e).setX0(f).setX1(d).setTheta(g)};this.scale=function(a,f,b){var c;c=this.sign(b);f=b-f;a.setZ0(0.5*-c).setZ1(0.5*c).setHeight(f)};g=new Float32Array(16)};m.Cylinder.prototype=new vizit.geometry.Cylinder})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.GaussianCylinder=function(g,h,a,f,b,c,d,l){var e,k,q,r,n,p,s,m,t,u;this.setX=function(a){m=a;q[12]=m;return this};this.getX=function(){return m};this.setY=function(a){t=a;q[13]=t;return this};this.getY=function(){return t};this.setZ=function(a){u=a;q[14]=u;return this};this.getZ=function(){return u};this.setOrigin=function(a){this.setX(a[0]);this.setY(a[1]);return this.setZ(a[2])};this.getOrigin=function(){return[m,t,u]};this.setRadius=function(a){p=a;return this};this.getRadius=function(){return p};
this.setHeight=function(a){k=a;return this};this.getHeight=function(){return k};this.setTheta=function(a){s=a;return this};this.getTheta=function(){return s};this.setPhi=function(a){n=a;return this};this.getPhi=function(){return n};this.setName=function(a){r=a};this.getName=function(){return r};this.render=function(a,c){this.fullRender(a,c,q,k,p,p,!0)};e=new vizit.utility.Color(0.5,0.5,0.5,0.5);k=f;r=l;n=c;p=b;s=d;m=g;t=h;u=a;this.setColor(e);q=this.getCylinderModelView(m,t,u,this.getBaseHeight(),
this.getBaseRadius(),n,s)};m.GaussianCylinder.prototype=new vizit.utility.Cylinder})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.GaussianSphere=function(g,h,a,f,b){var c,d,l,e,k,q,r;this.setColor=function(a){c=a};this.getColor=function(){return c};this.setX=function(a){k=a;return this};this.getX=function(){return k};this.setY=function(a){q=a;return this};this.getY=function(){return q};this.setZ=function(a){r=a;return this};this.getZ=function(){return r};this.setRadius=function(a){e=a;return this};this.getRadius=function(){return e};this.setName=function(a){l=a};this.getName=function(){return l};this.getModelView=
function(a){"undefined"===typeof a&&(a=1);"undefined"===typeof d?(d=new Float32Array(16),d[0]=a,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=a,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=a,d[11]=0,d[12]=k,d[13]=q,d[14]=r,d[15]=1):(d[0]=a,d[5]=a,d[10]=a);return d};this.drawFullSurface=function(a,c,b,d,e,f){var g;g=a.getGLContext();a.bindBuffer(b,c.getPositionHandle(),3,g.FLOAT,0,0);a.bindBuffer(d,c.getNormalHandle(),3,g.FLOAT,0,0);g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,e);g.drawElements(g.TRIANGLES,f,g.UNSIGNED_SHORT,0)};
this.render=function(a,b){var d,f,g;d=a.getGLContext();f=this.getIntrinsicRadius();g=this.getVertexBuffers(a);d.uniformMatrix4fv(b.getModelViewMatrixHandle(),!1,this.getModelView(e/f));d.uniform4f(b.getSurfaceColorHandle(),c.getRed(),c.getGreen(),c.getBlue(),c.getAlpha());d.cullFace(d.FRONT);this.drawFullSurface(a,b,g.vertices,g.normals,g.indices,this.getNindices());d.cullFace(d.BACK);this.drawFullSurface(a,b,g.vertices,g.normals,g.indices,this.getNindices())};c=new vizit.utility.Color(0.5,0.5,0.5,
0.5);l=b;e=f;k=g;q=h;r=a};m.GaussianSphere.prototype=new vizit.geometry.Sphere})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.ChargedCylinder=function(g,h,a,f,b,c,d,l,e,k,q,r){var n,p,s,m,t,u,v,x,C,y,D,G,H,K,I,B,F,w,A,E,L,J,M,N;this.setHeight=function(a){n=a;s=!0};this.getHeight=function(){return n};this.setTx=function(a){G=a;s=!0;return this};this.getTx=function(){return G};this.setTy=function(a){H=a;s=!0;return this};this.getTy=function(){return H};this.setTz=function(a){K=a;s=!0;return this};this.getTz=function(){return K};this.setX0=function(a){I=a;s=!0;return this};this.getX0=function(){return I};this.setY0=
function(a){B=a;s=!0;return this};this.getY0=function(){return B};this.setZ0=function(a){F=a;s=!0;return this};this.getZ0=function(){return F};this.setX1=function(a){w=a;s=!0;return this};this.getX1=function(){return w};this.setY1=function(a){A=a;s=!0;return this};this.getY1=function(){return A};this.setZ1=function(a){E=a;s=!0;return this};this.getZ1=function(){return E};this.setR0=function(a){y=a;s=!0;return this};this.getR0=function(){return y};this.setR1=function(a){D=a;s=!0;return this};this.getR1=
function(){return D};this.setPhi=function(a){u=a;s=!0;return this};this.getPhi=function(){return u};this.setTheta=function(a){v=a;s=!0;return this};this.getTheta=function(){return v};this.setNfieldLines=function(a){t=a;s=!0;return this};this.getNfieldLines=function(){return t};this.setModified=function(a){s=a;return this};this.isModified=function(){return s};this.setName=function(a){m=a;return this};this.getName=function(){return m};this.getStartPoints=function(){var a,c,b,d,e,f,g;g=[];if(0!==C+t){f=
this.sign(x);c=Math.max(2,Math.round(Math.abs(x*Math.PI*(D*D-y*y)*C*n)))+t;b=(y+1)/D;d=0.707106781*(y+1)/D;e=-0.5;a=1/(c-1);for(var k=0;k<c;k++)g.push([b,0,e,f]),g.push([-b,0,e,f]),g.push([0,b,e,f]),g.push([0,-b,e,f]),g.push([d,d,e,f]),g.push([d,-d,e,f]),g.push([-d,-d,e,f]),g.push([-d,d,e,f]),e+=a}return this.transformPoints(p,n/this.getBaseHeight(),D/this.getBaseRadius(),g)};this.getNormal=function(a,c,b){var d,e,f,g;d={};e=-((I-a)*L+(B-c)*J+(F-b)*M)/(N*N);f=I+e*L;g=B+e*J;e=F+e*M;d.x=a-f;d.y=c-g;
d.z=b-e;return d};this.getField=function(a,c,b){var d;d=Array(3);c=this.getNormal(a,c,b);b=Math.sqrt(c.x*c.x+c.y*c.y+c.z*c.z);a=2*(b<y?0:b<D?Math.PI*(b*b-y*y)*x:Math.PI*(D*D-y*y)*x)/b;d[0]=a*c.x/b;d[1]=a*c.y/b;d[2]=a*c.z/b;return d};this.render=function(a,c){this.fullRender(a,c,p,n/this.getBaseHeight(),y/this.getBaseRadius(),D/this.getBaseRadius(),!1)};s=!0;m=r;x="undefined"===typeof e?0:e;C="undefined"===typeof k?0:k;t="undefined"===typeof q?0:q;y=d;D=l;I=g;B=h;F=a;w=f;A=b;E=c;d=0<x?new vizit.utility.Color(0.05,
0.05,0.8,0.3):0>x?new vizit.utility.Color(0.8,0.05,0.05,0.3):new vizit.utility.Color(0.5,0.5,0.5,0.2);this.setColor(d);this.translateBounds(this,I,B,F,w,A,E);this.zAxisRotation(this,I,B,w,A);this.yAxisRotation(this,I,B,F,w,A,E);this.scale(this,F,E);I=g;B=h;F=a;w=f;A=b;E=c;p=this.getCylinderModelView(G,H,K,this.getBaseHeight(),this.getBaseRadius(),u,v);L=w-I;J=A-B;M=E-F;N=Math.sqrt(L*L+J*J+M*M)};m.ChargedCylinder.prototype=new vizit.utility.Cylinder})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.ChargedLine=function(g,h,a,f,b,c,d,l,e,k){var q,r,n,p,s,m,t,u,v,x,C,y,D,G,H,K,I,B,F,w,A,E,L,J;this.setHeight=function(a){n=a;s=!0};this.getHeight=function(){return n};this.setTx=function(a){y=a;s=!0;return this};this.getTx=function(){return y};this.setTy=function(a){D=a;return this};this.getTy=function(){return D};this.setTz=function(a){G=a;s=!0;return this};this.getTz=function(){return G};this.setX0=function(a){H=a;s=!0;return this};this.getX0=function(){return H};this.setY0=function(a){K=
a;s=!0;return this};this.getY0=function(){return K};this.setZ0=function(a){I=a;s=!0;return this};this.getZ0=function(){return I};this.setX1=function(a){B=a;s=!0;return this};this.getX1=function(){return B};this.setY1=function(a){F=a;s=!0;return this};this.getY1=function(){return F};this.setZ1=function(a){w=a;s=!0;return this};this.getZ1=function(){return w};this.setR0=function(a){x=a;s=!0;return this};this.getR0=function(){return x};this.setR1=function(a){C=a;s=!0;return this};this.getR1=function(){return C};
this.setPhi=function(a){u=a;s=!0;return this};this.getPhi=function(){return u};this.setTheta=function(a){v=a;s=!0;return this};this.getTheta=function(){return v};this.setNfieldLines=function(a){t=a;s=!0;return this};this.getNfieldLines=function(){return t};this.setModified=function(a){s=a;return this};this.isModified=function(){return s};this.setName=function(a){m=a;return this};this.getName=function(){return m};this.getStartPoints=function(){var a,c,b,d,e;e=[];if(0!==r+t){d=this.sign(q);c=Math.max(2,
Math.round(Math.abs(q*r*n)))+t;b=-0.5;a=1/(c-1);for(var f=0;f<c;f++)e.push([1,0,b,d]),e.push([-1,0,b,d]),e.push([0,1,b,d]),e.push([0,-1,b,d]),e.push([0.707106781,0.707106781,b,d]),e.push([0.707106781,-0.707106781,b,d]),e.push([-0.707106781,-0.707106781,b,d]),e.push([-0.707106781,0.707106781,b,d]),b+=a}return this.transformPoints(p,n/this.getBaseHeight(),(x+1)/this.getBaseRadius(),e)};this.getNormal=function(a,c,b){var d,e,f,g;d={};e=-((H-a)*A+(K-c)*E+(I-b)*L)/(J*J);f=H+e*A;g=K+e*E;e=I+e*L;d.x=a-f;
d.y=c-g;d.z=b-e;return d};this.getField=function(a,c,b){var d;b=this.getNormal(a,c,b);d=Math.sqrt(b.x*b.x+b.y*b.y+b.z*b.z);a=Array(3);c=2*q/d;a[0]=c*b.x/d;a[1]=c*b.y/d;a[2]=c*b.z/d;return a};this.render=function(a,b){this.fullRender(a,b,p,n,x,C,!1)};q="undefined"===typeof d?0:d;d=0<q?new vizit.utility.Color(0.05,0.05,0.8,0.8):0>q?new vizit.utility.Color(0.8,0.05,0.05,0.8):new vizit.utility.Color(0.5,0.5,0.5,0.8);this.setColor(d);s=!0;m=k;r="undefined"===typeof l?0:l;t="undefined"===typeof e?0:e;x=
0;C=3;H=g;K=h;I=a;B=f;F=b;w=c;this.translateBounds(this,H,K,I,B,F,w);this.zAxisRotation(this,H,K,B,F);this.yAxisRotation(this,H,K,I,B,F,w);this.scale(this,I,w);H=g;K=h;I=a;B=f;F=b;w=c;p=this.getCylinderModelView(y,D,G,this.getBaseHeight(),this.getBaseRadius(),u,v);A=B-H;E=F-K;L=w-I;J=Math.sqrt(A*A+E*E+L*L)};m.ChargedLine.prototype=new vizit.utility.Cylinder})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.ChargedPlane=function(g,h,a,f,b,c,d,l,e,k,q,r,n,p,s,m){var t,u,v,x,C,y,D,G,H,K,I,B,F,w,A,E,L,J,M,N,O,P,S,R;this.setNfieldLines=function(a){I=a;H=!0;return this};this.getNfieldLines=function(){return I};this.setModified=function(a){H=a;return this};this.isModified=function(){return H};this.setName=function(a){K=a;return this};this.getName=function(){return K};this.calculateNormal=function(a){var b;b=Array(3);b[0]=(a[4]-a[1])*(a[11]-a[2])-(a[5]-a[2])*(a[10]-a[1]);b[1]=(a[5]-a[2])*(a[9]-
a[0])-(a[3]-a[0])*(a[11]-a[2]);b[2]=(a[3]-a[0])*(a[10]-a[1])-(a[4]-a[1])*(a[9]-a[0]);a=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=a;b[1]/=a;b[2]/=a;return b};this.adjustStartPoints=function(a){var b,c,d,e,f;b=a.length;for(var g=0;g<b;g++)c=a[g],d=c[0],e=c[1],f=c[2],c[0]=N+D*(J*d*C+f*w)+E*(-M*e*y+A*(-J*d*w+f*C)),c[1]=O+D*(M*e*y+A*(J*d*w-f*C))+E*(J*d*C+f*w),c[2]=P+M*e*A+y*(-J*d*w+f*C);return a};this.getStartPoints=function(){var a,b,c,d,e,f,g;b=Math.abs(L*F)+I/Math.abs(J*M);e=[];if(0<b)for(a=Math.sqrt(1/
b),b=a/Math.abs(J),a/=Math.abs(M),c=!1,d=0<L?1:-1,f=Math.min(-0.5+b/2,0.5),g=Math.min(-0.5+a/2,0.5);!c;)e.push([f,g,0.4,d]),e.push([f,g,-0.4,d]),g+=a,0.5<g?(g=0.5-(g-0.5),f+=b,a=-a):-0.5>g&&(g=-0.5-(g- -0.5),f+=b,a=-a),c=0.5<f;return this.adjustStartPoints(e)};this.getField=function(a,b,c){var d;d=Array(3);a=(a-x[0])*B[0]+(b-x[1])*B[1]+(c-x[2])*B[2];b=S*L;0===a&&(d[0]=0,d[1]=0,d[2]=0);0<a?(d[0]=b*B[0],d[1]=b*B[1],d[2]=b*B[2]):(d[0]=-b*B[0],d[1]=-b*B[1],d[2]=-b*B[2]);return d};this.translateBoundingBox=
function(b){N=(g+d)/2;O=(h+l)/2;P=(a+e)/2;b[0]-=N;b[1]-=O;b[2]-=P;b[3]-=N;b[4]-=O;b[5]-=P;b[6]-=N;b[7]-=O;b[8]-=P;b[9]-=N;b[10]-=O;b[11]-=P;return b};this.zAxisRotation=function(a){var c,d;c=a[3]-a[0];d=a[0]-a[9];0===c||0===d?(v=0,R=0===c&&0===d?0===a[4]-a[1]?1:2:0===c?1:2):(c=(b-h)/c,d=(l-b)/d,Math.abs(c)<Math.abs(d)?(v=Math.atan(c),R=1):(v=Math.atan(d),R=2));D=Math.cos(v);E=Math.sin(v);for(var e=0;4>e;e++)d=D*a[3*e]-E*a[3*e+1],c=E*a[3*e]+D*a[3*e+1],a[3*e]=d,a[3*e+1]=c;return a};this.xAxisRotation=
function(a,b){var c,d;1===b?(c=a[1]-a[10],d=a[2]-a[11]):(c=a[4]-a[1],d=a[5]-a[2]);A=u=0;y=1;if(0!==d&&0!==c){u=Math.atan(d/c);A=Math.sin(u);y=Math.cos(u);for(var e=0;4>e;e++)c=y*a[3*e+1]-A*a[3*e+2],d=A*a[3*e+1]+y*a[3*e+2],a[3*e+1]=c,a[3*e+2]=d}return a};this.yAxisRotation=function(a,b){var c,d;1===b?(c=a[0]-a[9],d=a[2]-a[11]):(c=a[3]-a[0],d=a[5]-a[2]);w=t=0;C=1;if(0!==d){0!==c?(t=Math.atan(d/c),w=Math.sin(t),C=Math.cos(t)):(t=1.5707963267948966,w=1,C=0);for(var e=0;4>e;e++)c=C*a[3*e]+w*a[3*e+2],d=
-w*a[3*e]+C*a[3*e+2],a[3*e]=c,a[3*e+2]=d}return a};this.scaleBoundingbox=function(a,b){1===b?(J=a[0]-a[9],M=a[4]-a[1]):(J=a[3]-a[0],M=a[1]-a[10]);for(var c=0;4>c;c++)0!==J&&(a[3*c]/=J),0!==M&&(a[3*c+1]/=M);return a};this.getModelView=function(){return G};this.drawFullSurface=function(a,b,c,d,e,f){var g;g=a.getGLContext();a.bindBuffer(c,b.getPositionHandle(),3,g.FLOAT,0,0);a.bindBuffer(d,b.getNormalHandle(),3,g.FLOAT,0,0);g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,e);g.drawElements(g.TRIANGLES,f,g.UNSIGNED_SHORT,
0)};this.render=function(a,b){var c,d,e;c=a.getGLContext();e=this.getVertexBuffers(a);0<L?c.uniform4f(b.getSurfaceColorHandle(),0.05,0.05,0.8,0.4):0>L?c.uniform4f(b.getSurfaceColorHandle(),0.8,0.05,0.05,0.4):c.uniform4f(b.getSurfaceColorHandle(),0.5,0.5,0.5,0.2);d=this.getNindices();c.uniformMatrix4fv(b.getModelViewMatrixHandle(),!1,this.getModelView());c.disable(c.CULL_FACE);this.drawFullSurface(a,b,e.vertices,e.normals,e.indices,d);c.enable(c.CULL_FACE)};H=!0;K=m;S=6.283185307179586;L="undefined"===
typeof n?0:n;F="undefined"===typeof p?0:p;I="undefined"===typeof s?0:s;x=[g,h,a,f,b,c,d,l,e,k,q,r];f=x.slice(0);B=this.calculateNormal(x);f=this.translateBoundingBox(f);f=this.zAxisRotation(f);f=this.xAxisRotation(f,R);f=this.yAxisRotation(f,R);f=this.scaleBoundingbox(f,R);G=new Float32Array(16);C=Math.cos(-t);y=Math.cos(-u);D=Math.cos(-v);w=Math.sin(-t);A=Math.sin(-u);E=Math.sin(-v);G[0]=J*(C*D-w*A*E);G[1]=J*(C*E+D*w*A);G[2]=-J*y*w;G[3]=0;G[4]=-M*y*E;G[5]=M*y*D;G[6]=M*A;G[7]=0;G[8]=A*E*C+w*D;G[9]=
-(A*C*D-w*E);G[10]=C*y;G[11]=0;G[12]=N;G[13]=O;G[14]=P;G[15]=1};m.ChargedPlane.prototype=new vizit.geometry.Square})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.ChargedSphere=function(g,h,a,f,b,c,d,l,e){var k,q,r,n,p,s,m,t,u,v,x;m=!0;t=e;u=0;k=f;q=k*k;r=q*k;n=b;p=n*n*n;v="undefined"===typeof c?0:c;x="undefined"===typeof d?0:d;nfieldLines="undefined"===typeof l?0:l;this.setA=function(a){k=a;q=k*k;r=q*k;m=!0;return this};this.getA=function(){return k};this.setB=function(a){n=a;p=n*n*n;m=!0;return this};this.getB=function(){return n};this.setNindices=function(a){u=a;return this};this.setModified=function(a){m=a;return this};this.isModified=function(){return m};
this.setNfieldLines=function(a){nfieldLines=a;m=!0;return this};this.getNfieldLines=function(){return nfieldLines};this.setName=function(a){t=a;return this};this.getName=function(){return t};this.getStartPoints=function(){var b,c,d,e,f,l,s;l=0<v?1:0>v?-1:0;b=Math.round(x*v*l)+nfieldLines;e=3.6/Math.sqrt(b);c=0;radius=k+0.2*(n-k);f=[];for(var q=1;q<b;q++)s=-1+2*q/b,d=Math.sqrt(1-s*s),c+=e/d,f.push([Math.cos(c)*d*radius+g,s*radius+h,Math.sin(c)*d*radius+a,l]);return f};this.getField=function(b,c,d){var e,
f=[0,0,0],l;b-=g;c-=h;d-=a;e=b*b+c*c+d*d;if(e<=q)return f;l=Math.sqrt(e);e=l>=k&&l<n?v*(l-r/e)/(p-r):v/e;f[0]=e*b/l;f[1]=e*c/l;f[2]=e*d/l;return f};this.getModelView=function(b){"undefined"===typeof b&&(b=1);null===s?(s=new Float32Array(16),s[0]=b,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=b,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=b,s[11]=0,s[12]=g,s[13]=h,s[14]=a,s[15]=1):(s[0]=b,s[5]=b,s[10]=b);return s};this.drawFullSurface=function(a,b,c,d,e,f){var g;g=a.getGLContext();a.bindBuffer(c,b.getPositionHandle(),3,
g.FLOAT,0,0);a.bindBuffer(d,b.getNormalHandle(),3,g.FLOAT,0,0);g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,e);g.drawElements(g.TRIANGLES,f,g.UNSIGNED_SHORT,0)};this.render=function(a,b){var c,d,e,f,g;d=a.getGLContext();c=this.getIntrinsicRadius();g=this.getVertexBuffers(a);0<v?d.uniform4f(b.getSurfaceColorHandle(),0.05,0.05,0.8,0.2):0>v?d.uniform4f(b.getSurfaceColorHandle(),0.8,0.05,0.05,0.2):d.uniform4f(b.getSurfaceColorHandle(),0.5,0.5,0.5,0.2);u=this.getNindices();d.cullFace(d.FRONT);for(e=n;e>=k;e--)f=
e/c,d.uniformMatrix4fv(b.getModelViewMatrixHandle(),!1,this.getModelView(f)),this.drawFullSurface(a,b,g.vertices,g.normals,g.indices,u);d.cullFace(d.BACK);for(e=k;e<=n;e++)f=e/c,this.drawFullSurface(a,b,g.vertices,g.normals,g.indices,u),d.uniformMatrix4fv(b.getModelViewMatrixHandle(),!1,this.getModelView(f))}};m.ChargedSphere.prototype=new vizit.geometry.Sphere})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.Charge=function(g,h,a,f,b,c,d){var l,e,k,q,r,n,p;this.setCharge=function(a){l=a;e=!0};this.getCharge=function(){return l};this.setPosition=function(a){e=!0};this.getPosition=function(){return r};this.setNfieldLines=function(a){q=a;e=!0};this.getNfieldLines=function(){return q};this.setModified=function(a){e=a};this.isModified=function(){return e};this.setName=function(a){k=a};this.getName=function(){return k};this.getField=function(a,b,c){var d,e=[0,0,0],f;a-=r[0];b-=r[1];c-=r[2];p=
a*a+b*b+c*c;if(0>=p)return e;f=Math.sqrt(p);d=l/p;e[0]=d*a/f;e[1]=d*b/f;e[2]=d*c/f;return e};this.getFieldSeedPointsI=function(a){var b,c,d,e,f,g;e=[];f=0<l?1:0>l?-1:0;a=Math.round(a*l*f);b=2/a;for(var k=0;k<a;k++)g=k*b-1+b/2,d=Math.sqrt(1-g*g),c=2.39996323*k,e.push([Math.cos(c)*d+r[0],g+r[1],Math.sin(c)*d+r[2],f]);return e};this.getStartPoints=function(a,b){var c,d,e,f,g,k,h;k=0<l?1:0>l?-1:0;c=Math.round(n*l*k)-1+q;f=3.6/Math.sqrt(c);d="undefined"===typeof a?Math.PI/2:a;b="undefined"===typeof b?
1:b;g=[];if(0<c)for(var p=1;p<c;p++)h=-1+2*p/c,e=Math.sqrt(1-h*h),d+=f/e,g.push([Math.cos(d)*e*b+r[0],h*b+r[1],Math.sin(d)*e*b+r[2],k]);return g};this.shouldStop=function(a,b,c,d){return 0>a*l&&4>p};l=f;e=!0;k=d;r=[g,h,a];n="undefined"===typeof b?0:b;q="undefined"===typeof c?0:c};m.Charges=function(){var g,h,a,f;this.addCharge=function(b){a=g.push(b);return this};for(var b=0;b<arguments.length;b++)this.addCharge(arguments[b]);this.getNcharges=function(){return a};this.getCharges=function(){return g};
this.addDistribution=function(a){f=h.push(a);return this};this.getNdistributions=function(){return f};this.getDistributions=function(){return h};this.chargesModified=function(){var c;c=!1;for(b=0;b<a&&!c;b++)c=c||g[b].isModified();return c};this.distributionsModified=function(){var a;a=!1;for(b=0;b<f&&!a;b++)a=a||h[b].isModified();return a};this.isModified=function(){return this.chargesModified()||this.distributionsModified()};this.setModified=function(c){for(b=0;b<a;b++)g[b].setModified(c);for(b=
0;b<f;b++)h[b].setModified(c)};this.getStartPoints=function(b,d){var l,e=b,k=1.57079632679/(a+1),q=[],r;for(l=0;l<a;l++)r=g[l],q=q.concat(r.getStartPoints(e,d)),e+=k;for(l=0;l<f;l++)q=q.concat(h[l].getStartPoints());return q};this.getField=function(b,d,l){for(var e,k=[0,0,0],q=0;q<a;q++)e=g[q],e=e.getField(b,d,l),k[0]+=e[0],k[1]+=e[1],k[2]+=e[2];for(q=0;q<f;q++)e=h[q].getField(b,d,l),k[0]+=e[0],k[1]+=e[1],k[2]+=e[2];return k};this.shouldStop=function(b,d,f,e){var k;k=!1;for(var h=0;h<a&!k;h++)k=g[h],
k=k.shouldStop(b,d,f,e);return k};a=0;g=[];h=[]}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.ElectricField=function(g){var h,a,f,b,c,d,l,e,k,q,r,n,p,s,m,t,u,v,x,C,y,D,G;this.setArrowSpacing=function(b){a=b;"undefined"!==typeof u&&u.setArrowSpacing(b)};this.getArrowSpacing=function(){return a};this.setArrowHeadSize=function(a){h=a;"undefined"!==typeof u&&u.setArrowHeadSize(a)};this.getArrowHeadSize=function(){return h};this.setColor=function(a){l=a};this.getColor=function(){return l};this.setCharges=function(a){d=a};this.getCharges=function(){return d};this.addGaussianSurface=
function(a){q.push(a)};this.getGaussianSurfaces=function(){return q};this.setGlUtility=function(a){r=a};this.getGlUtility=function(){return r};this.setMaxVectors=function(a){m=a};this.getMaxVectors=function(){return m};this.setModelViewMatrix=function(a){x=a;t=r.extractRotationPart(x,t)};this.getModelViewMatrix=function(){return x};this.setProjectionMatrix=function(a){C=a};this.addStartPoint=function(a,b,d,c){y.push([a,b,d,c]);return this};this.addStartPoints=function(a){y=y.concat(a)};this.getStartPoints=
function(){return y};this.render=function(){if(D){var a;a=r.getGLContext();d.chargesModified()?(this.setupCharges(),this.setupFieldLines()):d.distributionsModified()&&this.setupFieldLines();r.clear();v.render(C,x,l,k);c.render(C,x,f,d);a.enable(a.BLEND);a.enable(a.CULL_FACE);a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);G.render(C,x,t,d.getDistributions());a.disable(a.DEPTH_TEST);G.render(C,x,t,q);a.enable(a.DEPTH_TEST);a.disable(a.BLEND);a.disable(a.CULL_FACE);d.setModified(!1)}};this.setupCharges=
function(a){f||(a=r.getGLContext(),f=a.createBuffer());a=b.generate();r.loadData(f,a)};this.setupFieldLines=function(){var a,b,c,e,f,g;f=[];f=f.concat(d.getStartPoints(0,5));f=f.concat(y);c=f.length;e=k.length;g=Math.min(c,e);for(b=0;b<g;++b)a=f[b],a=u.generate(a[0],a[1],a[2],a[3]),k[b].reload(r,a);for(;b<e;++b)k[b].disable();for(;b<c;++b)a=f[b],a=u.generate(a[0],a[1],a[2],a[3]),k.push(new vizit.electricfield.FieldLineVBO(r,a))};this.started=function(){D=!0;this.render()};this.start=function(){r.clearColor(0,
0,0,0);v=new vizit.electricfield.FieldLineRenderer(r);b=new vizit.electricfield.ChargeGenerator(d);u=new vizit.electricfield.FieldLineGenerator(d,s,e,h,a);this.setupFieldLines(d,s,e,h,a);c=new vizit.electricfield.ChargeRenderer(r,p.countDown,n);this.setupCharges(d);G=new vizit.electricfield.SurfaceRenderer(r);p.countDown()};h=0.3;a=1.2;l=new Float32Array([0.8,0.3,0.3,1]);e=0.6;k=[];q=[];n="undefined"===typeof g?"./":g;p=new vizit.utility.CountdownLatch(3,this.started.bind(this));s=3E3;m=5;t=new Float32Array([1,
0,0,0,1,0,0,0,1]);y=[];D=!1}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};
(function(m){m.VectorFieldGenerator=function(g,h,a,f,b){var c,d,l,e,k,q,r,m;this.setStartPoints=function(a){m=a;return this};this.getStartPoints=function(){return m};this.setMaxVectors=function(a){q=a;return this};this.getMaxVectors=function(){return q};this.setArrowHeadSize=function(a){d=a;return this};this.getArrowHeadSize=function(){return d};this.setVectorSpacing=function(a){vectorSpacing=a;return this};this.getVectorSpacing=function(){return vectorSpacing};this.setDs=function(a){e=a;return this};
this.getDs=function(){return e};this.generateVector=function(a,b,c,d,e,f,g,k,l,h){var q,m,r,n,B,F,w,A,E,L,J,M,N;L=a+d[0]*l;J=b+d[1]*l;M=c+d[2]*l;0!==d[2]?(w=F=1,A=-(d[0]+d[1])/d[2]):(0!==d[1]?(F=1,w=-(d[0]+d[2])/d[1]):(F=-(d[1]+d[2])/d[0],w=1),A=1);E=g*f*e*l/Math.sqrt(F*F+w*w+A*A);F*=E;w*=E;A*=E;q=f*d[0]*l;m=f*d[1]*l;d=f*d[2]*l;r=m*A-d*w;n=d*F-q*A;B=q*w-m*F;E=g*f*e*l/Math.sqrt(r*r+n*n+B*B);r*=E;n*=E;B*=E;e=L-q+F;f=J-m+w;g=M-d+A;F=L-q-F;w=J-m-w;A=M-d-A;l=L-q+r;E=J-m+n;N=M-d+B;q=L-q-r;m=J-m-n;B=M-d-
B;d=6*k+1;h.pushVertex(a);h.pushVertex(b);h.pushVertex(c);h.pushIndex(6*k);h.pushVertex(L);h.pushVertex(J);h.pushVertex(M);h.pushIndex(d);h.pushVertex(e);h.pushVertex(f);h.pushVertex(g);h.pushIndex(6*k+2);h.pushIndex(d);h.pushVertex(F);h.pushVertex(w);h.pushVertex(A);h.pushIndex(6*k+3);h.pushIndex(d);h.pushVertex(l);h.pushVertex(E);h.pushVertex(N);h.pushIndex(6*k+4);h.pushIndex(d);h.pushVertex(q);h.pushVertex(m);h.pushVertex(B);h.pushIndex(6*k+5);h.pushIndex(d)};this.trace=function(a,b,f,g,k,l,h,
q,m){var r,n,H,K,I;I=K=r=0;for(n=!1;I<l&&!n;){H=a.getField(b,f,g);n=Math.sqrt(H[0]*H[0]+H[1]*H[1]+H[2]*H[2]);if(0===n)break;r>=K&&(this.generateVector(b,f,g,H,n,d,c,h+I,q,m),K=r+Math.max(1.2*n*q,1),I++);b+=k*H[0]/n*e;f+=k*H[1]/n*e;g+=k*H[2]/n*e;r+=e;n=a.shouldStop(k,b,f,g)}return I};this.generateField=function(){var a,b,d,c;d=m.length;r=0;b=new vizit.utility.IndexedVertices(6*q*d,10*q*d);for(a=0;a<d;a++)c=m[a],c[4]=r,r+=this.trace(k,c[0],c[1],c[2],c[3],q,r,l,b);return b};c=f;d=a;e=0.33;k=g;q=h;l=
b}})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.field=window.vizit.field||{};
(function(m){m.FieldRenderer=function(g){var h,a,f,b,c,d,l,e;this.getContext=function(){return f.getGLContext()};this.setRenderer=function(a){d=a;d.setGlUtility(f);d.setModelViewMatrix(b);d.setProjectionMatrix(c)};this.setModelViewMatrix=function(a){b=a;d.setModelViewMatrix(b)};this.getModelViewMatrix=function(){return b};this.requestRender=function(){l||(l=!0,requestAnimationFrame(this.render))};this.render=function(){d.render();l=!1};this.start=function(){d.start()};this.setScale=function(a){e=
a;1>e&&(e=1);c=f.generateOrthographicMatrix(e,e,-e,e);d.setProjectionMatrix(c);this.render()};this.zoomBy=function(a){this.setScale(e+a)};this.setElementName=function(a,b){h[b]=a};this.getElementByName=function(a){var b;h.hasOwnProperty(a)&&(b=h[a]);return b};h={};f=new vizit.utility.GLUtility(g);e=5;b=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);new Float32Array([1,0,0,0,1,0,0,0,1]);c=f.generateOrthographicMatrix(e,e,-e,e);a=new vizit.utility.MotionEventHandler(this,f,75,4);g.addEventListener("mousewheel",
a.handleMouseWheel.bind(a),!1);g.addEventListener("mousedown",a.handleMouseDown.bind(a),!1);document.addEventListener("mouseup",a.handleMouseUp.bind(a),!1);document.addEventListener("mousemove",a.handleMouseMove.bind(a),!1);g.addEventListener("touchstart",a.handleTouchStart.bind(a),!1);g.addEventListener("touchmove",a.handleTouchMove.bind(a),!1);g.addEventListener("touchend",a.handleTouchEnd.bind(a),!1)}})(window.vizit.field);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(m){m.CombinedVectorValuedFunctionBuilder=function(g){var h;this.buildFunction=function(a){var f,b;for(b in a)"args"!==b.toLowerCase()&&("body"===b.toLowerCase()?f=a[b]:"name"===b.toLowerCase()?name=a[b]:"properties"!==b.toLowerCase()&&"stop"!==b.toLowerCase()&&b.toLowerCase());return new vizit.vectorfield.VectorFunction(agrs,f)};this.build=function(a){var f,b,c,d;if(a)if(b=new vizit.vectorfield.CombinedVectorFunctions,Array.isArray(a)){d=a.length;for(var g=0;g<d;++g)if(f=this.buildFunction(a[g]))b.addFunction(f),
(c=f.getName())&&h.setElementName(f,c)}else if(f=this.buildFunction(a))b.addFunction(f),(c=f.getName())&&h.setElementName(f,c);return b};h=g}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(m){m.SurfaceBuilder=function(){var g,h,a,f,b,c;this.getXMin=function(){return g};this.getXMax=function(){return h};this.getYMin=function(){return a};this.getYMax=function(){return f};this.getZMin=function(){return b};this.getZMax=function(){return c};this.gaussianCylinderBuilder=function(d){var l,e,k,q,m,n,p,s,z;for(e in d)"x"===e.toLowerCase()?k=d[e]:"y"===e.toLowerCase()?q=d[e]:"z"===e.toLowerCase()?m=d[e]:"h"===e.toLowerCase()?n=d[e]:"r"===e.toLowerCase()?p=d[e]:"phi"===e.toLowerCase()?
s=d[e]:"theta"===e.toLowerCase()?z=d[e]:"name"===e.toLowerCase()&&(l=d[e]);g=Math.min(g,k-p,k+p);h=Math.max(h,k-p,k+p);a=Math.min(a,q-p,q-p);f=Math.max(f,q-p,q+p);b=Math.min(b,m-n,m+n);c=Math.max(c,m-n,m+n);return new vizit.electricfield.GaussianCylinder(k,q,m,n,p,s,z,l)};this.gaussianSphereBuilder=function(d){var l,e,k,q,m,n;for(e in d)"x"===e.toLowerCase()?k=d[e]:"y"===e.toLowerCase()?q=d[e]:"z"===e.toLowerCase()?m=d[e]:"r"===e.toLowerCase()?n=d[e]:"name"===e.toLowerCase()&&(l=d[e]);g=Math.min(g,
k-n,k+n);h=Math.max(h,k-n,k+n);a=Math.min(a,q-n,q-n);f=Math.max(f,q-n,q+n);b=Math.min(b,m-n,m+n);c=Math.max(c,m-n,m+n);return new vizit.electricfield.GaussianSphere(k,q,m,n,l)};this.surfaceBuilder=function(a){var b,c,f,g;b=/\s*gaussian\s*sphere\s*/i;for(c in a)if("type"===c.toLowerCase()){g=a[c];break}g.match(/\s*gaussian\s*cylinder\s*/i)?f=this.gaussianCylinderBuilder(a):g.match(b)&&(f=this.gaussianSphereBuilder(a));return f};this.build=function(a,b,c){var f,g;if(a)if(Array.isArray(a)){g=a.length;
for(var h=0;h<g;++h)if(f=this.surfaceBuilder(a[h],c))b.addGaussianSurface(f),(name=f.getName())&&c.setElementName(f,name)}else if(f=this.surfaceBuilder(a))b.addGaussianSurface(f),(name=f.getName())&&c.setElementName(f,name);return b}}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};(function(m){m.VectorValuedFunctionBuilder=function(g){var h;this.build=function(a,f){var b,c;a&&(b=Array.isArray(a)?a[0]:a,"undefined"!==typeof b&&(c="function"===b.type.toLowerCase()?new vizit.builder.CombinedVectorValuedFunctionBuilder(h):new vizit.builder.ElectricFieldElementBuilder(h,f)));return c.build(a)};h=g}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(m){m.DistributionBuilder=function(){var g,h,a,f,b,c,d,l;this.getXMin=function(){return a};this.getXMax=function(){return f};this.getYMin=function(){return b};this.getYMax=function(){return c};this.getZMin=function(){return d};this.getZMax=function(){return l};this.chargedPlaneBuilder=function(e){var k,m,r,n,p,s,z,t,u,v,x,C,y,D,G,H,K;for(k in e)k.match(g)?m=e[k]:k.match(h)?r=e[k]:"nfieldLines"===k.toLowerCase()?p=e[k]:"x0"===k.toLowerCase()?s=e[k]:"y0"===k.toLowerCase()?z=e[k]:"z0"===k.toLowerCase()?
t=e[k]:"x1"===k.toLowerCase()?u=e[k]:"y1"===k.toLowerCase()?v=e[k]:"z1"===k.toLowerCase()?x=e[k]:"x2"===k.toLowerCase()?C=e[k]:"y2"===k.toLowerCase()?y=e[k]:"z2"===k.toLowerCase()?D=e[k]:"x3"===k.toLowerCase()?G=e[k]:"y3"===k.toLowerCase()?H=e[k]:"z3"===k.toLowerCase()?K=e[k]:"name"===k.toLowerCase()&&(n=e[k]);a=Math.min(a,s,u,C,G);f=Math.max(f,s,u,C,G);b=Math.min(b,z,v,y,K);c=Math.max(c,z,v,y,K);d=Math.min(d,t,x,D,K);l=Math.max(l,t,x,D,K);return new vizit.electricfield.ChargedPlane(s,z,t,u,v,x,C,
y,D,G,H,K,m,r,p,n)};this.chargedCylinderBuilder=function(e){var k,m,r,n,p,s,z,t,u,v,x,C,y;for(p in e)p.match(g)?k=e[p]:p.match(h)?m=e[p]:"nfieldLines"===p.toLowerCase()?n=e[p]:"x0"===p.toLowerCase()?s=e[p]:"y0"===p.toLowerCase()?z=e[p]:"z0"===p.toLowerCase()?t=e[p]:"x1"===p.toLowerCase()?u=e[p]:"y1"===p.toLowerCase()?v=e[p]:"z1"===p.toLowerCase()?x=e[p]:"r0"===p.toLowerCase()?C=e[p]:"r1"===p.toLowerCase()?y=e[p]:"name"===p.toLowerCase()&&(r=e[p]);a=Math.min(a,s,u);f=Math.max(f,s,u);b=Math.min(b,z,
v);c=Math.max(c,z,v);d=Math.min(d,t,x);l=Math.max(l,t,x);return new vizit.electricfield.ChargedCylinder(s,z,t,u,v,x,C,y,k,m,n,r)};this.chargedLineBuilder=function(e){var k,m,r,n,p,s,z,t,u,v,x;for(p in e)p.match(g)?k=e[p]:p.match(h)?m=e[p]:"nfieldLines"===p.toLowerCase()?n=e[p]:"x0"===p.toLowerCase()?s=e[p]:"y0"===p.toLowerCase()?z=e[p]:"z0"===p.toLowerCase()?t=e[p]:"x1"===p.toLowerCase()?u=e[p]:"y1"===p.toLowerCase()?v=e[p]:"z1"===p.toLowerCase()?x=e[p]:"name"===p.toLowerCase()&&(r=e[p]);a=Math.min(a,
s,u);f=Math.max(f,s,u);b=Math.min(b,z,v);c=Math.max(c,z,v);d=Math.min(d,t,x);l=Math.max(l,t,x);return new vizit.electricfield.ChargedLine(s,z,t,u,v,x,k,m,n,r)};this.chargedSphereBuilder=function(e){var g,m,r,n,p,s,z,t,u;for(property in e)"charge"===property.toLowerCase()?g=e[property]:property.match(h)?m=e[property]:"nfieldLines"===property.toLowerCase()?n=e[property]:"x"===property.toLowerCase()?p=e[property]:"y"===property.toLowerCase()?s=e[property]:"z"===property.toLowerCase()?z=e[property]:"a"===
property.toLowerCase()?t=e[property]:"b"===property.toLowerCase()?u=e[property]:"name"===property.toLowerCase()&&(r=e[property]);a=Math.min(a,p-u);f=Math.max(f,p+u);b=Math.min(b,s-u);c=Math.max(c,s+u);d=Math.min(d,z-u);l=Math.max(l,z+u);return new vizit.electricfield.ChargedSphere(p,s,z,t,u,g,m,n,r)};this.chargeDistributionBuilder=function(a){var b,d,c,f,g,h;b=/\s*charged\s*cylinder\s*/i;d=/\s*charged\s*line\s*/i;c=/\s*charged\s*sphere\s*/i;for(g in a)if("type"===g.toLowerCase()){h=a[g];break}h.match(/\s*charged\s*plane\s*/i)?
f=this.chargedPlaneBuilder(a):h.match(b)?f=this.chargedCylinderBuilder(a):h.match(d)?f=this.chargedLineBuilder(a):h.match(c)&&(f=this.chargedSphereBuilder(a));return f};this.build=function(a,b,d){var c,f,g;if(a)if(Array.isArray(a)){g=a.length;for(var h=0;h<g;++h)if(c=this.chargeDistributionBuilder(a[h]))b.addDistribution(c),(f=c.getName())&&d.setElementName(c,f)}else if(c=this.chargeDistributionBuilder(a))b.addDistribution(c),(f=c.getName())&&d.setElementName(c,f);return b};g=/\s*charge\s*density\s*/i;
h=/\s*field\s*line\s*density\s*/i}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(m){m.ChargesBuilder=function(){var g,h,a,f,b,c;this.getXMin=function(){return g};this.getXMax=function(){return h};this.getYMin=function(){return a};this.getYMax=function(){return f};this.getZMin=function(){return b};this.getZMax=function(){return c};this.chargeBuilder=function(d){var l,e,k,m,r,n,p,s,z,t,u;e="";p=/\s*field\s*line\s*density\s*/i;for(t in d)"charge"===t.toLowerCase()?u=d[t]:"x"===t.toLowerCase()?m=d[t]:"y"===t.toLowerCase()?r=d[t]:"z"===t.toLowerCase()?n=d[t]:t.match(p)?s=
d[t]:"nfieldlines"===t.toLowerCase()?z=d[t]:"name"===t.toLowerCase()&&(k=d[t]);"undefined"===typeof u&&(e="No charge specified for point charge.");"undefined"===typeof m&&(0<e.length&&(e+="\n"),e+="x coordinate is not defined in charge configuration.");"undefined"===typeof r&&(0<e.length&&(e+="\n"),e+="y coordinate is not defined in charge configuration.");"undefined"===typeof n&&(0<e.length&&(e+="\n"),e+="z coordinate is not defined in charge configuration.");0===e.length&&(m<g&&(g=m),m>h&&(h=m),
r<a&&(a=r),r>f&&(f=r),n<b&&(b=n),n>c&&(c=n),l=new vizit.electricfield.Charge(m,r,n,u,s,z,k));return l};this.build=function(a,b,c){var f,g,h;if(a)if(Array.isArray(a)){h=a.length;for(var m=0;m<h;++m)if(f=this.chargeBuilder(a[m]))b.addCharge(f),(g=f.getName())&&c.setElementName(f,g)}else if(f=this.chargeBuilder(a))b.addCharge(f),(g=f.getName())&&c.setElementName(f,g);return b};g=Number.POSITIVE_INFINITY;h=Number.NEGATIVE_INFINITY;a=Number.POSITIVE_INFINITY;f=Number.NEGATIVE_INFINITY;b=Number.POSITIVE_INFINITY;
c=Number.NEGATIVE_INFINITY}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(m){m.BindingBuilder=function(){this.bindingBuilder=function(g,h){var a,f,b,c,d;for(b in g)"target"===b.toLowerCase()?d=g[b]:"set"===b.toLowerCase()?c=g[b]:"from"===b.toLowerCase()?f=g[b]:"mapping"===b.toLowerCase()&&(a=g[b]);f||(f=c);b="set"+c.charAt(0).toUpperCase();1<c.length&&(b+=c.slice(1));c=h.getElementByName(d)[b];a=a?new MappingEventHandler(c,f,a,h):new DirectEventHandler(c,h);document.addEventListener(f+"Changed",a.handleUpdate.bind(a),!1)};this.build=function(g,h){var a;if(g)if(Array.isArray(g)){a=
g.length;for(var f=0;f<a;++f)this.bindingBuilder(g,h)}else this.bindingBuilder(g,h)}}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(m){m.ElectricFieldElementBuilder=function(g,h){var a,f;this.buildELement=function(b,c){var d,g,e,h,m,r,n,p;d=/\s*charged\s*cylinder\s*/i;g=/\s*charged\s*line\s*/i;e=/\s*charged\s*plane\s*/i;h=/\s*charged\s*sphere\s*/i;m=/\s*gaussian\s*cylinder\s*/i;r=/\s*gaussian\s*sphere\s*/i;for(n in b)"type"===n.toLowerCase()&&(p=b[n]);if("charge"===p.toLowerCase())d=new vizit.builder.ChargesBuilder,c=d.build(b,c,a);else if(p.match(d)||p.match(g)||p.match(e)||p.match(h))d=new vizit.builder.DistributionBuilder,
c=d.build(b,c,a);else if(p.match(m)||p.match(r))d=new vizit.builder.SurfaceBuilder,f=d.build(b,f,a);return c};this.build=function(a){var c,d;c=new vizit.electricfield.Charges;if(a)if(Array.isArray(a)){d=a.length;for(var f=0;f<d;++f)this.buildELement(a[f],c)}else this.buildELement(a,c);return c};a=g;f=h}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(m){m.ElectricFieldBuilder=function(g){var h;this.build=function(a){var f,b,c,d,g,e;for(e in a)"arrowheadsize"===e.toLowerCase()?f=a[e]:"arrowspacing"===e.toLowerCase()?b=a[e]:"maxvectors"===e.toLowerCase()?g=a[e]:"elements"===e.toLowerCase()&&(d=a[e]);a=new vizit.electricfield.ElectricField;"undefined"!==typeof g&&a.setMaxVectors(g);"undefined"!==typeof f&&a.setArrowHeadSize(f);"undefined"!==typeof b&&a.setArrowSpacing(b);(c=(new vizit.builder.ElectricFieldElementBuilder(h,a)).build(d,c))&&
a.setCharges(c);return a};h=g}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(m){m.SimpleVectorFieldBuilder=function(g){var h;this.build=function(a){var f,b,c,d,g,e,k;for(k in a)"arrowheadsize"===k.toLowerCase()&&(f=a[k]),"arrowheadwidth"===k.toLowerCase()?b=a[k]:"arrowsize"===k.toLowerCase()?c=a[k]:"maxvectors"===k.toLowerCase()&&(d=a[k]),"f"===k.toLowerCase()?e=a[k]:k.toLowerCase();e&&(a=new vizit.builder.VectorValuedFunctionBuilder(h),g=a.build(e));c=new vizit.vectorfield.SimpleVectorField(g,c);"undefined"!==typeof d&&c.setMaxVectors(d);"undefined"!==typeof f&&
c.setArrowHeadSize(f);"undefined"!==typeof b&&c.setArrowHeadWidth(b);return c};h=g}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(m){m.VizBuilder=function(){this.processConfig=function(g){var h,a,f,b,c,d,l,e;a=/\s*electric\s*field\s*/i;l=/\s*simple\s*vector\s*field\s*/i;for(f in g)"canvas"===f.toLowerCase()?b=g[f]:"scale"===f.toLowerCase()?d=g[f]:"type"===f.toLowerCase()?e=g[f]:"bindings"===f.toLowerCase()&&(h=g[f]);"undefined"===typeof e?alert("Missing type for visualization configuration."):"undefined"===b?alert("No canvas specified, please provide the id of a canvas."):(f=document.getElementById(b))?(b=new vizit.field.FieldRenderer(f),
e.match(a)?(a=new vizit.builder.ElectricFieldBuilder(b),c=a.build(g)):e.match(l)?(a=new vizit.builder.SimpleVectorFieldBuilder(b),c=a.build(g)):alert("Unrecognized visualization type: "+e+"."),c&&(h&&(a=new vizit.builder.BindingBuilder,a.build(h,b)),b.setRenderer(c),"undefined"!==typeof d&&b.setScale(d),b.start())):alert('Can not find canvas with id="'+b+'".')};this.process=function(g){var h;if(g)if(Array.isArray(g)){h=g.length;for(var a=0;a<h;++a)this.processConfig(g[a])}else this.processConfig(g)}}})(window.vizit.builder);
function VIZ_CONFIG_IF_EXISTS(m){"undefined"!==typeof VISUALIZATION_CONFIG&&(m=new vizit.builder.VizBuilder,m.process(VISUALIZATION_CONFIG))}"interactive"===document.readyState||"complete"===document.readyState?VIZ_CONFIG_IF_EXISTS():document.addEventListener("DOMContentLoaded",VIZ_CONFIG_IF_EXISTS);
