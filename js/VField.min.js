/*
 Copyright 2013-2014 Vizit Solutions

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
*/
window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};
(function(m){m.MotionEventHandler=function(g,h,a,f){var b,c,e,l;b=[];c=!1;l=e=null;this.findTouchByIdentifier=function(a){var f,c;for(f=0;f<b.length;f++)if(c=b[f].identifier,c===a)return f;return-1};this.handleTouchStart=function(a){var f,c,e;e=a.targetTouches;for(f=0;f<e.length;f++)c=e[f],-1===this.findTouchByIdentifier(c.identifier)&&b.push(c);if(a.preventDefault)a.preventDefault();else return!1};this.handleTouchEnd=function(a){var f,c,e;e=a.changedTouches;for(f=0;f<e.length;f++)c=this.findTouchByIdentifier(e[f].identifier),
-1!==c&&b.splice(c,1);if(a.preventDefault)a.preventDefault();else return!1};this.handleOneActiveMove=function(a){var f,c,e,l;l=a.changedTouches[0];c=b[0];null!==c?(f=l.pageX-c.pageX,c=l.pageY-c.pageY,e=g.getModelViewMatrix(),h.rotateBy(e,c/150,f/150),g.setModelViewMatrix(e),g.requestRender(),b.splice(0,1,l)):b.push(l);if(a.preventDefault)a.preventDefault();else return!1};this.handleTwoActiveMove=function(a){var c,e,l,n,h,q,x;n=b[0];q=b[1];c=q.pageX-n.pageX;e=q.pageY-n.pageY;l=Math.sqrt(c*c+e*e);x=
a.changedTouches;for(c=0;c<x.length;c++)h=x[c],e=h.identifier,n.identifier===e?(n=h,b.splice(0,1,h)):q.identifier===e&&(q=h,b.splice(1,1,h));c=q.pageX-n.pageX;e=q.pageY-n.pageY;n=Math.sqrt(c*c+e*e);g.zoomBy(-(n-l)/f);if(a.preventDefault)a.preventDefault();else return!1};this.handleTouchMove=function(a){return 1===b.length?this.handleOneActiveMove(a):2===b.length?this.handleTwoActiveMove(a):!0};this.handleMouseDown=function(a){c=!0;e=a.clientX;l=a.clientY};this.handleMouseUp=function(a){c=!1};this.handleMouseMove=
function(a){if(c){var f=a.clientX,b=a.clientY,p=f-e,n=b-l;a=g.getModelViewMatrix();h.rotateBy(a,n/30,p/30);g.setModelViewMatrix(a);g.requestRender();e=f;l=b}};this.handleMouseWheel=function(f){f=window.event||f;g.zoomBy(f.wheelDeltaY/a);if(f.preventDefault)f.preventDefault();else return!1}}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};
(function(m){m.GLUtility=function(g){var h,a;this.getGLContext=function(){!a&&(a=h.getContext("webgl",{antialias:!0})||h.getContext("experimental-webgl",{antialias:!0}))&&(a.enable(a.DEPTH_TEST),a.depthFunc(a.LESS));return a};this.clearColor=function(f,b,c,e){a.clearColor(f,b,c,e)};this.clear=function(){a.clear(a.COLOR_BUFFER_BIT)};this.compileShader=function(f,b){var c=a.createShader(b);a.shaderSource(c,f);a.compileShader(c);if(!a.getShaderParameter(c,a.COMPILE_STATUS))throw"Shader compile failed with:"+
a.getShaderInfoLog(c);return c};this.createProgram=function(f,b){var c,e,l;e=a.createProgram();l=this.compileShader(f,a.VERTEX_SHADER);c=this.compileShader(b,a.FRAGMENT_SHADER);a.attachShader(e,l);a.attachShader(e,c);a.linkProgram(e);return e};this.loadData=function(f,b){a.bindBuffer(a.ARRAY_BUFFER,f);a.bufferData(a.ARRAY_BUFFER,b,a.STATIC_DRAW)};this.createBuffer=function(f){var b=a.createBuffer();this.loadData(b,f);return b};this.createIndexBuffer=function(f){var b=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,
b);a.bufferData(a.ELEMENT_ARRAY_BUFFER,f,a.STATIC_DRAW);return b};this.getAttribLocation=function(f,b){var c;c=a.getAttribLocation(f,b);-1===c&&alert("Can not find uniform"+attribute+".");return c};this.bindBuffer=function(f,b,c,e,l,d){a.bindBuffer(a.ARRAY_BUFFER,f);a.enableVertexAttribArray(b);a.vertexAttribPointer(b,c,e,!1,l,d)};this.loadTexture=function(f,b,c){var e=a.createTexture(),l=new Image;l.onload=function(){this.onTextureLoaded(l,e,b,c)}.bind(this);l.src=f;return e};this.onTextureLoaded=
function(f,b,c,e){a.activeTexture(a.TEXTURE0+c);a.bindTexture(a.TEXTURE_2D,b);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,f);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR_MIPMAP_NEAREST);a.generateMipmap(a.TEXTURE_2D);e()};this.bindTexture=function(f,b,c,e){a.activeTexture(a.TEXTURE0+c);a.bindTexture(a.TEXTURE_2D,b);a.uniform1i(e,c)};this.generateModelViewMatrix=function(a){return new Float32Array([1,0,0,0,0,1,
0,0,0,0,1,0,a,0,0,1])};this.generatePerspectiveMatrix=function(a,b,c,e){return new Float32Array([c/a,0,0,0,0,c/b,0,0,0,0,-(e+c)/(e-c),-1,0,0,-2*e*c/(e-c),0])};this.generateOrthographicMatrix=function(a,b,c,e){return new Float32Array([1/a,0,0,0,0,1/b,0,0,0,0,-2/(e-c),0,0,0,-(e+c)/(e-c),1])};this.getUniformLocation=function(f,b){var c;c=a.getUniformLocation(f,b);-1===c&&alert("Can not find uniform"+b+".");return c};this.loadUniform3f=function(a,b,c,e,l,d){b=a.getUniformLocation(b,c);-1===b?alert("Can not find uniform"+
c+"."):a.uniform3f(b,e,l,d)};this.loadUniform4f=function(f,b,c,e,l,d){f=a.getUniformLocation(f,b);-1===f?alert("Can not find uniform"+b+"."):a.uniform4f(f,c,e,l,d)};this.loadUniformMatrix3fv=function(f,b,c){f=a.getUniformLocation(f,b);-1===f?alert("Can not find uniform"+b+"."):a.uniformMatrix3fv(f,!1,c)};this.loadUniformMatrix4fv=function(f,b,c){f=a.getUniformLocation(f,b);-1===f?alert("Can not find uniform"+b+"."):a.uniformMatrix4fv(f,!1,c)};this.getXYRotationMatrix=function(a,b){Math.cos(a);Math.cos(b);
Math.sin(a);Math.sin(b)};this.rotateBy=function(a,b,c){var e,l,d=Math.cos(b),k=Math.cos(c);b=Math.sin(b);var g=Math.sin(c),h=b*g,n=k*b,r=d*g,q=d*k;c=a[0];e=a[1];l=a[2];a[0]=c*k+l*g;a[1]=c*h+e*d-l*n;a[2]=-c*r+e*b+l*q;c=a[4];e=a[5];l=a[6];a[4]=c*k+l*g;a[5]=c*h+e*d-l*n;a[6]=-c*r+e*b+l*q;c=a[8];e=a[9];l=a[10];a[8]=c*k+l*g;a[9]=c*h+e*d-l*n;a[10]=-c*r+e*b+l*q;c=a[12];e=a[13];l=a[14];a[12]=c*k+l*g;a[13]=c*h+e*d-l*n;a[14]=-c*r+e*b+l*q};this.extractRotationPart=function(a,b){b.set(a.subarray(0,3));b.set(a.subarray(4,
7),3);b.set(a.subarray(8,11),6);return b};h=g;a=this.getGLContext()}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};(function(m){m.Color=function(g,h,a,f){var b,c,e,l;this.setRed=function(a){b=a;return this};this.getRed=function(){return b};this.setGreen=function(a){c=a;return this};this.getGreen=function(){return c};this.setBlue=function(a){e=a;return this};this.getBlue=function(){return e};this.setAlpha=function(a){l=a;return this};this.getAlpha=function(){return l};this.setRed(g).setGreen(h).setBlue(a).setAlpha(f)}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.geometry=window.vizit.geometry||{};
(function(m){m.Surface=function(g,h){var a,f,b,c,e;f=h;c=g;e=new Float32Array(3*g);a=new Uint16Array(h);b=new Float32Array(3*g);this.setNindices=function(a){f=a};this.getNindices=function(){return f};this.setNvertices=function(a){c=a};this.getNvertices=function(){return c};this.setVerticies=function(a){e=a};this.getVertices=function(){return e};this.setIndices=function(a){};this.getIndices=function(){return a};this.setNormals=function(a){};this.getNormals=function(){return b}};m.Shapes={SPHERE:{value:"sphere"},
SQUARE:{value:"square"},CYLINDER:{value:"cylinder"}};m.VertexRegistry=function(){var g;g={};this.registerVertices=function(h,a){if(g.hasOwnProperty(h))throw"Vertex buffers already registered for "+h+".";g[h]=a};this.hasVertices=function(h){return g.hasOwnProperty(h)};this.retrieveVertices=function(h){return g[h]}};m.vertexRegistry=new m.VertexRegistry;m.Square=function(){var g,h,a;a=m.Shapes.SQUARE;g=[-0.5,0.5,0,0.5,0.5,0,0.5,-0.5,0,-0.5,-0.5,0];h=[0,0,1];this.getNindices=function(){return 6};this.computeGeometry=
function(a,b){var c,e,l;l=a.getVertices();e=a.getNormals();c=a.getIndices();for(var d=0;12>d;d++)l[d]=b[d],e[d]=h[d%3];c[0]=0;c[1]=3;c[2]=1;c[3]=3;c[4]=2;c[5]=1;a.setNvertices(12);a.setNindices(6)};this.getVertexBuffers=function(f){var b,c;this.hasVertices(a.value)?c=this.retrieveVertices(a.value):(b=new m.Surface(4,6),c={},this.computeGeometry(b,g),c.vertices=f.createBuffer(b.getVertices()),c.normals=f.createBuffer(b.getNormals()),c.indices=f.createIndexBuffer(b.getIndices()),this.registerVertices(a.value,
c));return c}};m.Square.prototype=m.vertexRegistry;m.Cylinder=function(){var g;g=m.Shapes.CYLINDER;this.getBaseHeight=function(){return 1};this.getBaseRadius=function(){return 1};this.getShape=function(){return g};this.getNindices=function(){return 126};this.computeGeometry=function(g){var a,f,b,c,e,l,d;d=g.getVertices();c=g.getNormals();b=g.getIndices();d[0]=0;c[0]=0;d[1]=0;c[1]=0;d[2]=0.5;c[2]=1;b[0]=0;a=94;b[a]=a;a*=3;d[a]=0;c[a++]=0;d[a]=0;c[a++]=0;d[a]=-0.5;c[a]=-1;for(f=1;31>=f;f++)a=2*(f-1)*
Math.PI/30,b[f]=f,l=3*f,d[l]=1*Math.cos(a),c[l++]=0,d[l]=1*Math.sin(a),c[l++]=0,d[l]=0.5,c[l]=1;for(f=1;31>=f;f++)l=3*f,a=f+90+4,b[a]=a,a*=3,d[a]=d[l++],c[a++]=0,d[a]=d[l],c[a++]=0,d[a]=-0.5,c[a]=-1;l=3;a=285;e=96;for(f=0;30>=f;f++)b[e/3]=e/3,d[e]=d[l],c[e++]=d[l++]/1,d[e]=d[l],c[e++]=d[l++]/1,d[e]=d[l],c[e++]=d[l++]/1,b[e/3]=e/3,d[e]=d[a],c[e++]=d[a++]/1,d[e]=d[a],c[e++]=d[a++]/1,d[e]=d[a],c[e++]=d[a++]/1;g.setNvertices(378);g.setNindices(126)};this.getVertexBuffers=function(h){var a,f;this.hasVertices(g.value)?
f=this.retrieveVertices(g.value):(a=new m.Surface(126,126),f={},this.computeGeometry(a),f.vertices=h.createBuffer(a.getVertices()),f.normals=h.createBuffer(a.getNormals()),f.indices=h.createIndexBuffer(a.getIndices()),this.registerVertices(g.value,f));return f}};m.Cylinder.prototype=m.vertexRegistry;m.Sphere=function(){var g;g=m.Shapes.SPHERE;this.getIntrinsicRadius=function(){return 30};this.getShape=function(){return g};this.getNindices=function(){return 5400};this.computeGeometry=function(g,a,
f,b){var c,e,l,d,k,s,p,n,r,q,x;q=g.getVertices();p=s=0;l=g.getNormals();for(d=0;d<=f;d++)for(k=d*Math.PI/f,r=Math.sin(k),e=Math.cos(k),k=0;k<=b;k++)c=2*k*Math.PI/b,n=Math.sin(c),c=Math.cos(c),n*=r,x=e,c*=r,l[p]=n,q[p++]=a*n,l[p]=x,q[p++]=a*x,l[p]=c,q[p++]=a*c;g.setNvertices(--p);l=g.getIndices();for(d=0;d<f;d++)for(k=0;k<b;k++)a=d*(b+1)+k,p=a+b+1,l[s++]=a,l[s++]=p,l[s++]=a+1,l[s++]=p,l[s++]=p+1,l[s++]=a+1;g.setNindices(--s)};this.getVertexBuffers=function(h){var a,f;this.hasVertices(g.value)?f=this.retrieveVertices(g.value):
(a=new m.Surface(961,5400),f={},this.computeGeometry(a,30,30,30),f.vertices=h.createBuffer(a.getVertices()),f.normals=h.createBuffer(a.getNormals()),f.indices=h.createIndexBuffer(a.getIndices()),this.registerVertices(g.value,f));return f}};m.Sphere.prototype=m.vertexRegistry})(window.vizit.geometry);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.SurfaceRenderer=function(g){var h,a,f,b,c,e,l,d,k,s,p,n,r;this.createProgram=function(b){b=e.createProgram("attribute vec3 normal;attribute vec3 position;uniform   vec3 ambientLighting;uniform   vec3 directionalLighting;uniform   vec3 directionalColor;uniform   mat4 modelViewMatrix;uniform   mat4 globalModelViewMatrix;uniform   mat3 normalMatrix;uniform   mat4 projectionMatrix;varying   vec3 lighting;void main(void){  gl_Position = projectionMatrix * globalModelViewMatrix * modelViewMatrix * vec4(position, 1.0);  vec3  transformedNormal         = normalMatrix * normal;  float directionalLightWeighting = max(dot(transformedNormal, directionalLighting), 0.0);  lighting                        = ambientLighting + directionalColor * directionalLightWeighting;}","precision mediump float;uniform vec4 surfaceColor;varying vec3 lighting;void main(void){  gl_FragColor = vec4(surfaceColor.rgb * lighting, surfaceColor.a);}");
h=e.getUniformLocation(b,"ambientLighting");a=e.getUniformLocation(b,"directionalLighting");f=e.getUniformLocation(b,"directionalColor");l=e.getUniformLocation(b,"modelViewMatrix");c=e.getUniformLocation(b,"globalModelViewMatrix");d=e.getAttribLocation(b,"normal");k=e.getUniformLocation(b,"normalMatrix");s=e.getAttribLocation(b,"position");n=e.getUniformLocation(b,"projectionMatrix");r=e.getUniformLocation(b,"surfaceColor");return b};this.getAmbientLightingHandle=function(){return h};this.getDirectionalLightingHandle=
function(){return a};this.getDirectionalColorHandle=function(){return f};this.getModelViewMatrixHandle=function(){return l};this.getGlobalModelViewMatrixHandle=function(){return c};this.getNormalHandle=function(){return d};this.getNormalMatrixHandle=function(){return k};this.getPositionHandle=function(){return s};this.getProjectionMatrixHandle=function(){return n};this.getSurfaceColorHandle=function(){return r};this.render=function(d,l,g,s){var r;r=s.length;if(0<r)for(b.useProgram(p),b.uniformMatrix4fv(c,
!1,l),b.uniformMatrix3fv(k,!1,g),b.uniformMatrix4fv(n,!1,d),b.uniform3f(h,0.3,0.3,0.3),b.uniform3f(a,1,1,1),b.uniform3f(f,0.4,0.4,0.4),d=0;d<r;d++)s[d].render(e,this)};e=g;b=e.getGLContext();p=this.createProgram()}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};
(function(m){m.IndexedVertices=function(g,h){var a,f,b,c;this.setNindices=function(a){f=a};this.getNindices=function(){return f};this.setNvertices=function(a){b=a};this.getNvertices=function(){return b};this.setVerticies=function(a){c=a};this.getVertices=function(){return c};this.setVerticies=function(a){c=a};this.getVertices=function(){return c};this.pushVertex=function(a){c[b++]=a};this.setIndices=function(a){};this.getIndices=function(){return a};this.pushIndex=function(b){a[f++]=b};b=f=0;c=new Float32Array(3*
g);a=new Uint16Array(h)}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};(function(m){m.VectorFunction=function(g,h){var a,f;this.setModified=function(b){a=b};this.isModified=function(){return a};this.setName=function(a){f=a};this.getName=function(){return f};this.shouldStop=function(a,c,f,l){return 0>a*Q&&4>r2};this.getField=new Function(g,h)}})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};
(function(m){m.CombinedVectorFunctions=function(){var g,h;this.addFunction=function(a){h=g.push(a);return this};for(var a=0;a<arguments.length;a++)this.addFunction(arguments[a]);this.getNfunctions=function(){return h};this.getFunctions=function(){return g};this.isModified=function(){var f;f=!1;for(a=0;a<h&&!f;a++)f=f||g[a].isModified();return f};this.setModified=function(f){for(a=0;a<h;a++)g[a].setModified(f)};this.getStartPoints=function(){var a,b=0,c=1.57079632679/(ncharges+1),e,l=[];for(a=0;a<
h;a++)e=g[a],l=l.concat(e.getStartPoints(b,6)),b+=c;return l};this.getField=function(a,b,c){for(var e,l=[0,0,0],d=0;d<h;d++)e=g[d].getField(a,b,c),l[0]+=e[0],l[1]+=e[1],l[2]+=e[2];return l};this.shouldStop=function(a,b,c,e){var l;l=!1;for(var d=0;d<ncharges&!l;d++)l=g[d].shouldStop(a,b,c,e);return l};h=0;g=[]}})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};
(function(m){m.LineRenderer=function(g){var h,a,f,b,c,e,l;this.createProgram=function(){var a;a=f.createProgram("attribute vec3 position;uniform   mat4 modelViewMatrix;uniform   mat4 projectionMatrix;void main(){    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1);}","precision mediump float;uniform   vec4 color;void main(){    gl_FragColor = color;}");h=f.getUniformLocation(a,"color");b=f.getAttribLocation(a,"position");e=f.getUniformLocation(a,"modelViewMatrix");l=f.getUniformLocation(a,
"projectionMatrix");return a};this.drawIndexedLines=function(d,k,g,p){a.useProgram(c);a.lineWidth(1);a.uniform4fv(h,g);a.uniformMatrix4fv(e,!1,k);a.uniformMatrix4fv(l,!1,d);k=p.length;for(g=0;g<k;g++)d=p[g],f.bindBuffer(d.vertices,b,3,a.FLOAT,12,0),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,d.indices),a.drawElements(a.LINES,d.nindices,a.UNSIGNED_SHORT,0)};f=g;a=f.getGLContext();c=this.createProgram()}})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};
(function(m){m.SimpleVectorField=function(g,h){var a,f,b,c,e,l,d,k,s,p,n,r,q,x;this.setArrowHeadWidth=function(a){f=a;return this};this.getArrowHeadWidth=function(){return f};this.setArrowHeadSize=function(b){a=b;return this};this.getArrowHeadSize=function(){return a};this.setColor=function(a){b=a;return this};this.getColor=function(){return b};this.setGlUtility=function(a){d=a;return this};this.getGlUtility=function(){return d};this.setMaxVectors=function(a){s=a;return this};this.getMaxVectors=function(){return s};
this.setModelViewMatrix=function(a){p=a;return this};this.getModelViewMatrix=function(){return p};this.setProjectionMatrix=function(a){r=a;return this};this.addStartPoints=function(a){c=c.concat(a);return this};this.getStartPoints=function(){return c};this.setupVectorField=function(){var a,b;a="function"===typeof e.getStartPoints?c.concat(e.getStartPoints(0,2)):c;l.setStartPoints(a);a={};b=l.generateField();a.vertices=d.createBuffer(b.getVertices());a.indices=d.createIndexBuffer(b.getIndices());a.nindices=
b.getNindices();k[0]=a;return k};this.render=function(){x&&(e.isModified()&&(k=this.setupVectorField()),d.clear(),n.drawIndexedLines(r,p,b,k),e.setModified(!1))};this.start=function(){n=new vizit.vectorfield.LineRenderer(d);l=new vizit.vectorfield.VectorFieldGenerator(e,s,a,f,q);x=!0;this.render()};f=0.5;a=0.3;e=g;k=[];b=new Float32Array([0.8,0.3,0.3,1]);s=5;q="undefined"===typeof h?1:h;c=[];x=!1}})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};(function(m){m.CountdownLatch=function(g,h){var a=g;this.countDown=function(){a--;0>=a&&h()}}})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.ChargeGenerator=function(g){var h,a,f,b,c,e,l,d;this.setCharges=function(b){a=b;h*a.getCharges().length>f.byteLength&&(f=new ArrayBuffer(h*a.getCharges().length))};this.getCharges=function(){return a};this.getChargesArray=function(){return f};this.getNcharges=function(){return b};this.generate=function(){var k,g,h,n,r,q;q=a.getCharges();b=q.length;r=new Float32Array(f);g=new Uint8Array(f);for(var x=0;x<b;x++)k=q[x],n=k.getPosition(),h=0+5*x,r[h++]=n[0],r[h++]=n[1],r[h++]=n[2],r[h++]=
l,h=16+20*x,k=0<k.getCharge()?d:0>k.getCharge()?c:e,g[h++]=k[0],g[h++]=k[1],g[h++]=k[2],g[h++]=k[3];return f};a=g;h=3*Float32Array.BYTES_PER_ELEMENT+Float32Array.BYTES_PER_ELEMENT+4*Uint8Array.BYTES_PER_ELEMENT;f=new ArrayBuffer(h*a.getCharges().length);l=16;c=[204,13,13,255];d=[13,13,204,255];e=[13,13,13,51]}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.ChargeRenderer=function(g){var h,a,f,b,c,e,l,d;this.createProgram=function(){var e;e=f.createProgram("precision highp float;attribute vec3  position;attribute vec4  color;attribute float size;uniform   mat4  modelViewMatrix;uniform   mat4  projectionMatrix;varying vec4 vColor;void main(){    gl_Position  = projectionMatrix * modelViewMatrix * vec4(position, 1);    gl_PointSize = size;    vColor       = color;}","precision lowp float;varying vec4 vColor; void main() {   float dist = distance( vec2(0.5,0.5), gl_PointCoord );   if ( dist > 0.5 )     discard;   gl_FragColor = vColor; }");
h=f.getAttribLocation(e,"color");b=f.getUniformLocation(e,"modelViewMatrix");c=f.getAttribLocation(e,"position");l=f.getUniformLocation(e,"projectionMatrix");d=f.getAttribLocation(e,"size");a.enableVertexAttribArray(h);a.enableVertexAttribArray(c);a.enableVertexAttribArray(d);return e};this.render=function(f,g,p,n){a.useProgram(e);a.uniformMatrix4fv(b,!1,g);a.uniformMatrix4fv(l,!1,f);a.bindBuffer(a.ARRAY_BUFFER,p);a.vertexAttribPointer(c,3,a.FLOAT,!1,20,0);a.vertexAttribPointer(d,1,a.FLOAT,!1,20,
12);a.vertexAttribPointer(h,4,a.UNSIGNED_BYTE,!0,20,16);a.drawArrays(a.POINTS,0,n.getNcharges())};f=g;a=f.getGLContext();e=this.createProgram()}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.FieldLineVBO=function(g,h){this.disable=function(){this.enabled=!1};this.isEnabled=function(){return this.enabled};this.reload=function(a,f){a.loadData(this.fieldLineBufferHandle,f.getPoints());this.npoints=f.getNpoints();a.loadData(this.fieldDirectionBufferHandle,f.getArrows());this.narrows=f.getNarrows();this.enabled=!0};this.fieldLineBufferHandle=g.createBuffer(h.getPoints());this.npoints=h.getNpoints();this.fieldDirectionBufferHandle=g.createBuffer(h.getArrows());this.narrows=h.getNarrows();
this.enabled=!0}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.FieldLine=function(g){var h,a,f,b,c,e;this.setMaxPoints=function(b){b!==g&&(g=b,c=new Float32Array(3*g),a=new Float32Array(g));return this};this.getMaxPoints=function(){return g};this.pushPoint=function(a,d,f){c[e++]=a;c[e++]=d;c[e++]=f;b++};this.getPoints=function(){return c};this.getNpoints=function(){return b};this.pushArrow=function(b,c,e,g,p,n,r,q,x){a[h++]=b;a[h++]=c;a[h++]=e;a[h++]=g;a[h++]=p;a[h++]=n;a[h++]=g;a[h++]=p;a[h++]=n;a[h++]=r;a[h++]=q;a[h++]=x;f++};this.getArrows=
function(){return a};this.getNarrows=function(){return f};this.reset=function(){e=b=f=h=0};c=new Float32Array(3*g);a=new Float32Array(g);this.reset()}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.FieldLineGenerator=function(g,h,a,f,b){var c,e,l,d,k,s;this.setCharges=function(a){d=a;return this};this.getCharges=function(){return d};this.getArrows=function(){return arrows};this.setMaxPoints=function(a){a>maxpoints&&(k=new vizit.electricfield.FieldLine(s));s=a;return this};this.getMaxPoints=function(){return s};this.setArrowHeadSize=function(a){c=a;return this};this.getArrowHeadSize=function(){return c};this.setArrowSpacing=function(a){e=a;return this};this.getArrowSpacing=function(){return e};
this.setDs=function(a){l=a;return this};this.getDs=function(){return l};this.drawArrow=function(a,b,c,d,e,f,l){var k,g,h,s,C;k=d[0]/e;g=d[1]/e;h=d[2]/e;0!==h?(s=e=1,d=-(d[0]+d[1])/d[2]):(0!==g?(e=1,s=-(d[0]+d[2])/d[1]):(e=-(d[1]+d[2])/d[0],s=1),d=1);C=f/Math.sqrt(e*e+s*s+d*d);e*=C;s*=C;d*=C;k*=f;g*=f;f*=h;l.pushArrow(a-k+e,b-g+s,c-f+d,a,b,c,a-k-e,b-g-s,c-f-d)};this.generate=function(a,b,f,g){var h,t,m,v;h=0;t=!1;v=f;k.reset();for(f=0;f<s&&!t;f++){k.pushPoint(a,b,v);m=d.getField(a,b,v);t=Math.sqrt(m[0]*
m[0]+m[1]*m[1]+m[2]*m[2]);if(0===t)break;a+=g*m[0]/t*l;b+=g*m[1]/t*l;v+=g*m[2]/t*l;h+=l;h>e&&(h=0,this.drawArrow(a,b,v,m,t,c,k));t=d.shouldStop(g,a,b,v)}return k};c=f;e=b;d=g;l=a;s=h;k=new vizit.electricfield.FieldLine(s)}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.FieldLineRenderer=function(g){var h,a,f,b,c,e;this.createProgram=function(c){c=a.createProgram("attribute vec3 position;uniform   mat4 modelViewMatrix;uniform   mat4 projectionMatrix;void main(){  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}","precision mediump float;void main(){  gl_FragColor = vec4(0.8,0.3,0.3,1.0);}");f=a.getUniformLocation(c,"modelViewMatrix");b=a.getAttribLocation(c,"position");e=a.getUniformLocation(c,"projectionMatrix");return c};
this.render=function(l,d,k,g){k=g.length;if(0<k)for(h.useProgram(c),h.lineWidth(1),h.uniformMatrix4fv(f,!1,d),h.uniformMatrix4fv(e,!1,l),d=0;d<k;d++){l=g[d];if(!l.isEnabled())break;a.bindBuffer(l.fieldLineBufferHandle,b,3,h.FLOAT,12,0);h.drawArrays(h.LINE_STRIP,0,l.npoints);a.bindBuffer(l.fieldDirectionBufferHandle,b,3,h.FLOAT,12,0);h.drawArrays(h.LINES,0,l.narrows)}};a=g;h=a.getGLContext();c=this.createProgram()}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.utility=window.vizit.utility||{};
(function(m){m.Cylinder=function(){var g,h;this.setColor=function(a){h=a};this.getColor=function(){return h};this.getCylinderModelView=function(a,f,b,c,e,g,d){var k,h,p;p=Math.sin(d);d=Math.cos(d);h=Math.sin(g);g=Math.cos(g);k=new Float32Array(16);k[0]=e*g*d;k[1]=e*d*h;k[2]=-e*p;k[3]=0;k[4]=-e*h;k[5]=e*g;k[6]=0;k[7]=0;k[8]=c*g*p;k[9]=c*h*p;k[10]=c*d;k[11]=0;k[12]=a;k[13]=f;k[14]=b;k[15]=1;return k};this.transformPoints=function(a,f,b,c){var e,l,d;g[0]=a[0]*b;g[1]=a[1]*b;g[2]=a[2]*b;g[3]=a[3];g[4]=
a[4]*b;g[5]=a[5]*b;g[6]=a[6]*b;g[7]=a[7];g[8]=a[8]*f;g[9]=a[9]*f;g[10]=a[10]*f;g[11]=a[11];g[12]=a[12];g[13]=a[13];g[14]=a[14];g[15]=a[15];f=0;for(a=c.length;f<a;f++)b=c[f],e=b[0],l=b[1],d=b[2],b[0]=g[0]*e+g[4]*l+g[8]*d+g[12],b[1]=g[1]*e+g[5]*l+g[9]*d+g[13],b[2]=g[2]*e+g[6]*l+g[10]*d+g[14];return c};this.setupBuffers=function(a,f,b,c,e){var g;g=a.getGLContext();a.bindBuffer(b,f.getPositionHandle(),3,g.FLOAT,0,0);a.bindBuffer(c,f.getNormalHandle(),3,g.FLOAT,0,0);g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,
e)};this.drawCap=function(a,f,b){a.drawElements(a.TRIANGLE_FAN,f,a.UNSIGNED_SHORT,2*b)};this.drawSide=function(a,f,b){a.drawElements(a.TRIANGLE_STRIP,f,a.UNSIGNED_SHORT,2*b)};this.drawCylinder=function(a,f,b,c,e){a=a.getGLContext();a.uniformMatrix4fv(f.getModelViewMatrixHandle(),!1,b);e&&this.drawCap(a,c+2,0);this.drawSide(a,2*c+2,c+2);e&&this.drawCap(a,c+2,3*c+4)};this.fullRender=function(a,f,b,c,e,l,d){var k,s,p,n;k=a.getGLContext();p=this.getBaseRadius();n=this.getVertexBuffers(a);k.uniform4f(f.getSurfaceColorHandle(),
h.getRed(),h.getGreen(),h.getBlue(),h.getAlpha());s=(this.getNindices()-6)/4;this.setupBuffers(a,f,n.vertices,n.normals,n.indices);g[3]=b[3];g[7]=b[7];g[8]=b[8]*c;g[9]=b[9]*c;g[10]=b[10]*c;g[11]=b[11];g[12]=b[12];g[13]=b[13];g[14]=b[14];g[15]=b[15];k.cullFace(k.FRONT);for(c=l;c>=e;c--)n=c/p,g[0]=b[0]*n,g[1]=b[1]*n,g[2]=b[2]*n,g[4]=b[4]*n,g[5]=b[5]*n,g[6]=b[6]*n,this.drawCylinder(a,f,g,s,d);k.cullFace(k.BACK);for(c=e;c<=l;c++)n=c/p,g[0]=b[0]*n,g[1]=b[1]*n,g[2]=b[2]*n,g[4]=b[4]*n,g[5]=b[5]*n,g[6]=b[6]*
n,this.drawCylinder(a,f,g,s,d)};this.translateBounds=function(a,f,b,c,e,g,d){var k,h,p;k=(f+e)/2;h=(b+g)/2;p=(c+d)/2;f-=k;b-=h;c-=p;e-=k;g-=h;d-=p;a.setTx(k).setTy(h).setTz(p).setX0(f).setY0(b).setZ0(c).setX1(e).setY1(g).setZ1(d)};this.sign=function(a){return 0>a?-1:1};this.zAxisRotation=function(a,f,b,c,e){var g;g=Math.atan2(e-b,c-f);f=-this.sign(c)*Math.sqrt(f*f+b*b);b=0;c=-f;e=0;a.setX0(f).setY0(b).setX1(c).setY1(e).setPhi(g)};this.yAxisRotation=function(a,f,b,c,e,g,d){b=Math.sqrt(f*f+b*b+c*c);
g=Math.acos(d/b);c=this.sign(d);d=c*b;e=f=0;a.setZ0(-c*b).setZ1(d).setX0(f).setX1(e).setTheta(g)};this.scale=function(a,f,b){var c;c=this.sign(b);f=b-f;a.setZ0(0.5*-c).setZ1(0.5*c).setHeight(f)};g=new Float32Array(16)};m.Cylinder.prototype=new vizit.geometry.Cylinder})(window.vizit.utility);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.GaussianCylinder=function(g,h,a,f,b,c,e,l){var d,k,s,p,n,r,q,m,t,u;this.setX=function(a){m=a;s[12]=m;return this};this.getX=function(){return m};this.setY=function(a){t=a;s[13]=t;return this};this.getY=function(){return t};this.setZ=function(a){u=a;s[14]=u;return this};this.getZ=function(){return u};this.setOrigin=function(a){this.setX(a[0]);this.setY(a[1]);return this.setZ(a[2])};this.getOrigin=function(){return[m,t,u]};this.setR=function(a){r=a;return this};this.getR=function(){return r};
this.setHeight=function(a){k=a;return this};this.getHeight=function(){return k};this.setTheta=function(a){q=a;return this};this.getTheta=function(){return q};this.setPhi=function(a){n=a;return this};this.getPhi=function(){return n};this.setName=function(a){p=a};this.getName=function(){return p};this.render=function(a,b){this.fullRender(a,b,s,k,r,r,!0)};d=new vizit.utility.Color(0.5,0.5,0.5,0.5);k=f;p=l;n=c;r=b;q=e;m=g;t=h;u=a;this.setColor(d);s=this.getCylinderModelView(m,t,u,this.getBaseHeight(),
this.getBaseRadius(),n,q)};m.GaussianCylinder.prototype=new vizit.utility.Cylinder})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.GaussianSphere=function(g,h,a,f,b){var c,e,l,d,k,s,p;this.setColor=function(a){c=a};this.getColor=function(){return c};this.setX=function(a){k=a;return this};this.getX=function(){return k};this.setY=function(a){s=a;return this};this.getY=function(){return s};this.setZ=function(a){p=a;return this};this.getZ=function(){return p};this.setR=function(a){d=a;return this};this.getR=function(){return d};this.setName=function(a){l=a};this.getName=function(){return l};this.getModelView=function(a){"undefined"===
typeof a&&(a=1);"undefined"===typeof e?(e=new Float32Array(16),e[0]=a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=a,e[11]=0,e[12]=k,e[13]=s,e[14]=p,e[15]=1):(e[0]=a,e[5]=a,e[10]=a);return e};this.drawFullSurface=function(a,b,c,d,e,f){var g;g=a.getGLContext();a.bindBuffer(c,b.getPositionHandle(),3,g.FLOAT,0,0);a.bindBuffer(d,b.getNormalHandle(),3,g.FLOAT,0,0);g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,e);g.drawElements(g.TRIANGLES,f,g.UNSIGNED_SHORT,0)};this.render=function(a,b){var e,
f,g;e=a.getGLContext();f=this.getIntrinsicRadius();g=this.getVertexBuffers(a);e.uniformMatrix4fv(b.getModelViewMatrixHandle(),!1,this.getModelView(d/f));e.uniform4f(b.getSurfaceColorHandle(),c.getRed(),c.getGreen(),c.getBlue(),c.getAlpha());e.cullFace(e.FRONT);this.drawFullSurface(a,b,g.vertices,g.normals,g.indices,this.getNindices());e.cullFace(e.BACK);this.drawFullSurface(a,b,g.vertices,g.normals,g.indices,this.getNindices())};c=new vizit.utility.Color(0.5,0.5,0.5,0.5);l=b;d=f;k=g;s=h;p=a};m.GaussianSphere.prototype=
new vizit.geometry.Sphere})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.ChargedCylinder=function(g,h,a,f,b,c,e,l,d,k,s,p){var n,r,q,m,t,u,v,y,D,z,C,I,G,K,H,B,F,w,A,E,L,J,M,N;this.setHeight=function(a){n=a;q=!0};this.getHeight=function(){return n};this.setTx=function(a){I=a;q=!0;return this};this.getTx=function(){return I};this.setTy=function(a){G=a;q=!0;return this};this.getTy=function(){return G};this.setTz=function(a){K=a;q=!0;return this};this.getTz=function(){return K};this.setX0=function(a){H=a;q=!0;return this};this.getX0=function(){return H};this.setY0=
function(a){B=a;q=!0;return this};this.getY0=function(){return B};this.setZ0=function(a){F=a;q=!0;return this};this.getZ0=function(){return F};this.setX1=function(a){w=a;q=!0;return this};this.getX1=function(){return w};this.setY1=function(a){A=a;q=!0;return this};this.getY1=function(){return A};this.setZ1=function(a){E=a;q=!0;return this};this.getZ1=function(){return E};this.setR0=function(a){z=a;q=!0;return this};this.getR0=function(){return z};this.setR1=function(a){C=a;q=!0;return this};this.getR1=
function(){return C};this.setPhi=function(a){u=a;q=!0;return this};this.getPhi=function(){return u};this.setTheta=function(a){v=a;q=!0;return this};this.getTheta=function(){return v};this.setNfieldLines=function(a){t=a;q=!0;return this};this.getNfieldLines=function(){return t};this.setModified=function(a){q=a;return this};this.isModified=function(){return q};this.setName=function(a){m=a;return this};this.getName=function(){return m};this.getStartPoints=function(){var a,b,c,d,e,f,g;g=[];if(0!==D+t){f=
this.sign(y);b=Math.max(2,Math.round(Math.abs(y*Math.PI*(C*C-z*z)*D*n)))+t;c=(z+1)/C;d=0.707106781*(z+1)/C;e=-0.5;a=1/(b-1);for(var k=0;k<b;k++)g.push([c,0,e,f]),g.push([-c,0,e,f]),g.push([0,c,e,f]),g.push([0,-c,e,f]),g.push([d,d,e,f]),g.push([d,-d,e,f]),g.push([-d,-d,e,f]),g.push([-d,d,e,f]),e+=a}return this.transformPoints(r,n/this.getBaseHeight(),C/this.getBaseRadius(),g)};this.getNormal=function(a,b,c){var d,e,f,g;d={};e=-((H-a)*L+(B-b)*J+(F-c)*M)/(N*N);f=H+e*L;g=B+e*J;e=F+e*M;d.x=a-f;d.y=b-g;
d.z=c-e;return d};this.getField=function(a,b,c){var d;d=Array(3);b=this.getNormal(a,b,c);c=Math.sqrt(b.x*b.x+b.y*b.y+b.z*b.z);a=2*(c<z?0:c<C?Math.PI*(c*c-z*z)*y:Math.PI*(C*C-z*z)*y)/c;d[0]=a*b.x/c;d[1]=a*b.y/c;d[2]=a*b.z/c;return d};this.render=function(a,b){this.fullRender(a,b,r,n/this.getBaseHeight(),z/this.getBaseRadius(),C/this.getBaseRadius(),!1)};q=!0;m=p;y="undefined"===typeof d?0:d;D="undefined"===typeof k?0:k;t="undefined"===typeof s?0:s;z=e;C=l;H=g;B=h;F=a;w=f;A=b;E=c;e=0<y?new vizit.utility.Color(0.05,
0.05,0.8,0.3):0>y?new vizit.utility.Color(0.8,0.05,0.05,0.3):new vizit.utility.Color(0.5,0.5,0.5,0.2);this.setColor(e);this.translateBounds(this,H,B,F,w,A,E);this.zAxisRotation(this,H,B,w,A);this.yAxisRotation(this,H,B,F,w,A,E);this.scale(this,F,E);H=g;B=h;F=a;w=f;A=b;E=c;r=this.getCylinderModelView(I,G,K,this.getBaseHeight(),this.getBaseRadius(),u,v);L=w-H;J=A-B;M=E-F;N=Math.sqrt(L*L+J*J+M*M)};m.ChargedCylinder.prototype=new vizit.utility.Cylinder})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.ChargedLine=function(g,h,a,f,b,c,e,l,d,k){var s,p,n,r,q,m,t,u,v,y,D,z,C,I,G,K,H,B,F,w,A,E,L,J;this.setHeight=function(a){n=a;q=!0};this.getHeight=function(){return n};this.setTx=function(a){z=a;q=!0;return this};this.getTx=function(){return z};this.setTy=function(a){C=a;return this};this.getTy=function(){return C};this.setTz=function(a){I=a;q=!0;return this};this.getTz=function(){return I};this.setX0=function(a){G=a;q=!0;return this};this.getX0=function(){return G};this.setY0=function(a){K=
a;q=!0;return this};this.getY0=function(){return K};this.setZ0=function(a){H=a;q=!0;return this};this.getZ0=function(){return H};this.setX1=function(a){B=a;q=!0;return this};this.getX1=function(){return B};this.setY1=function(a){F=a;q=!0;return this};this.getY1=function(){return F};this.setZ1=function(a){w=a;q=!0;return this};this.getZ1=function(){return w};this.setR0=function(a){y=a;q=!0;return this};this.getR0=function(){return y};this.setR1=function(a){D=a;q=!0;return this};this.getR1=function(){return D};
this.setPhi=function(a){u=a;q=!0;return this};this.getPhi=function(){return u};this.setTheta=function(a){v=a;q=!0;return this};this.getTheta=function(){return v};this.setNfieldLines=function(a){t=a;q=!0;return this};this.getNfieldLines=function(){return t};this.setModified=function(a){q=a;return this};this.isModified=function(){return q};this.setName=function(a){m=a;return this};this.getName=function(){return m};this.getStartPoints=function(){var a,b,c,d,e;e=[];if(0!==p+t){d=this.sign(s);b=Math.max(2,
Math.round(Math.abs(s*p*n)))+t;c=-0.5;a=1/(b-1);for(var f=0;f<b;f++)e.push([1,0,c,d]),e.push([-1,0,c,d]),e.push([0,1,c,d]),e.push([0,-1,c,d]),e.push([0.707106781,0.707106781,c,d]),e.push([0.707106781,-0.707106781,c,d]),e.push([-0.707106781,-0.707106781,c,d]),e.push([-0.707106781,0.707106781,c,d]),c+=a}return this.transformPoints(r,n/this.getBaseHeight(),(y+1)/this.getBaseRadius(),e)};this.getNormal=function(a,b,c){var d,e,f,g;d={};e=-((G-a)*A+(K-b)*E+(H-c)*L)/(J*J);f=G+e*A;g=K+e*E;e=H+e*L;d.x=a-f;
d.y=b-g;d.z=c-e;return d};this.getField=function(a,b,c){var d;c=this.getNormal(a,b,c);d=Math.sqrt(c.x*c.x+c.y*c.y+c.z*c.z);a=Array(3);b=2*s/d;a[0]=b*c.x/d;a[1]=b*c.y/d;a[2]=b*c.z/d;return a};this.render=function(a,b){this.fullRender(a,b,r,n,y,D,!1)};s="undefined"===typeof e?0:e;e=0<s?new vizit.utility.Color(0.05,0.05,0.8,0.8):0>s?new vizit.utility.Color(0.8,0.05,0.05,0.8):new vizit.utility.Color(0.5,0.5,0.5,0.8);this.setColor(e);q=!0;m=k;p="undefined"===typeof l?0:l;t="undefined"===typeof d?0:d;y=
0;D=3;G=g;K=h;H=a;B=f;F=b;w=c;this.translateBounds(this,G,K,H,B,F,w);this.zAxisRotation(this,G,K,B,F);this.yAxisRotation(this,G,K,H,B,F,w);this.scale(this,H,w);G=g;K=h;H=a;B=f;F=b;w=c;r=this.getCylinderModelView(z,C,I,this.getBaseHeight(),this.getBaseRadius(),u,v);A=B-G;E=F-K;L=w-H;J=Math.sqrt(A*A+E*E+L*L)};m.ChargedLine.prototype=new vizit.utility.Cylinder})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.ChargedPlane=function(g,h,a,f,b,c,e,l,d,k,s,p,n,r,q,m){var t,u,v,y,D,z,C,I,G,K,H,B,F,w,A,E,L,J,M,N,O,P,S,R;this.setNfieldLines=function(a){H=a;G=!0;return this};this.getNfieldLines=function(){return H};this.setModified=function(a){G=a;return this};this.isModified=function(){return G};this.setName=function(a){K=a;return this};this.getName=function(){return K};this.calculateNormal=function(a){var b;b=Array(3);b[0]=(a[4]-a[1])*(a[11]-a[2])-(a[5]-a[2])*(a[10]-a[1]);b[1]=(a[5]-a[2])*(a[9]-
a[0])-(a[3]-a[0])*(a[11]-a[2]);b[2]=(a[3]-a[0])*(a[10]-a[1])-(a[4]-a[1])*(a[9]-a[0]);a=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=a;b[1]/=a;b[2]/=a;return b};this.adjustStartPoints=function(a){var b,c,d,e,f;b=a.length;for(var g=0;g<b;g++)c=a[g],d=c[0],e=c[1],f=c[2],c[0]=N+C*(J*d*D+f*w)+E*(-M*e*z+A*(-J*d*w+f*D)),c[1]=O+C*(M*e*z+A*(J*d*w-f*D))+E*(J*d*D+f*w),c[2]=P+M*e*A+z*(-J*d*w+f*D);return a};this.getStartPoints=function(){var a,b,c,d,e,f,g;b=Math.abs(L*F)+H/Math.abs(J*M);e=[];if(0<b)for(a=Math.sqrt(1/
b),b=a/Math.abs(J),a/=Math.abs(M),c=!1,d=0<L?1:-1,f=Math.min(-0.5+b/2,0.5),g=Math.min(-0.5+a/2,0.5);!c;)e.push([f,g,0.4,d]),e.push([f,g,-0.4,d]),g+=a,0.5<g?(g=0.5-(g-0.5),f+=b,a=-a):-0.5>g&&(g=-0.5-(g- -0.5),f+=b,a=-a),c=0.5<f;return this.adjustStartPoints(e)};this.getField=function(a,b,c){var d;d=Array(3);a=(a-y[0])*B[0]+(b-y[1])*B[1]+(c-y[2])*B[2];b=S*L;0===a&&(d[0]=0,d[1]=0,d[2]=0);0<a?(d[0]=b*B[0],d[1]=b*B[1],d[2]=b*B[2]):(d[0]=-b*B[0],d[1]=-b*B[1],d[2]=-b*B[2]);return d};this.translateBoundingBox=
function(b){N=(g+e)/2;O=(h+l)/2;P=(a+d)/2;b[0]-=N;b[1]-=O;b[2]-=P;b[3]-=N;b[4]-=O;b[5]-=P;b[6]-=N;b[7]-=O;b[8]-=P;b[9]-=N;b[10]-=O;b[11]-=P;return b};this.zAxisRotation=function(a){var c,d;c=a[3]-a[0];d=a[0]-a[9];0===c||0===d?(v=0,R=0===c&&0===d?0===a[4]-a[1]?1:2:0===c?1:2):(c=(b-h)/c,d=(l-b)/d,Math.abs(c)<Math.abs(d)?(v=Math.atan(c),R=1):(v=Math.atan(d),R=2));C=Math.cos(v);E=Math.sin(v);for(var e=0;4>e;e++)d=C*a[3*e]-E*a[3*e+1],c=E*a[3*e]+C*a[3*e+1],a[3*e]=d,a[3*e+1]=c;return a};this.xAxisRotation=
function(a,b){var c,d;1===b?(c=a[1]-a[10],d=a[2]-a[11]):(c=a[4]-a[1],d=a[5]-a[2]);A=u=0;z=1;if(0!==d&&0!==c){u=Math.atan(d/c);A=Math.sin(u);z=Math.cos(u);for(var e=0;4>e;e++)c=z*a[3*e+1]-A*a[3*e+2],d=A*a[3*e+1]+z*a[3*e+2],a[3*e+1]=c,a[3*e+2]=d}return a};this.yAxisRotation=function(a,b){var c,d;1===b?(c=a[0]-a[9],d=a[2]-a[11]):(c=a[3]-a[0],d=a[5]-a[2]);w=t=0;D=1;if(0!==d){0!==c?(t=Math.atan(d/c),w=Math.sin(t),D=Math.cos(t)):(t=1.5707963267948966,w=1,D=0);for(var e=0;4>e;e++)c=D*a[3*e]+w*a[3*e+2],d=
-w*a[3*e]+D*a[3*e+2],a[3*e]=c,a[3*e+2]=d}return a};this.scaleBoundingbox=function(a,b){1===b?(J=a[0]-a[9],M=a[4]-a[1]):(J=a[3]-a[0],M=a[1]-a[10]);for(var c=0;4>c;c++)0!==J&&(a[3*c]/=J),0!==M&&(a[3*c+1]/=M);return a};this.getModelView=function(){return I};this.drawFullSurface=function(a,b,c,d,e,f){var g;g=a.getGLContext();a.bindBuffer(c,b.getPositionHandle(),3,g.FLOAT,0,0);a.bindBuffer(d,b.getNormalHandle(),3,g.FLOAT,0,0);g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,e);g.drawElements(g.TRIANGLES,f,g.UNSIGNED_SHORT,
0)};this.render=function(a,b){var c,d,e;c=a.getGLContext();e=this.getVertexBuffers(a);0<L?c.uniform4f(b.getSurfaceColorHandle(),0.05,0.05,0.8,0.4):0>L?c.uniform4f(b.getSurfaceColorHandle(),0.8,0.05,0.05,0.4):c.uniform4f(b.getSurfaceColorHandle(),0.5,0.5,0.5,0.2);d=this.getNindices();c.uniformMatrix4fv(b.getModelViewMatrixHandle(),!1,this.getModelView());c.disable(c.CULL_FACE);this.drawFullSurface(a,b,e.vertices,e.normals,e.indices,d);c.enable(c.CULL_FACE)};G=!0;K=m;S=6.283185307179586;L="undefined"===
typeof n?0:n;F="undefined"===typeof r?0:r;H="undefined"===typeof q?0:q;y=[g,h,a,f,b,c,e,l,d,k,s,p];f=y.slice(0);B=this.calculateNormal(y);f=this.translateBoundingBox(f);f=this.zAxisRotation(f);f=this.xAxisRotation(f,R);f=this.yAxisRotation(f,R);f=this.scaleBoundingbox(f,R);I=new Float32Array(16);D=Math.cos(-t);z=Math.cos(-u);C=Math.cos(-v);w=Math.sin(-t);A=Math.sin(-u);E=Math.sin(-v);I[0]=J*(D*C-w*A*E);I[1]=J*(D*E+C*w*A);I[2]=-J*z*w;I[3]=0;I[4]=-M*z*E;I[5]=M*z*C;I[6]=M*A;I[7]=0;I[8]=A*E*D+w*C;I[9]=
-(A*D*C-w*E);I[10]=D*z;I[11]=0;I[12]=N;I[13]=O;I[14]=P;I[15]=1};m.ChargedPlane.prototype=new vizit.geometry.Square})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.ChargedSphere=function(g,h,a,f,b,c,e,l,d){var k,s,p,n,r,q,m,t,u,v,y;m=!0;t=d;u=0;k=f;s=k*k;p=s*k;n=b;r=n*n*n;v="undefined"===typeof c?0:c;y="undefined"===typeof e?0:e;nfieldLines="undefined"===typeof l?0:l;this.setA=function(a){k=a;s=k*k;p=s*k;m=!0;return this};this.getA=function(){return k};this.setB=function(a){n=a;r=n*n*n;m=!0;return this};this.getB=function(){return n};this.setNindices=function(a){u=a;return this};this.setModified=function(a){m=a;return this};this.isModified=function(){return m};
this.setNfieldLines=function(a){nfieldLines=a;m=!0;return this};this.getNfieldLines=function(){return nfieldLines};this.setName=function(a){t=a;return this};this.getName=function(){return t};this.getStartPoints=function(){var b,c,d,e,f,l,q;l=0<v?1:0>v?-1:0;b=Math.round(y*v*l)+nfieldLines;e=3.6/Math.sqrt(b);c=0;radius=k+0.2*(n-k);f=[];for(var s=1;s<b;s++)q=-1+2*s/b,d=Math.sqrt(1-q*q),c+=e/d,f.push([Math.cos(c)*d*radius+g,q*radius+h,Math.sin(c)*d*radius+a,l]);return f};this.getField=function(b,c,d){var e,
f=[0,0,0],l;b-=g;c-=h;d-=a;e=b*b+c*c+d*d;if(e<=s)return f;l=Math.sqrt(e);e=l>=k&&l<n?v*(l-p/e)/(r-p):v/e;f[0]=e*b/l;f[1]=e*c/l;f[2]=e*d/l;return f};this.getModelView=function(b){"undefined"===typeof b&&(b=1);null===q?(q=new Float32Array(16),q[0]=b,q[1]=0,q[2]=0,q[3]=0,q[4]=0,q[5]=b,q[6]=0,q[7]=0,q[8]=0,q[9]=0,q[10]=b,q[11]=0,q[12]=g,q[13]=h,q[14]=a,q[15]=1):(q[0]=b,q[5]=b,q[10]=b);return q};this.drawFullSurface=function(a,b,c,d,e,f){var g;g=a.getGLContext();a.bindBuffer(c,b.getPositionHandle(),3,
g.FLOAT,0,0);a.bindBuffer(d,b.getNormalHandle(),3,g.FLOAT,0,0);g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,e);g.drawElements(g.TRIANGLES,f,g.UNSIGNED_SHORT,0)};this.render=function(a,b){var c,d,e,f,g;d=a.getGLContext();c=this.getIntrinsicRadius();g=this.getVertexBuffers(a);0<v?d.uniform4f(b.getSurfaceColorHandle(),0.05,0.05,0.8,0.2):0>v?d.uniform4f(b.getSurfaceColorHandle(),0.8,0.05,0.05,0.2):d.uniform4f(b.getSurfaceColorHandle(),0.5,0.5,0.5,0.2);u=this.getNindices();d.cullFace(d.FRONT);for(e=n;e>=k;e--)f=
e/c,d.uniformMatrix4fv(b.getModelViewMatrixHandle(),!1,this.getModelView(f)),this.drawFullSurface(a,b,g.vertices,g.normals,g.indices,u);d.cullFace(d.BACK);for(e=k;e<=n;e++)f=e/c,this.drawFullSurface(a,b,g.vertices,g.normals,g.indices,u),d.uniformMatrix4fv(b.getModelViewMatrixHandle(),!1,this.getModelView(f))}};m.ChargedSphere.prototype=new vizit.geometry.Sphere})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.Charge=function(g,h,a,f,b,c,e){var l,d,k,s,p,n,r;this.setCharge=function(a){l=a;d=!0};this.getCharge=function(){return l};this.setPosition=function(a){d=!0};this.getPosition=function(){return p};this.setNfieldLines=function(a){s=a;d=!0};this.getNfieldLines=function(){return s};this.setModified=function(a){d=a};this.isModified=function(){return d};this.setName=function(a){k=a};this.getName=function(){return k};this.getField=function(a,b,c){var d,e=[0,0,0],f;a-=p[0];b-=p[1];c-=p[2];r=
a*a+b*b+c*c;if(0>=r)return e;f=Math.sqrt(r);d=l/r;e[0]=d*a/f;e[1]=d*b/f;e[2]=d*c/f;return e};this.getFieldSeedPointsI=function(a){var b,c,d,e,f,g;e=[];f=0<l?1:0>l?-1:0;a=Math.round(a*l*f);b=2/a;for(var k=0;k<a;k++)g=k*b-1+b/2,d=Math.sqrt(1-g*g),c=2.39996323*k,e.push([Math.cos(c)*d+p[0],g+p[1],Math.sin(c)*d+p[2],f]);return e};this.getStartPoints=function(a,b){var c,d,e,f,g,k,h;k=0<l?1:0>l?-1:0;c=Math.round(n*l*k)+1+s;f=3.6/Math.sqrt(c);d="undefined"===typeof a?Math.PI/2:a;b="undefined"===typeof b?
1:b;g=[];if(0<c)for(var r=1;r<c;r++)h=-1+2*r/c,e=Math.sqrt(1-h*h),d+=f/e,g.push([Math.cos(d)*e*b+p[0],h*b+p[1],Math.sin(d)*e*b+p[2],k]);return g};this.shouldStop=function(a,b,c,d){return 0>a*l&&4>r};l=f;d=!0;k=e;p=[g,h,a];n="undefined"===typeof b?0:b;s="undefined"===typeof c?0:c};m.Charges=function(){var g,h,a,f;this.addCharge=function(b){a=g.push(b);return this};for(var b=0;b<arguments.length;b++)this.addCharge(arguments[b]);this.getNcharges=function(){return a};this.getCharges=function(){return g};
this.addDistribution=function(a){f=h.push(a);return this};this.getNdistributions=function(){return f};this.getDistributions=function(){return h};this.chargesModified=function(){var c;c=!1;for(b=0;b<a&&!c;b++)c=c||g[b].isModified();return c};this.distributionsModified=function(){var a;a=!1;for(b=0;b<f&&!a;b++)a=a||h[b].isModified();return a};this.isModified=function(){return this.chargesModified()||this.distributionsModified()};this.setModified=function(c){for(b=0;b<a;b++)g[b].setModified(c);for(b=
0;b<f;b++)h[b].setModified(c)};this.getStartPoints=function(b,e){var l,d=b,k=1.57079632679/(a+1),s=[],p;for(l=0;l<a;l++)p=g[l],s=s.concat(p.getStartPoints(d,e)),d+=k;for(l=0;l<f;l++)s=s.concat(h[l].getStartPoints());return s};this.getField=function(b,e,l){for(var d,k=[0,0,0],s=0;s<a;s++)d=g[s],d=d.getField(b,e,l),k[0]+=d[0],k[1]+=d[1],k[2]+=d[2];for(s=0;s<f;s++)d=h[s].getField(b,e,l),k[0]+=d[0],k[1]+=d[1],k[2]+=d[2];return k};this.shouldStop=function(b,e,f,d){var k;k=!1;for(var h=0;h<a&!k;h++)k=g[h],
k=k.shouldStop(b,e,f,d);return k};a=0;g=[];h=[]}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.electricfield=window.vizit.electricfield||{};
(function(m){m.ElectricField=function(g){var h,a,f,b,c,e,l,d,k,s,p,n,r,q,m,t,u,v,y,D,z;this.setArrowSpacing=function(b){a=b;"undefined"!==typeof m&&m.setArrowSpacing(b)};this.getArrowSpacing=function(){return a};this.setArrowHeadSize=function(a){h=a;"undefined"!==typeof m&&m.setArrowHeadSize(a)};this.getArrowHeadSize=function(){return h};this.setColor=function(a){l=a};this.getColor=function(){return l};this.setCharges=function(a){e=a};this.getCharges=function(){return e};this.addGaussianSurface=function(a){s.push(a)};
this.getGaussianSurfaces=function(){return s};this.setGlUtility=function(a){p=a};this.getGlUtility=function(){return p};this.setMaxVectors=function(a){r=a};this.getMaxVectors=function(){return r};this.setModelViewMatrix=function(a){u=a;q=p.extractRotationPart(u,q)};this.getModelViewMatrix=function(){return u};this.setProjectionMatrix=function(a){v=a};this.addStartPoint=function(a,b,d,c){y.push([a,b,d,c]);return this};this.addStartPoints=function(a){y=y.concat(a)};this.getStartPoints=function(){return y};
this.render=function(){if(D){var a;a=p.getGLContext();e.chargesModified()?(this.setupCharges(),this.setupFieldLines()):e.distributionsModified()&&this.setupFieldLines();p.clear();c.render(v,u,f,e);t.render(v,u,l,k);a.enable(a.BLEND);a.enable(a.CULL_FACE);a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);z.render(v,u,q,e.getDistributions());a.disable(a.DEPTH_TEST);z.render(v,u,q,s);a.enable(a.DEPTH_TEST);a.disable(a.BLEND);a.disable(a.CULL_FACE);e.setModified(!1)}};this.setupCharges=function(a){f||(a=
p.getGLContext(),f=a.createBuffer());a=b.generate();p.loadData(f,a)};this.setupFieldLines=function(){var a,b,d,c,f,g;f=[];f=f.concat(e.getStartPoints(0,5));f=f.concat(y);d=f.length;c=k.length;g=Math.min(d,c);for(b=0;b<g;++b)a=f[b],a=m.generate(a[0],a[1],a[2],a[3]),k[b].reload(p,a);for(;b<c;++b)k[b].disable();for(;b<d;++b)a=f[b],a=m.generate(a[0],a[1],a[2],a[3]),k.push(new vizit.electricfield.FieldLineVBO(p,a))};this.start=function(){p.clearColor(0,0,0,0);t=new vizit.electricfield.FieldLineRenderer(p);
b=new vizit.electricfield.ChargeGenerator(e);m=new vizit.electricfield.FieldLineGenerator(e,n,d,h,a);this.setupFieldLines(e,n,d,h,a);c=new vizit.electricfield.ChargeRenderer(p);this.setupCharges(e);z=new vizit.electricfield.SurfaceRenderer(p);D=!0;this.render()};h=0.3;a=1.2;l=new Float32Array([0.8,0.3,0.3,1]);d=0.6;k=[];s=[];n=3E3;r=5;q=new Float32Array([1,0,0,0,1,0,0,0,1]);y=[];D=!1}})(window.vizit.electricfield);window.vizit=window.vizit||{};window.vizit.vectorfield=window.vizit.vectorfield||{};
(function(m){m.VectorFieldGenerator=function(g,h,a,f,b){var c,e,l,d,k,s,p,n;this.setStartPoints=function(a){n=a;return this};this.getStartPoints=function(){return n};this.setMaxVectors=function(a){s=a;return this};this.getMaxVectors=function(){return s};this.setArrowHeadSize=function(a){e=a;return this};this.getArrowHeadSize=function(){return e};this.setVectorSpacing=function(a){vectorSpacing=a;return this};this.getVectorSpacing=function(){return vectorSpacing};this.setDs=function(a){d=a;return this};
this.getDs=function(){return d};this.generateVector=function(a,b,d,c,e,f,g,k,l,h){var n,s,p,m,B,F,w,A,E,L,J,M,N;L=a+c[0]*l;J=b+c[1]*l;M=d+c[2]*l;0!==c[2]?(w=F=1,A=-(c[0]+c[1])/c[2]):(0!==c[1]?(F=1,w=-(c[0]+c[2])/c[1]):(F=-(c[1]+c[2])/c[0],w=1),A=1);E=g*f*e*l/Math.sqrt(F*F+w*w+A*A);F*=E;w*=E;A*=E;n=f*c[0]*l;s=f*c[1]*l;c=f*c[2]*l;p=s*A-c*w;m=c*F-n*A;B=n*w-s*F;E=g*f*e*l/Math.sqrt(p*p+m*m+B*B);p*=E;m*=E;B*=E;e=L-n+F;f=J-s+w;g=M-c+A;F=L-n-F;w=J-s-w;A=M-c-A;l=L-n+p;E=J-s+m;N=M-c+B;n=L-n-p;s=J-s-m;B=M-c-
B;c=6*k+1;h.pushVertex(a);h.pushVertex(b);h.pushVertex(d);h.pushIndex(6*k);h.pushVertex(L);h.pushVertex(J);h.pushVertex(M);h.pushIndex(c);h.pushVertex(e);h.pushVertex(f);h.pushVertex(g);h.pushIndex(6*k+2);h.pushIndex(c);h.pushVertex(F);h.pushVertex(w);h.pushVertex(A);h.pushIndex(6*k+3);h.pushIndex(c);h.pushVertex(l);h.pushVertex(E);h.pushVertex(N);h.pushIndex(6*k+4);h.pushIndex(c);h.pushVertex(n);h.pushVertex(s);h.pushVertex(B);h.pushIndex(6*k+5);h.pushIndex(c)};this.trace=function(a,b,f,g,k,h,l,
n,s){var p,m,G,K,H;H=K=p=0;for(m=!1;H<h&&!m;){G=a.getField(b,f,g);m=Math.sqrt(G[0]*G[0]+G[1]*G[1]+G[2]*G[2]);if(0===m)break;p>=K&&(this.generateVector(b,f,g,G,m,e,c,l+H,n,s),K=p+Math.max(1.2*m*n,1),H++);b+=k*G[0]/m*d;f+=k*G[1]/m*d;g+=k*G[2]/m*d;p+=d;m=a.shouldStop(k,b,f,g)}return H};this.generateField=function(){var a,b,c,d;c=n.length;p=0;b=new vizit.utility.IndexedVertices(6*s*c,10*s*c);for(a=0;a<c;a++)d=n[a],d[4]=p,p+=this.trace(k,d[0],d[1],d[2],d[3],s,p,l,b);return b};c=f;e=a;d=0.33;k=g;s=h;l=
b}})(window.vizit.vectorfield);window.vizit=window.vizit||{};window.vizit.field=window.vizit.field||{};
(function(m){m.FieldRenderer=function(g){var h,a,f,b,c,e,l,d;this.getContext=function(){return f.getGLContext()};this.setRenderer=function(a){e=a;e.setGlUtility(f);e.setModelViewMatrix(b);e.setProjectionMatrix(c)};this.setModelViewMatrix=function(a){b=a;e.setModelViewMatrix(b)};this.getModelViewMatrix=function(){return b};this.requestRender=function(){l||(l=!0,requestAnimationFrame(this.render))};this.render=function(){e.render();l=!1};this.start=function(){e.start()};this.setScale=function(a){d=
a;1>d&&(d=1);c=f.generateOrthographicMatrix(d,d,-d,d);e.setProjectionMatrix(c);this.render()};this.zoomBy=function(a){this.setScale(d+a)};this.setElementName=function(a,b){h[b]=a};this.getElementByName=function(a){var b;h.hasOwnProperty(a)&&(b=h[a]);return b};h={};f=new vizit.utility.GLUtility(g);d=5;b=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);new Float32Array([1,0,0,0,1,0,0,0,1]);c=f.generateOrthographicMatrix(d,d,-d,d);a=new vizit.utility.MotionEventHandler(this,f,75,4);g.addEventListener("mousewheel",
a.handleMouseWheel.bind(a),!1);g.addEventListener("mousedown",a.handleMouseDown.bind(a),!1);document.addEventListener("mouseup",a.handleMouseUp.bind(a),!1);document.addEventListener("mousemove",a.handleMouseMove.bind(a),!1);g.addEventListener("touchstart",a.handleTouchStart.bind(a),!1);g.addEventListener("touchmove",a.handleTouchMove.bind(a),!1);g.addEventListener("touchend",a.handleTouchEnd.bind(a),!1)}})(window.vizit.field);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(m){m.CombinedVectorValuedFunctionBuilder=function(g){var h;this.buildFunction=function(a){var f,b;for(b in a)"args"!==b.toLowerCase()&&("body"===b.toLowerCase()?f=a[b]:"name"===b.toLowerCase()?name=a[b]:"properties"!==b.toLowerCase()&&"stop"!==b.toLowerCase()&&b.toLowerCase());return new vizit.vectorfield.VectorFunction(agrs,f)};this.build=function(a){var f,b,c,e;if(a)if(b=new vizit.vectorfield.CombinedVectorFunctions,Array.isArray(a)){e=a.length;for(var g=0;g<e;++g)if(f=this.buildFunction(a[g]))b.addFunction(f),
(c=f.getName())&&h.setElementName(f,c)}else if(f=this.buildFunction(a))b.addFunction(f),(c=f.getName())&&h.setElementName(f,c);return b};h=g}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(m){m.SurfaceBuilder=function(){var g,h,a,f,b,c;this.getXMin=function(){return g};this.getXMax=function(){return h};this.getYMin=function(){return a};this.getYMax=function(){return f};this.getZMin=function(){return b};this.getZMax=function(){return c};this.gaussianCylinderBuilder=function(e){var l,d,k,s,p,n,m,q,x;for(d in e)"x"===d.toLowerCase()?k=e[d]:"y"===d.toLowerCase()?s=e[d]:"z"===d.toLowerCase()?p=e[d]:"h"===d.toLowerCase()?n=e[d]:"r"===d.toLowerCase()?m=e[d]:"phi"===d.toLowerCase()?
q=e[d]:"theta"===d.toLowerCase()?x=e[d]:"name"===d.toLowerCase()&&(l=e[d]);g=Math.min(g,k-m,k+m);h=Math.max(h,k-m,k+m);a=Math.min(a,s-m,s-m);f=Math.max(f,s-m,s+m);b=Math.min(b,p-n,p+n);c=Math.max(c,p-n,p+n);return new vizit.electricfield.GaussianCylinder(k,s,p,n,m,q,x,l)};this.gaussianSphereBuilder=function(e){var l,d,k,m,p,n;for(d in e)"x"===d.toLowerCase()?k=e[d]:"y"===d.toLowerCase()?m=e[d]:"z"===d.toLowerCase()?p=e[d]:"r"===d.toLowerCase()?n=e[d]:"name"===d.toLowerCase()&&(l=e[d]);g=Math.min(g,
k-n,k+n);h=Math.max(h,k-n,k+n);a=Math.min(a,m-n,m-n);f=Math.max(f,m-n,m+n);b=Math.min(b,p-n,p+n);c=Math.max(c,p-n,p+n);return new vizit.electricfield.GaussianSphere(k,m,p,n,l)};this.surfaceBuilder=function(a){var b,c,f,g;b=/\s*gaussian\s*sphere\s*/i;for(c in a)if("type"===c.toLowerCase()){g=a[c];break}g.match(/\s*gaussian\s*cylinder\s*/i)?f=this.gaussianCylinderBuilder(a):g.match(b)&&(f=this.gaussianSphereBuilder(a));return f};this.build=function(a,b,c){var f,g;if(a)if(Array.isArray(a)){g=a.length;
for(var h=0;h<g;++h)if(f=this.surfaceBuilder(a[h],c))b.addGaussianSurface(f),(name=f.getName())&&c.setElementName(f,name)}else if(f=this.surfaceBuilder(a))b.addGaussianSurface(f),(name=f.getName())&&c.setElementName(f,name);return b}}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};(function(m){m.VectorValuedFunctionBuilder=function(g){var h;this.build=function(a,f){var b,c;a&&(b=Array.isArray(a)?a[0]:a,"undefined"!==typeof b&&(c="function"===b.type.toLowerCase()?new vizit.builder.CombinedVectorValuedFunctionBuilder(h):new vizit.builder.ElectricFieldElementBuilder(h,f)));return c.build(a)};h=g}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(m){m.DistributionBuilder=function(){var g,h,a,f,b,c,e,l;this.getXMin=function(){return a};this.getXMax=function(){return f};this.getYMin=function(){return b};this.getYMax=function(){return c};this.getZMin=function(){return e};this.getZMax=function(){return l};this.chargedPlaneBuilder=function(d){var k,m,p,n,r,q,x,t,u,v,y,D,z,C,I,G,K;for(k in d)k.match(g)?m=d[k]:k.match(h)?p=d[k]:"nfieldLines"===k.toLowerCase()?r=d[k]:"x0"===k.toLowerCase()?q=d[k]:"y0"===k.toLowerCase()?x=d[k]:"z0"===k.toLowerCase()?
t=d[k]:"x1"===k.toLowerCase()?u=d[k]:"y1"===k.toLowerCase()?v=d[k]:"z1"===k.toLowerCase()?y=d[k]:"x2"===k.toLowerCase()?D=d[k]:"y2"===k.toLowerCase()?z=d[k]:"z2"===k.toLowerCase()?C=d[k]:"x3"===k.toLowerCase()?I=d[k]:"y3"===k.toLowerCase()?G=d[k]:"z3"===k.toLowerCase()?K=d[k]:"name"===k.toLowerCase()&&(n=d[k]);a=Math.min(a,q,u,D,I);f=Math.max(f,q,u,D,I);b=Math.min(b,x,v,z,K);c=Math.max(c,x,v,z,K);e=Math.min(e,t,y,C,K);l=Math.max(l,t,y,C,K);return new vizit.electricfield.ChargedPlane(q,x,t,u,v,y,D,
z,C,I,G,K,m,p,r,n)};this.chargedCylinderBuilder=function(d){var k,m,p,n,r,q,x,t,u,v,y,D,z;for(r in d)r.match(g)?k=d[r]:r.match(h)?m=d[r]:"nfieldLines"===r.toLowerCase()?n=d[r]:"x0"===r.toLowerCase()?q=d[r]:"y0"===r.toLowerCase()?x=d[r]:"z0"===r.toLowerCase()?t=d[r]:"x1"===r.toLowerCase()?u=d[r]:"y1"===r.toLowerCase()?v=d[r]:"z1"===r.toLowerCase()?y=d[r]:"r0"===r.toLowerCase()?D=d[r]:"r1"===r.toLowerCase()?z=d[r]:"name"===r.toLowerCase()&&(p=d[r]);a=Math.min(a,q,u);f=Math.max(f,q,u);b=Math.min(b,x,
v);c=Math.max(c,x,v);e=Math.min(e,t,y);l=Math.max(l,t,y);return new vizit.electricfield.ChargedCylinder(q,x,t,u,v,y,D,z,k,m,n,p)};this.chargedLineBuilder=function(d){var k,m,p,n,r,q,x,t,u,v,y;for(r in d)r.match(g)?k=d[r]:r.match(h)?m=d[r]:"nfieldLines"===r.toLowerCase()?n=d[r]:"x0"===r.toLowerCase()?q=d[r]:"y0"===r.toLowerCase()?x=d[r]:"z0"===r.toLowerCase()?t=d[r]:"x1"===r.toLowerCase()?u=d[r]:"y1"===r.toLowerCase()?v=d[r]:"z1"===r.toLowerCase()?y=d[r]:"name"===r.toLowerCase()&&(p=d[r]);a=Math.min(a,
q,u);f=Math.max(f,q,u);b=Math.min(b,x,v);c=Math.max(c,x,v);e=Math.min(e,t,y);l=Math.max(l,t,y);return new vizit.electricfield.ChargedLine(q,x,t,u,v,y,k,m,n,p)};this.chargedSphereBuilder=function(d){var g,m,p,n,r,q,x,t,u;for(property in d)"charge"===property.toLowerCase()?g=d[property]:property.match(h)?m=d[property]:"nfieldLines"===property.toLowerCase()?n=d[property]:"x"===property.toLowerCase()?r=d[property]:"y"===property.toLowerCase()?q=d[property]:"z"===property.toLowerCase()?x=d[property]:"a"===
property.toLowerCase()?t=d[property]:"b"===property.toLowerCase()?u=d[property]:"name"===property.toLowerCase()&&(p=d[property]);a=Math.min(a,r-u);f=Math.max(f,r+u);b=Math.min(b,q-u);c=Math.max(c,q+u);e=Math.min(e,x-u);l=Math.max(l,x+u);return new vizit.electricfield.ChargedSphere(r,q,x,t,u,g,m,n,p)};this.chargeDistributionBuilder=function(a){var b,c,e,f,g,h;b=/\s*charged\s*cylinder\s*/i;c=/\s*charged\s*line\s*/i;e=/\s*charged\s*sphere\s*/i;for(g in a)if("type"===g.toLowerCase()){h=a[g];break}h.match(/\s*charged\s*plane\s*/i)?
f=this.chargedPlaneBuilder(a):h.match(b)?f=this.chargedCylinderBuilder(a):h.match(c)?f=this.chargedLineBuilder(a):h.match(e)&&(f=this.chargedSphereBuilder(a));return f};this.build=function(a,b,c){var e,f,g;if(a)if(Array.isArray(a)){g=a.length;for(var h=0;h<g;++h)if(e=this.chargeDistributionBuilder(a[h]))b.addDistribution(e),(f=e.getName())&&c.setElementName(e,f)}else if(e=this.chargeDistributionBuilder(a))b.addDistribution(e),(f=e.getName())&&c.setElementName(e,f);return b};g=/\s*charge\s*density\s*/i;
h=/\s*field\s*line\s*density\s*/i}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(m){m.ChargesBuilder=function(){var g,h,a,f,b,c;this.getXMin=function(){return g};this.getXMax=function(){return h};this.getYMin=function(){return a};this.getYMax=function(){return f};this.getZMin=function(){return b};this.getZMax=function(){return c};this.chargeBuilder=function(e){var l,d,k,m,p,n,r,q,x,t,u;d="";r=/\s*field\s*line\s*density\s*/i;for(t in e)"charge"===t.toLowerCase()?u=e[t]:"x"===t.toLowerCase()?m=e[t]:"y"===t.toLowerCase()?p=e[t]:"z"===t.toLowerCase()?n=e[t]:t.match(r)?q=
e[t]:"nfieldlines"===t.toLowerCase()?x=e[t]:"name"===t.toLowerCase()&&(k=e[t]);"undefined"===typeof u&&(d="No charge specified for point charge.");"undefined"===typeof m&&(0<d.length&&(d+="\n"),d+="x coordinate is not defined in charge configuration.");"undefined"===typeof p&&(0<d.length&&(d+="\n"),d+="y coordinate is not defined in charge configuration.");"undefined"===typeof n&&(0<d.length&&(d+="\n"),d+="z coordinate is not defined in charge configuration.");0===d.length&&(m<g&&(g=m),m>h&&(h=m),
p<a&&(a=p),p>f&&(f=p),n<b&&(b=n),n>c&&(c=n),l=new vizit.electricfield.Charge(m,p,n,u,q,x,k));return l};this.build=function(a,b,c){var f,g,h;if(a)if(Array.isArray(a)){h=a.length;for(var m=0;m<h;++m)if(f=this.chargeBuilder(a[m]))b.addCharge(f),(g=f.getName())&&c.setElementName(f,g)}else if(f=this.chargeBuilder(a))b.addCharge(f),(g=f.getName())&&c.setElementName(f,g);return b};g=Number.POSITIVE_INFINITY;h=Number.NEGATIVE_INFINITY;a=Number.POSITIVE_INFINITY;f=Number.NEGATIVE_INFINITY;b=Number.POSITIVE_INFINITY;
c=Number.NEGATIVE_INFINITY}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(m){m.BindingBuilder=function(){this.bindingBuilder=function(g,h){var a,f,b,c,e;for(b in g)"target"===b.toLowerCase()?e=g[b]:"set"===b.toLowerCase()?c=g[b]:"from"===b.toLowerCase()?f=g[b]:"mapping"===b.toLowerCase()&&(a=g[b]);f||(f=c);b="set"+c.charAt(0).toUpperCase();1<c.length&&(b+=c.slice(1));c=h.getElementByName(e)[b];a=a?new MappingEventHandler(c,f,a,h):new DirectEventHandler(c,h);document.addEventListener(f+"Changed",a.handleUpdate.bind(a),!1)};this.build=function(g,h){var a;if(g)if(Array.isArray(g)){a=
g.length;for(var f=0;f<a;++f)this.bindingBuilder(g,h)}else this.bindingBuilder(g,h)}}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(m){m.ElectricFieldElementBuilder=function(g,h){var a,f;this.buildELement=function(b,c){var e,g,d,h,m,p,n,r;e=/\s*charged\s*cylinder\s*/i;g=/\s*charged\s*line\s*/i;d=/\s*charged\s*plane\s*/i;h=/\s*charged\s*sphere\s*/i;m=/\s*gaussian\s*cylinder\s*/i;p=/\s*gaussian\s*sphere\s*/i;for(n in b)"type"===n.toLowerCase()&&(r=b[n]);if("charge"===r.toLowerCase())e=new vizit.builder.ChargesBuilder,c=e.build(b,c,a);else if(r.match(e)||r.match(g)||r.match(d)||r.match(h))e=new vizit.builder.DistributionBuilder,
c=e.build(b,c,a);else if(r.match(m)||r.match(p))e=new vizit.builder.SurfaceBuilder,f=e.build(b,f,a);return c};this.build=function(a){var c,e;c=new vizit.electricfield.Charges;if(a)if(Array.isArray(a)){e=a.length;for(var f=0;f<e;++f)this.buildELement(a[f],c)}else this.buildELement(a,c);return c};a=g;f=h}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(m){m.ElectricFieldBuilder=function(g){var h;this.build=function(a){var f,b,c,e,g,d;for(d in a)"arrowheadsize"===d.toLowerCase()?f=a[d]:"arrowspacing"===d.toLowerCase()?b=a[d]:"maxvectors"===d.toLowerCase()?g=a[d]:"elements"===d.toLowerCase()&&(e=a[d]);a=new vizit.electricfield.ElectricField;"undefined"!==typeof g&&a.setMaxVectors(g);"undefined"!==typeof f&&a.setArrowHeadSize(f);"undefined"!==typeof b&&a.setArrowSpacing(b);(c=(new vizit.builder.ElectricFieldElementBuilder(h,a)).build(e,c))&&
a.setCharges(c);return a};h=g}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(m){m.SimpleVectorFieldBuilder=function(g){var h;this.build=function(a){var f,b,c,e,g,d,k;for(k in a)"arrowheadsize"===k.toLowerCase()&&(f=a[k]),"arrowheadwidth"===k.toLowerCase()?b=a[k]:"arrowsize"===k.toLowerCase()?c=a[k]:"maxvectors"===k.toLowerCase()&&(e=a[k]),"f"===k.toLowerCase()?d=a[k]:k.toLowerCase();d&&(a=new vizit.builder.VectorValuedFunctionBuilder(h),g=a.build(d));c=new vizit.vectorfield.SimpleVectorField(g,c);"undefined"!==typeof e&&c.setMaxVectors(e);"undefined"!==typeof f&&
c.setArrowHeadSize(f);"undefined"!==typeof b&&c.setArrowHeadWidth(b);return c};h=g}})(window.vizit.builder);window.vizit=window.vizit||{};window.vizit.builder=window.vizit.builder||{};
(function(m){m.VizBuilder=function(){this.processConfig=function(g){var h,a,f,b,c,e,l,d;a=/\s*electric\s*field\s*/i;l=/\s*simple\s*vector\s*field\s*/i;for(f in g)"canvas"===f.toLowerCase()?b=g[f]:"scale"===f.toLowerCase()?e=g[f]:"type"===f.toLowerCase()?d=g[f]:"bindings"===f.toLowerCase()&&(h=g[f]);"undefined"===typeof d?alert("Missing type for visualization configuration."):"undefined"===b?alert("No canvas specified, please provide the id of a canvas."):(f=document.getElementById(b))?(b=new vizit.field.FieldRenderer(f),
d.match(a)?(a=new vizit.builder.ElectricFieldBuilder(b),c=a.build(g)):d.match(l)?(a=new vizit.builder.SimpleVectorFieldBuilder(b),c=a.build(g)):alert("Unrecognized visualization type: "+d+"."),c&&(h&&(a=new vizit.builder.BindingBuilder,a.build(h,b)),b.setRenderer(c),"undefined"!==typeof e&&b.setScale(e),b.start())):alert('Can not find canvas with id="'+b+'".')};this.process=function(g){var h;if(g)if(Array.isArray(g)){h=g.length;for(var a=0;a<h;++a)this.processConfig(g[a])}else this.processConfig(g)}}})(window.vizit.builder);
function VIZ_CONFIG_IF_EXISTS(m){"undefined"!==typeof VISUALIZATION_CONFIG&&(m=new vizit.builder.VizBuilder,m.process(VISUALIZATION_CONFIG))}"interactive"===document.readyState||"complete"===document.readyState?VIZ_CONFIG_IF_EXISTS():document.addEventListener("DOMContentLoaded",VIZ_CONFIG_IF_EXISTS);
