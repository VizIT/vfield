<!DOCTYPE html>
<html>
  <head>
    <title>Simple Point Charge API Test</title>
    <meta   http-equiv="Content-Type" content="text/html;charset=utf-8" >
    <meta   name="viewport"           content="width=device-width, initial-scale=1.0">
    <link   rel="stylesheet"          href="nstyle.css" type="text/css" />
    <link   rel="stylesheet"          href="vfield.css" type="text/css" />

    <!-- Tests load each script individually to allow easier debugging and issue tracking. -->
    <script type="text/javascript"    src="../lesson/js/DirectEventHandler.js"></script>
    <script type="text/javascript"    src="../lesson/js/MappingEventHandler.js"></script>
    <script type="text/javascript"    src="../lesson/js/Lesson.js"></script>
    <script type="text/javascript"    src="js/MotionEventHandler.js"></script>
    <script type="text/javascript"    src="js/GLUtility.js"></script>
    <script type="text/javascript"    src="js/Color.js"></script>
    <script type="text/javascript"    src="js/Geometry.js"></script>
    <script type="text/javascript"    src="js/SurfaceRenderer.js"></script>
    <script type="text/javascript"    src="js/IndexedVertices.js"></script>
    <script type="text/javascript"    src="js/LineRenderer.js"></script>
    <script type="text/javascript"    src="js/SimpleVectorField.js"></script>
    <script type="text/javascript"    src="js/CountdownLatch.js"></script>
    <script type="text/javascript"    src="js/ChargeGenerator.js"></script>
    <script type="text/javascript"    src="js/ChargeRenderer.js"></script>
    <script type="text/javascript"    src="js/FieldLineVBO.js"></script>
    <script type="text/javascript"    src="js/FieldLineRenderer.js"></script>
    <script type="text/javascript"    src="js/FieldLine.js"></script>
    <script type="text/javascript"    src="js/FieldLineGenerator.js"></script>
    <script type="text/javascript"    src="js/FieldLineRenderer.js"></script>
    <script type="text/javascript"    src="js/Cylinder.js"></script>
    <script type="text/javascript"    src="js/GaussianCylinder.js"></script>
    <script type="text/javascript"    src="js/GaussianSphere.js"></script>
    <script type="text/javascript"    src="js/ChargedCylinder.js"></script>
    <script type="text/javascript"    src="js/ChargedLine.js"></script>
    <script type="text/javascript"    src="js/ChargedPlane.js"></script>
    <script type="text/javascript"    src="js/ChargedSphere.js"></script>
    <script type="text/javascript"    src="js/Charges.js"></script>
    <script type="text/javascript"    src="js/ElectricField.js"></script>
    <script type="text/javascript"    src="js/VectorFunction.js"></script>
    <script type="text/javascript"    src="js/CombinedVectorFunctions.js"></script>
    <script type="text/javascript"    src="js/VectorFieldGenerator.js"></script>
    <script type="text/javascript"    src="js/FieldRenderer.js"></script>
    <script type="text/javascript"    src="js/SurfaceBuilder.js"></script>
    <script type="text/javascript"    src="js/DistributionBuilder.js"></script>
    <script type="text/javascript"    src="js/ChargesBuilder.js"></script>
    <script type="text/javascript"    src="js/BindingBuilder.js"></script>
    <script type="text/javascript"    src="js/ElectricFieldElementBuilder.js"></script>
    <script type="text/javascript"    src="js/ElectricFieldBuilder.js"></script>
    <script type="text/javascript"    src="js/CombinedVectorValuedFunctionBuilder.js"></script>
    <script type="text/javascript"    src="js/VectorValuedFunctionBuilder.js"></script>
    <script type="text/javascript"    src="js/SimpleVectorFieldBuilder.js"></script>
    <script type="text/javascript"    src="js/VizBuilder.js"></script>
  </head>
  <body>
    <figure class="left">
      <!--A blank area we can draw on with JavaScript. -->
      <canvas id="drawingSurface" width="300" height="300"></canvas>
      <figcaption>The electric field from a point charge represented as a vector field.</figcaption>
    </figure>

    <script type="text/javascript">

    var f;
    var framework;
    var drawingSurface;
    var renderer;

    /*
     * Create the charges and package them into a charges collection. Edit this
     * to change the charge configuration modeled in this illustration.
     */
    function placeCharges(fieldRenderer)
    {
      var charge1;

      // Each charge has x, y, z coordinates, then the charge and field line density.
      // Each of these is a floating point number.
      charge1 = new vizit.electricfield.Charge(0.0, 0.0, 0.0, +5.0, 5.0);

      charges = new vizit.electricfield.Charges();
      charges.addCharge(charge1);

      return charges;
    }

    drawingSurface = document.getElementById('drawingSurface');

    f              = placeCharges();
    // Vector field, f, and scale factor.
    renderer       = new SimpleVectorField(f, 1.0);
    renderer.setMaxVectors(30);

    framework      = new FieldRenderer(drawingSurface);
    framework.setRenderer(renderer);
    framework.setScale(5);

    framework.start();
  </script>
  <script type="text/javascript">
    "use strict";
    var error;
    var txt;
    var canvasSupported = !!window.HTMLCanvasElement;
    if (canvasSupported)
    { 
      var myCanvas       = document.createElement('canvas');
      var gl             = myCanvas.getContext("experimental-webgl")
                           || myCanvas.getContext("webgl");
      if (!gl)
      {
        txt = "Your browser supports the HTML5 canvas, but does not support WebGL."
      }
    }
    else
    {
      txt = "Your browser does not support the HTML5 canvas, which is required for WebGL."
    }

    if (txt != null)
    {
        txt += " To see the examples on this page, please get a <a href"
            +  "= 'http://get.webgl.org/'>browser that supports WebGL</a>.";
        error = document.getElementById("nowebgl");
        error.innerHTML=txt;
        error.style.display="block";
    }
  </script>
</body>
</html>
